import {createRequire}from'module';import {$RefParser,getResolvedInput,sendRequest}from'@hey-api/json-schema-ref-parser';import At from'node:fs';import Q from'node:path';import yt from'ansi-colors';import {fileURLToPath}from'node:url';import x from'typescript';import {EOL}from'os';import {loadConfig}from'c12';const require = createRequire(import.meta.url);
var Zp=Object.create;var pi=Object.defineProperty;var Yp=Object.getOwnPropertyDescriptor;var ec=Object.getOwnPropertyNames;var tc=Object.getPrototypeOf,rc=Object.prototype.hasOwnProperty;var ci=(e=>typeof require<"u"?require:typeof Proxy<"u"?new Proxy(e,{get:(t,r)=>(typeof require<"u"?require:t)[r]}):e)(function(e){if(typeof require<"u")return require.apply(this,arguments);throw Error('Dynamic require of "'+e+'" is not supported')});var Mu=(e,t)=>()=>(t||e((t={exports:{}}).exports,t),t.exports);var nc=(e,t,r,n)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of ec(t))!rc.call(e,s)&&s!==r&&pi(e,s,{get:()=>t[s],enumerable:!(n=Yp(t,s))||n.enumerable});return e};var Fu=(e,t,r)=>(r=e!=null?Zp(tc(e)):{},nc(t||!e||!e.__esModule?pi(r,"default",{value:e,enumerable:true}):r,e));var _r=(...e)=>{let t=new Headers;for(let r of e){if(!r||typeof r!="object")continue;let n=r instanceof Headers?r.entries():Object.entries(r);for(let[s,o]of n)if(o===null)t.delete(s);else if(Array.isArray(o))for(let a of o)t.append(s,a);else o!==void 0&&t.set(s,typeof o=="object"?JSON.stringify(o):o);}return t};var dd=async({fetchOptions:e,inputPath:t,timeout:r,watch:n})=>{let s=new $RefParser,o=getResolvedInput({pathOrUrlOrSchema:t}),a,p,c;if(o.type==="url"){if(n.lastValue&&n.isHeadMethodSupported!==false){try{let m=await sendRequest({fetchOptions:{method:"HEAD",...e,headers:_r(e?.headers,n.headers)},timeout:r,url:o.path});if(m.response.status>=300)return {error:"not-ok",response:m.response};c=m.response;}catch(m){return {error:"not-ok",response:new Response(m.message)}}if(!c.ok&&n.isHeadMethodSupported)return {error:"not-ok",response:c};if(n.isHeadMethodSupported===void 0&&(n.isHeadMethodSupported=c.ok),c.status===304)return {error:"not-modified",response:c};if(p===void 0){let m=c.headers.get("ETag");m&&(p=m!==n.headers.get("If-None-Match"),p&&n.headers.set("If-None-Match",m));}if(p===void 0){let m=c.headers.get("Last-Modified");m&&(p=m!==n.headers.get("If-Modified-Since"),p&&n.headers.set("If-Modified-Since",m));}if(p===false)return {error:"not-modified",response:c}}try{let m=await sendRequest({fetchOptions:{method:"GET",...e},timeout:r,url:o.path});if(m.response.status>=300)return {error:"not-ok",response:m.response};c=m.response;}catch(m){return {error:"not-ok",response:new Response(m.message)}}if(!c.ok)return {error:"not-ok",response:c};if(a=c.body?await c.arrayBuffer():new ArrayBuffer(0),p===void 0){let m=new TextDecoder().decode(a);p=m!==n.lastValue,n.lastValue=m;}}else n.lastValue?p=false:n.lastValue=o.type;return p===false?{error:"not-modified",response:c}:{data:await s.bundle({arrayBuffer:a,pathOrUrlOrSchema:void 0,resolvedInput:o})}};var dc=fileURLToPath(import.meta.url),gs=Q.dirname(dc),xs=()=>{let e=gs;for(;e!==Q.dirname(e);){let r=At.readdirSync(e).filter(n=>n==="package.json");if(r[0]){let n=Q.join(e,r[0]);return JSON.parse(At.readFileSync(n,{encoding:"utf8"}))}e=Q.dirname(e);}},Od=e=>{if(e==="off")return null;if(e){let r=Q.isAbsolute(e)?e:Q.resolve(gs,e);return At.existsSync(r)?r:null}let t=gs;for(;t!==Q.dirname(t);){let n=At.readdirSync(t).filter(s=>s.startsWith("tsconfig")&&s.endsWith(".json")).sort(s=>s==="tsconfig.json"?-1:1);if(n[0])return Q.join(t,n[0]);t=Q.dirname(t);}return null},Sd=e=>{if(!e)return null;let t=x.readConfigFile(e,x.sys.readFile);if(t.error)throw new Error(`Couldn't read tsconfig from path: ${e}`);return x.parseJsonConfigFileContent(t.config,x.sys,Q.dirname(e))};var rt=e=>{At.existsSync(e)||At.mkdirSync(e,{recursive:true});},Id=e=>{At.existsSync(e)&&At.rmSync(e,{force:true,recursive:true});},Ht=({moduleOutput:e,sourceOutput:t})=>{let r=t.split("/");return `${Array.from({length:r.length}).fill("").join("../")||"./"}${e}`};var hc=process.stdin.isTTY&&process.stdout.isTTY,Qt=class extends Error{args;event;pluginName;constructor({args:t,error:r,event:n,name:s,pluginName:o}){let a=r instanceof Error?r.message:"Unknown error";super(a),this.args=t,this.cause=r.cause,this.event=n,this.name=s||r.name,this.pluginName=o,this.stack=r.stack;}},Nd=(e,t)=>{let r=`openapi-ts-error-${Date.now()}.log`,n=Q.resolve(process.cwd(),t);rt(n);let s=Q.resolve(n,r),o=`[${new Date().toISOString()}] `;e instanceof Qt&&(o+=`${e.name} during event "${e.event}"
`,e.pluginName&&(o+=`Plugin: ${e.pluginName}
`),o+=`Arguments: ${JSON.stringify(e.args,null,2)}

`);let a=e instanceof Error?e.message:String(e),p=e instanceof Error?e.stack:void 0;return o+=`Error: ${a}
`,p&&(o+=`Stack:
${p}
`),At.writeFileSync(s,o),s},vd=async e=>{let t="";e instanceof Qt&&(e.pluginName&&(t+=`**Plugin**: \`${e.pluginName}\`
`),t+=`**Event**: \`${e.event}\`
`,t+=`**Arguments**:
\`\`\`ts
${JSON.stringify(e.args,null,2)}
\`\`\`

`);let r=e instanceof Error?e.message:String(e),n=e instanceof Error?e.stack:void 0;t+=`**Error**: \`${r}\`
`,n&&(t+=`
**Stack Trace**:
\`\`\`
${n}
\`\`\``);let s=new URLSearchParams({body:t,labels:"bug \u{1F525}",title:"Crash Report"}),o=xs(),a;if(o&&typeof o=="object"&&"bugs"in o&&o.bugs&&typeof o.bugs=="object"&&"url"in o.bugs&&typeof o.bugs.url=="string"&&(a=o.bugs.url,a&&!a.endsWith("/")&&(a+="/")),a){let p=`${a}new?${s.toString()}`,c=(await import('open')).default;await c(p);}},qd=({error:e,logPath:t})=>{let r=xs(),n;r&&typeof r=="object"&&"name"in r&&typeof r.name=="string"&&(n=r.name),process.stderr.write(`
\u{1F6D1} ${yt.cyan(n||"")} ${yt.red("encountered an error.")}

${yt.red("\u2757\uFE0F Error:")} ${yt.white(typeof e=="string"?e:e instanceof Error?e.message:"Unknown error")}`+(t?`

${yt.cyan("\u{1F4C4} Crash log saved to:")} ${yt.gray(t)}`:""));},$d=async()=>hc?new Promise(e=>{process.stdout.write(`${yt.yellow(`

\u{1F4E2} Open a GitHub issue with crash details?`)} ${yt.yellow("(y/N):")}`),process.stdin.setEncoding("utf8"),process.stdin.once("data",t=>{e(t.trim().toLowerCase()==="y");});}):false;var di=["after","before","cursor","offset","page","start"];function me({keywords:e=di}={}){e.length||(e=di);let t=`^(${e.join("|")})$`;return new RegExp(t)}var zt=/^[^$_\p{ID_Start}]+/u,he=/^-?\d+(\.\d+)?$/,yi=/^(document|history|location|navigator|window)$/g,hi=/^(console|Array|Date|Error|Function|JSON|Map|Math|Object|Promise|RegExp|Set|WeakMap|WeakSet)$/g,oe=/^(arguments|async|await|break|case|catch|class|const|continue|debugger|default|delete|do|else|enum|eval|export|extends|false|finally|for|from|function|if|implements|import|in|instanceof|interface|let|new|null|package|private|protected|public|return|static|super|switch|this|throw|true|try|typeof|var|void|while|with|yield)$/g,gi=/^(global|process|Buffer)$/g,xi=/^(any|as|bigint|boolean|namespace|never|null|number|string|symbol|type|undefined|unknown|void)$/g,Pe=/^[$_\p{ID_Start}][$\u200c\u200d\p{ID_Continue}]*$/u;var ge=e=>(e||e==="")&&(Pe.lastIndex=0,!Pe.test(e))?`'${e}'`:e,Ut=e=>e&&e.startsWith("'")&&e.endsWith("'")?e.slice(1,e.length-1):e,V=e=>e.replace(/\*\//g,"*").replace(/\/\*/g,"*").replace(/\r?\n(.*)/g,(t,r)=>EOL+r.trim());var ve="client",fe=e=>{let t=E(e);return t.name==="@hey-api/client-axios"||t.name==="@hey-api/client-nuxt"?"baseURL":"baseUrl"},E=e=>{for(let t of e.pluginOrder){let r=e.plugins[t];if(r?.tags?.includes("client"))return r}return {config:{name:""},name:""}};var bi,S=()=>{let e=bi,t=E(e);return e.client=t,e},Oi=e=>(bi=e,S()),K=e=>E(e).name.startsWith("legacy/"),kt=e=>{if(K(e))return e.name};var xc=x.createPrinter({newLine:x.NewLineKind.LineFeed,removeComments:false}),Si=e=>x.createSourceFile("",e,x.ScriptTarget.ESNext,false,x.ScriptKind.TS),bc=Si(""),Oc=e=>e.replace(/\\u([0-9a-fA-F]{4})/g,(t,r)=>String.fromCharCode(Number.parseInt(r,16)));function qe({node:e,unescape:t=false}){let r=xc.printNode(x.EmitHint.Unspecified,e,bc);if(!t)return r;try{return Oc(r)}catch{return S().logs.level==="debug"&&console.warn("Could not decode value:",r),r}}function Ti(e){return Si(e).statements[0]}var R=({text:e})=>x.factory.createIdentifier(e),Ri=()=>x.factory.createThis(),z=({keyword:e})=>{let t=bs({keyword:e});return x.factory.createModifier(t)},Ii=({initializer:e,modifier:t,name:r,type:n})=>x.factory.createPropertyDeclaration(t?[z({keyword:t})]:void 0,r,void 0,n,e),le={boolean:e=>e?x.factory.createTrue():x.factory.createFalse(),export:({alias:e,asType:t=false,name:r})=>{let n=R({text:r});if(e){let s=R({text:e});return x.factory.createExportSpecifier(t,n,s)}return x.factory.createExportSpecifier(t,void 0,n)},import:({alias:e,asType:t=false,name:r})=>{let n=R({text:r});if(e){let s=R({text:e});return x.factory.createImportSpecifier(t,n,s)}return x.factory.createImportSpecifier(t,void 0,n)},number:e=>e<0?x.factory.createPrefixUnaryExpression(x.SyntaxKind.MinusToken,x.factory.createNumericLiteral(Math.abs(e))):x.factory.createNumericLiteral(e),string:(e,t=false)=>{let r=e;t&&(r=Ut(r));let n=r.includes("'")&&r.includes('"'),s=r.includes(`
`),o=r.startsWith("`"),a=r.startsWith("\\`")&&r.endsWith("\\`");return (s||n||o)&&!a&&(r=`\`${r.replace(/(?<!\\)`/g,"\\`").replace(/\${/g,"\\${")}\``),r.startsWith("`")?R({text:r}):vt({text:r})}},Nt=e=>e!==null&&typeof e=="object"&&typeof e.kind=="number"&&typeof e.flags=="number"&&typeof e.pos=="number"&&typeof e.end=="number",ht=e=>e!==void 0,Sc=({commentObject:e,node:t})=>{let r=e.lines.filter(a=>!!a||a==="");if(!r.length)return;if(!e.jsdoc){for(let a of r)x.addSyntheticLeadingComment(t,x.SyntaxKind.SingleLineCommentTrivia,` ${a}`,true);return}let n=r.map((a,p)=>{let c=a;return p!==r.length&&(c=`${c}
`),x.factory.createJSDocText(c)}),s=x.factory.createJSDocComment(x.factory.createNodeArray(n),void 0),o=qe({node:s,unescape:true}).replace("/*","").replace("*  */","");x.addSyntheticLeadingComment(t,x.SyntaxKind.MultiLineCommentTrivia,o,true);},ee=({comments:e=[],node:t})=>{let r=!!e.find(s=>typeof s=="object"&&s),n=e;r||(n=[{jsdoc:true,lines:e}]);for(let s of n)Sc({commentObject:s,node:t});};var te=(e,t)=>x.isTypeNode(e)?e:typeof e=="number"?x.factory.createLiteralTypeNode(le.number(e)):xe({typeArguments:t?.map(r=>te(r)),typeName:e}),Os=({expression:e,name:t})=>x.factory.createPropertyAccessChain(e,x.factory.createToken(x.SyntaxKind.QuestionDotToken),t),we=({expression:e,isOptional:t,name:r})=>{let n=typeof e=="string"?R({text:e}):e;if(t&&typeof r!="number")return Os({expression:n,name:r});if(typeof r=="string"){if(Pe.lastIndex=0,!Pe.test(r)){!r.startsWith("'")&&!r.endsWith("'")&&(r=`'${r}'`);let o=R({text:r});return x.factory.createElementAccessExpression(n,o)}let s=R({text:r});return x.factory.createPropertyAccessExpression(n,s)}if(typeof r=="number"){let s=x.factory.createNumericLiteral(r);return x.factory.createElementAccessExpression(n,s)}return x.factory.createPropertyAccessExpression(n,r)},Ss=()=>x.factory.createNull(),$e=({identifiers:e=[],isValueAccess:t,shorthand:r,unescape:n,value:s})=>{if(s===null)return Ss();if(Array.isArray(s))return Ts({elements:s});if(typeof s=="object")return Ur({identifiers:e,obj:s,shorthand:r});if(typeof s=="number")return le.number(s);if(typeof s=="boolean")return le.boolean(s);if(typeof s=="string"){if(t){let o=s.split(".");return we({expression:o[0],name:o[1]})}return le.string(s,n)}},gr=e=>e.map(t=>{if("destructure"in t)return Xt({name:x.factory.createObjectBindingPattern(t.destructure.map(n=>"destructure"in n?void 0:x.factory.createBindingElement(void 0,void 0,R({text:n.name}),void 0)).filter(Boolean)),type:t.type!==void 0?te(t.type):void 0});let r=t.accessLevel?[z({keyword:t.accessLevel})]:[];return t.isReadOnly&&r.push(z({keyword:"readonly"})),Xt({initializer:t.default!==void 0?$e({value:t.default}):void 0,modifiers:r,name:R({text:t.name}),required:t.isRequired!==false,type:t.type!==void 0?te(t.type):void 0})}),bs=({keyword:e})=>{switch(e){case "any":return x.SyntaxKind.AnyKeyword;case "async":return x.SyntaxKind.AsyncKeyword;case "boolean":return x.SyntaxKind.BooleanKeyword;case "export":return x.SyntaxKind.ExportKeyword;case "never":return x.SyntaxKind.NeverKeyword;case "number":return x.SyntaxKind.NumberKeyword;case "private":return x.SyntaxKind.PrivateKeyword;case "protected":return x.SyntaxKind.ProtectedKeyword;case "public":return x.SyntaxKind.PublicKeyword;case "readonly":return x.SyntaxKind.ReadonlyKeyword;case "static":return x.SyntaxKind.StaticKeyword;case "string":return x.SyntaxKind.StringKeyword;case "undefined":return x.SyntaxKind.UndefinedKeyword;case "unknown":return x.SyntaxKind.UnknownKeyword;case "void":return x.SyntaxKind.VoidKeyword;default:throw new Error(`unsupported syntax kind keyword "${e}"`)}},qt=({keyword:e})=>{let t=bs({keyword:e});return x.factory.createKeywordTypeNode(t)},xr=e=>e.map(t=>x.isTypeParameterDeclaration(t)?t:br({constraint:t.extends?typeof t.extends=="string"?qt({keyword:"boolean"}):t.extends:void 0,defaultType:t.default!==void 0?Nt(t.default)?t.default:x.factory.createLiteralTypeNode(t.default?x.factory.createTrue():x.factory.createFalse()):void 0,name:t.name})),Ai=({operator:e,type:t})=>{let r=e==="keyof"?x.SyntaxKind.KeyOfKeyword:e==="readonly"?x.SyntaxKind.ReadonlyKeyword:x.SyntaxKind.UniqueKeyword;return x.factory.createTypeOperatorNode(r,t)},br=({constraint:e,defaultType:t,modifiers:r,name:n})=>x.factory.createTypeParameterDeclaration(r,n,e,t),Qr=({members:e,nameType:t,questionToken:r,readonlyToken:n,type:s,typeParameter:o})=>x.factory.createMappedTypeNode(n,o,t,r,s,e),Pi=({literal:e})=>x.factory.createLiteralTypeNode(e),zr=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:o=[],types:a=[]})=>{let p=x.factory.createArrowFunction(e?[z({keyword:"async"})]:void 0,a?xr(a):void 0,gr(n),s?te(s):void 0,void 0,Array.isArray(o)?be({multiLine:r,statements:o}):o);return ee({comments:t,node:p}),p},ji=({async:e,comment:t,multiLine:r,parameters:n=[],returnType:s,statements:o=[],types:a=[]})=>{let p=x.factory.createFunctionExpression(e?[z({keyword:"async"})]:void 0,void 0,void 0,a?xr(a):void 0,gr(n),s?te(s):void 0,be({multiLine:r,statements:o}));return ee({comments:t,node:p}),p},Ts=({elements:e,multiLine:t=false})=>x.factory.createArrayLiteralExpression(e.map(n=>Nt(n)?n:$e({value:n})).filter(ht),t||!Array.isArray(e[0])&&typeof e[0]=="object"),Ci=({expression:e})=>x.factory.createAwaitExpression(e),Ei=({parameters:e=[],returnType:t,typeParameters:r})=>x.factory.createFunctionTypeNode(r,e,t),Ur=({comments:e,identifiers:t=[],multiLine:r=true,obj:n,shorthand:s,unescape:o=false})=>{let a=Array.isArray(n)?n.map(c=>{let f=false;if("key"in c){let{key:l}=c;f=l===c.value,(l.match(/^[0-9]/)&&l.match(/\D+/g)||l.match(/\W/g)||l==="")&&!l.startsWith("'")&&!l.endsWith("'")&&(c.key=`'${l}'`);}let m;if("spread"in c){let l=Nt(c.spread)?c.spread:R({text:c.spread});m=x.factory.createSpreadAssignment(c.assertion?Sr({expression:l,type:typeof c.assertion=="string"?qt({keyword:c.assertion}):c.assertion}):l);}else if(c.shorthand||s&&f)m=x.factory.createShorthandPropertyAssignment(c.value);else {let l=Nt(c.value)?c.value:Array.isArray(c.value)&&(!c.value.length||typeof c.value[0]=="object")?Ur({multiLine:r,obj:c.value,shorthand:s,unescape:o}):$e({identifiers:t.includes(c.key)?Object.keys(c.value):[],isValueAccess:c.isValueAccess,shorthand:s,unescape:o,value:c.value});if(!l)return;t.includes(c.key)&&!x.isObjectLiteralExpression(l)&&(l=R({text:c.value})),m=Hr({initializer:l,name:c.key});}return ee({comments:c.comments,node:m}),m}).filter(ht):Object.entries(n).map(([c,f])=>{let m=$e({identifiers:t.includes(c)?Object.keys(f):[],shorthand:s,unescape:o,value:f});if(!m)return;t.includes(c)&&!x.isObjectLiteralExpression(m)&&(m=R({text:f}));let l=c===f;return c.match(/^[0-9]/)&&c.match(/\D+/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),c.match(/\W/g)&&!c.startsWith("'")&&!c.endsWith("'")&&(c=`'${c}'`),s&&l?x.factory.createShorthandPropertyAssignment(f):Hr({initializer:m,name:c})}).filter(ht),p=x.factory.createObjectLiteralExpression(a,r);return ee({comments:e,node:p}),p},ki=({comments:e={},leadingComment:t,name:r,obj:n})=>{let s=Array.isArray(n)?n.map(a=>{let p=Rc({initializer:$e({value:a.value}),name:a.key});return ee({comments:a.comments,node:p}),p}):Object.entries(n).map(([a,p])=>{let c=x.factory.createEnumMember(a,$e({unescape:true,value:p}));return ee({comments:e[a],node:c}),c}),o=x.factory.createEnumDeclaration([z({keyword:"export"})],R({text:r}),s);return ee({comments:t,node:o}),o},Rc=({initializer:e,name:t})=>{let r=t;return typeof r=="string"&&(r.includes("'")?r=vt({isSingleQuote:false,text:r}):r=ge(r)),x.factory.createEnumMember(r,e)},Ni=({name:e,statements:t})=>x.factory.createModuleDeclaration([z({keyword:"export"})],R({text:e}),x.factory.createModuleBlock(t),x.NodeFlags.Namespace),vi=({indexType:e,objectType:t})=>x.factory.createIndexedAccessTypeNode(t,e),vt=({isSingleQuote:e,text:t})=>(e===void 0&&(e=!t.includes("'")),x.factory.createStringLiteral(t,e)),qi=({condition:e,whenFalse:t,whenTrue:r})=>x.factory.createConditionalExpression(e,x.factory.createToken(x.SyntaxKind.QuestionToken),r,x.factory.createToken(x.SyntaxKind.ColonToken),t),$i=({text:e})=>x.factory.createTypeOfExpression(R({text:e})),wi=({comment:e,exportType:t,name:r,type:n,typeParameters:s=[]})=>{let o=x.factory.createTypeAliasDeclaration(t?[z({keyword:"export"})]:void 0,R({text:r}),xr(s),te(n));return ee({comments:e,node:o}),o},xe=({typeArguments:e,typeName:t})=>x.factory.createTypeReferenceNode(t,e),Mi=({type:e})=>x.factory.createParenthesizedType(e),Xt=({initializer:e,modifiers:t,name:r,required:n=true,type:s})=>x.factory.createParameterDeclaration(t,void 0,r,n?void 0:x.factory.createToken(x.SyntaxKind.QuestionToken),s,e),Or=({argumentsArray:e,expression:t,typeArguments:r})=>x.factory.createNewExpression(t,r,e),Fi=({awaitModifier:e,expression:t,initializer:r,statement:n})=>x.factory.createForOfStatement(e,r,t,n),Li=({left:e,right:t})=>x.factory.createAssignment(e,t),be=({multiLine:e=true,statements:t})=>x.factory.createBlock(t,e),Hr=({initializer:e,name:t})=>x.factory.createPropertyAssignment(t,e),Di=({flags:e=[],text:t})=>{let r=t.startsWith("/")&&t.endsWith("/")?t:`/${t}/`;return x.factory.createRegularExpressionLiteral(`${r}${e.join("")}`)},Sr=({expression:e,type:t})=>x.factory.createAsExpression(e,t),Vi=({value:e})=>{let t=[],r="";for(let s of e.slice(0).reverse())if(typeof s=="string")r=`${s}${r}`;else {let o=t.length?x.factory.createTemplateMiddle(r):x.factory.createTemplateTail(r),a=x.factory.createTemplateLiteralTypeSpan(s,o);t.push(a),r="";}return x.factory.createTemplateLiteralType(x.factory.createTemplateHead(r),t.reverse())};var _i=({module:e})=>x.factory.createExportDeclaration(void 0,false,void 0,le.string(e)),Me=({functionName:e,parameters:t=[],types:r})=>{let n=typeof e=="string"?R({text:e}):e,s=t.filter(a=>a!==void 0).map(a=>typeof a=="string"?R({text:a}):a);return x.factory.createCallExpression(n,r,s)},Bi=({exports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(c=>typeof c!="object"||!c.asType),s=r.map(c=>{let f=typeof c=="string"?{name:c}:c;return le.export({alias:f.alias,asType:n&&f.asType,name:f.name})}),o=x.factory.createNamedExports(s),a=le.string(t);return x.factory.createExportDeclaration(void 0,!n,o,a)},Ki=({assertion:e,comment:t,destructure:r,exportConst:n,expression:s,name:o,typeName:a})=>{let p=e?Sr({expression:s,type:typeof e=="string"?xe({typeName:e}):e}):s,c=R({text:o}),f=x.factory.createVariableDeclaration(r?x.factory.createObjectBindingPattern([x.factory.createBindingElement(void 0,void 0,c,void 0)]):c,void 0,a?typeof a=="string"?xe({typeName:a}):a:void 0,p),m=x.factory.createVariableStatement(n?[z({keyword:"export"})]:void 0,x.factory.createVariableDeclarationList([f],x.NodeFlags.Const));return ee({comments:t,node:m}),m},Wi=({imports:e,module:t})=>{let r=Array.isArray(e)?e:[e],n=r.some(m=>typeof m!="object"||!m.asType),s,o=[];r.forEach(m=>{let l=typeof m=="string"?{name:m}:m;l.name==="*"&&l.alias?s=l:o.push(le.import({alias:l.alias,asType:n&&l.asType,name:l.name}));});let a=s?x.factory.createNamespaceImport(R({text:s.alias})):x.factory.createNamedImports(o),p=x.factory.createImportClause(!n,void 0,a),c=le.string(t);return x.factory.createImportDeclaration(void 0,p,c)};var Hi=({accessLevel:e,comment:t,multiLine:r=true,parameters:n=[],statements:s=[]})=>{let o=e?[z({keyword:e})]:void 0,a=x.factory.createConstructorDeclaration(o,gr(n),be({multiLine:r,statements:s}));return ee({comments:t,node:a}),a},Qi=({accessLevel:e,comment:t,isStatic:r=false,multiLine:n=true,name:s,parameters:o=[],returnType:a,statements:p=[],types:c=[]})=>{let f=e?[z({keyword:e})]:[];r&&f.push(z({keyword:"static"}));let m=x.factory.createMethodDeclaration(f,void 0,R({text:s}),void 0,c?xr(c):void 0,gr(o),a?te(a):void 0,be({multiLine:n,statements:p}));return ee({comments:t,node:m}),m},zi=({decorator:e,exportClass:t,extendedClasses:r,name:n,nodes:s})=>{let o=[];t&&o.push(z({keyword:"export"})),e&&o.unshift(x.factory.createDecorator(Me({functionName:e.name,parameters:e.args.map(p=>$e({value:p})).filter(ht)})));let a=[];if(r)for(let p of r)a.push(x.factory.createHeritageClause(x.SyntaxKind.ExtendsKeyword,[x.factory.createExpressionWithTypeArguments(R({text:p}),void 0)]));return x.factory.createClassDeclaration(o,R({text:n}),void 0,a,s)};var wt=({expression:e})=>x.factory.createExpressionStatement(e);var Xr=({expression:e})=>x.factory.createReturnStatement(e),Xi=({args:e=[],name:t,types:r=[]})=>{let n=r.map(p=>xe({typeName:p})),s=e.map(p=>x.isExpression(p)?p:R({text:p})).filter(ht),o=Me({functionName:t,parameters:s,types:n});return Xr({expression:o})},Gi=({expression:e})=>Xr({expression:typeof e=="string"?R({text:e}):e});var Gt=e=>e.slice(1).reduce((t,r)=>(Pe.lastIndex=0,Pe.test(r)?Os({expression:t,name:r}):x.factory.createElementAccessChain(t,x.factory.createToken(x.SyntaxKind.QuestionDotToken),R({text:r}))),R({text:e[0]})),Gr=e=>e.slice(1).reduce((t,r)=>we({expression:t,name:r}),R({text:e[0]})),Ji=({expressions:e})=>e.reduce((r,n)=>we({expression:r,name:n})),Jr=({left:e,operator:t="=",right:r})=>x.factory.createBinaryExpression(e,t==="="?x.SyntaxKind.EqualsToken:t==="==="?x.SyntaxKind.EqualsEqualsEqualsToken:t==="??"?x.SyntaxKind.QuestionQuestionToken:x.SyntaxKind.InKeyword,typeof r=="string"?R({text:r}):r),Jt=({elseStatement:e,expression:t,thenStatement:r})=>x.factory.createIfStatement(t,r,e),Zi=({path:e})=>{let t=Gt(e),r=Gr(e),n=be({statements:[wt({expression:Jr({left:r,right:Or({argumentsArray:[r],expression:R({text:"Date"})})})})]});return Jt({expression:t,thenStatement:n})},Yi=({path:e,transformerName:t})=>{let r=Gt(e),n=Gr(e),s=be({statements:[wt({expression:Me({functionName:t,parameters:[n]})})]});return [Jt({expression:r,thenStatement:s})]},eo=({path:e,transformerName:t})=>{let r=Gt(e),n=Gr(e);return Jt({expression:Me({functionName:we({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:be({statements:[wt({expression:x.factory.createCallChain(we({expression:n,name:"forEach"}),void 0,void 0,[R({text:t})])})]})})},to=({parameterName:e})=>{let t=R({text:"Date"});return Or({argumentsArray:[R({text:e})],expression:t})},ro=({path:e,transformExpression:t})=>{let r=Gt(e),n=Gr(e);return Jt({expression:Me({functionName:we({expression:"Array",name:"isArray"}),parameters:[r]}),thenStatement:be({statements:[wt({expression:Jr({left:n,right:x.factory.createCallChain(we({expression:n,name:"map"}),void 0,void 0,[zr({parameters:[{name:"item"}],statements:t})])})})]})})};var Nc=xe({typeName:"null"}),Zt=({isNullable:e,node:t})=>e?x.factory.createUnionTypeNode([t,Nc]):t,Rs=({indexKey:e,indexProperty:t,isNullable:r,properties:n,useLegacyResolution:s})=>{let a=n.map(f=>{let m=f.isReadOnly?[z({keyword:"readonly"})]:void 0,l=f.isRequired!==false?void 0:x.factory.createToken(x.SyntaxKind.QuestionToken),u=te(f.type);let d=x.factory.createPropertySignature(m,s||typeof f.name=="string"&&f.name.match(Pe)||typeof f.name!="string"&&x.isPropertyName(f.name)?f.name:vt({text:f.name}),l,u);return ee({comments:f.comment,node:d}),d}),p=false;if(t)if(!n.length&&e){let f=Qr({questionToken:x.factory.createToken(x.SyntaxKind.QuestionToken),type:qt({keyword:"string"}),typeParameter:br({constraint:xe({typeName:e}),name:R({text:String(t.name)})})});a.push(f),p=true;}else {let f=t.isReadOnly?[z({keyword:"readonly"})]:void 0,m=x.factory.createIndexSignature(f,[Xt({name:R({text:String(t.name)}),type:qt({keyword:"string"})})],te(t.type));a.push(m);}let c=p?a[0]:x.factory.createTypeLiteralNode(a);return Zt({isNullable:r,node:c})},Tr=({isNullable:e,types:t})=>{let r=t.map(s=>te(s)),n=x.factory.createUnionTypeNode(r);return Zt({isNullable:e,node:n})},no=({isNullable:e,types:t})=>{let r=t.map(s=>te(s)),n=x.factory.createIntersectionTypeNode(r);return Zt({isNullable:e,node:n})},so=({isNullable:e=false,types:t})=>{let r=t.map(s=>te(s)),n=x.factory.createTupleTypeNode(r);return Zt({isNullable:e,node:n})},io=(e,t,r=false,n=true)=>{let s=Tr({types:e}),o=Tr({types:t}),a=Rs({properties:[{name:`[key: ${qe({node:s,unescape:true})}]`,type:o}],useLegacyResolution:n});return Zt({isNullable:r,node:a})},oo=(e,t=false)=>{let r=xe({typeArguments:[Array.isArray(e)?Tr({types:e}):e],typeName:"Array"});return Zt({isNullable:t,node:r})};var i={anonymousFunction:ji,arrayLiteralExpression:Ts,arrowFunction:zr,asExpression:Sr,assignment:Li,awaitExpression:Ci,binaryExpression:Jr,block:be,callExpression:Me,classDeclaration:zi,conditionalExpression:qi,constVariable:Ki,constructorDeclaration:Hi,enumDeclaration:ki,exportAllDeclaration:_i,exportNamedDeclaration:Bi,expressionToStatement:wt,forOfStatement:Fi,functionTypeNode:Ei,identifier:R,ifStatement:Jt,indexedAccessTypeNode:vi,isTsNode:Nt,keywordTypeNode:qt,literalTypeNode:Pi,mappedTypeNode:Qr,methodDeclaration:Qi,namedImportDeclarations:Wi,namespaceDeclaration:Ni,newExpression:Or,nodeToString:qe,null:Ss,objectExpression:Ur,ots:le,parameterDeclaration:Xt,propertyAccessExpression:we,propertyAccessExpressions:Ji,propertyAssignment:Hr,propertyDeclaration:Ii,regularExpressionLiteral:Di,returnFunctionCall:Xi,returnStatement:Xr,returnVariable:Gi,safeAccessExpression:Gt,stringLiteral:vt,stringToTsNodes:Ti,templateLiteralType:Vi,this:Ri,transformArrayMap:ro,transformArrayMutation:eo,transformDateMutation:Zi,transformFunctionMutation:Yi,transformNewDate:to,typeAliasDeclaration:wi,typeArrayNode:oo,typeInterfaceNode:Rs,typeIntersectionNode:no,typeNode:te,typeOfExpression:$i,typeOperatorNode:Ai,typeParameterDeclaration:br,typeParenthesizedNode:Mi,typeRecordNode:io,typeReferenceNode:xe,typeTupleNode:so,typeUnionNode:Tr,valueToExpression:$e};var qc=[oe,xi,hi,gi,yi],Zr=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");if(zt.lastIndex=0,zt.test(t))return `_${t}`;for(let r of qc){if(t.startsWith("_"))return t;t=t.replace(r,"_$1");}return t};var ao=/[\p{Lu}]/u,Is=/[\p{Ll}]/u,co=/([\p{Alpha}\p{N}_]|$)/u,Yt=/[_.\- `\\[\]{}\\/]+/,$c=new RegExp(`^${Yt.source}`),As=new RegExp(`${Yt.source}${co.source}`,"gu"),po=new RegExp(`\\d+${co.source}`,"gu"),wc=({case:e,string:t})=>{let r=false,n=false,s=false,o=false,a=e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?"_":"-";for(let p=0;p<t.length;p++){let c=t[p];o=p>2?t[p-3]===a:true;let f=p+1,m=t[f];for(Yt.lastIndex=0;m&&Yt.test(m);)f+=1,m=t[f];let l=f!==p+1;if(Is.lastIndex=0,ao.lastIndex=0,ao.test(c)&&(r||m&&!l&&m!=="s"&&Is.test(m)))t=`${t.slice(0,p)}${a}${t.slice(p)}`,p++,s=n,r=false,n=true;else if(n&&s&&Is.test(c)&&!o&&!(c==="s"&&(!m||m.toLocaleLowerCase()!==m)))t=`${t.slice(0,p-1)}${a}${t.slice(p-1)}`,s=n,r=true,n=false;else {let u=c.toLocaleLowerCase(),d=c.toLocaleUpperCase();s=n,r=u===c&&d!==c,n=d===c&&u!==c;}}return t},j=({case:e,stripLeadingSeparators:t=true,value:r})=>{let n=r.trim();return n.length?!e||e==="preserve"?n:n.length===1?(Yt.lastIndex=0,Yt.test(n)?"":e==="PascalCase"||e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase()):(n!==n.toLocaleLowerCase()&&(n=wc({case:e,string:n})),(t||n[0]!==r[0])&&(n=n.replace($c,"")),n=e==="SCREAMING_SNAKE_CASE"?n.toLocaleUpperCase():n.toLocaleLowerCase(),e==="PascalCase"&&(n=`${n.charAt(0).toLocaleUpperCase()}${n.slice(1)}`),e==="snake_case"||e==="SCREAMING_SNAKE_CASE"?(n=n.replaceAll(As,(o,a,p)=>p===0&&!t?o:`_${a}`),n[n.length-1]==="_"&&(n=n.slice(0,n.length-1))):(As.lastIndex=0,po.lastIndex=0,n=n.replaceAll(po,(o,a,p)=>["_","-","."].includes(n.charAt(p+o.length))?o:o.toLocaleUpperCase()),n=n.replaceAll(As,(o,a,p)=>p===0&&!t&&o[0]&&r.startsWith(o[0])?o:a.toLocaleUpperCase())),n):""};var Fe=class{_exportFromIndex;_headers=[];_id;_identifierCase;_imports=new Map;_items=[];_name;_path;identifiers={};constructor({dir:t,exportFromIndex:r=false,header:n=true,id:s,identifierCase:o,name:a}){this._exportFromIndex=r,this._id=s,this._identifierCase=o,this._name=this._setName(a),this._path=Q.resolve(t,this._name),n&&this._headers.push("// This file is auto-generated by @hey-api/openapi-ts");}add(...t){this._items=this._items.concat(t);}blockIdentifier({$ref:t,namespace:r}){let{name:n,ref:s}=fo(t),o=this.identifiers[n.toLocaleLowerCase()]?.[r]?.[s];if(!o)throw new Error(`Identifier for $ref ${t} in namespace ${r} not found`);return o.name=false,{created:false,name:o.name}}get exportFromIndex(){return this._exportFromIndex}get id(){return this._id}identifier(t){return js({case:t.case??this._identifierCase,identifiers:this.identifiers,...t})}import({module:t,...r}){let n=this._imports.get(t);n||(n=new Map,this._imports.set(t,n));let s=n.get(r.name);return s?{...s,name:s.alias||s.name}:(n.set(r.name,r),{...r,name:r.alias||r.name})}isEmpty(){return !this._items.length}nameWithoutExtension(){let{name:t}=Ps(this._name);return t}relativePathToFile({context:t,id:r}){let n="";if(r.startsWith(".")){let f=[];if(t.config.configFile){let m=t.config.configFile.split("/");f=m.slice(0,m.length-1);}n=Q.resolve(process.cwd(),...f,r);}else {let f=t.file({id:r});if(!f)throw new Error(`File with id ${r} does not exist`);n=f._path;}let s=this._path.split(Q.sep),o=n.split(Q.sep),a=-1,p="";for(let f of s)if(a+=1,o[a]!==f){let m=Array.from({length:s.length-a}).fill(""),l=o.slice(a),u=l.slice(0,l.length-1);u.length&&u.push(""),p=(m.join("../")||"./")+u.join("/");break}let c=o[o.length-1];return `${p}${Ps(c).name}`}remove(t){At.rmSync(this._path,t);}removeNode(){this._items=this._items.slice(0,this._items.length-1);}_setName(t){if(t.includes("index"))return t;let{extension:r,name:n}=Ps(t);return [n,"gen",r].filter(Boolean).join(".")}_toString(t,r){let n=[];this._headers.length&&n.push(this._headers.join(`
`));let s=r?.options.moduleResolution===x.ModuleResolutionKind.NodeNext,o=[];for(let[a,p]of this._imports.entries()){let c=Array.from(p.values()),f=a;s&&(f.startsWith("./")||f.startsWith("../"))&&(f==="./client"?f="./client/index.js":f=`${f}.js`);let m=i.namedImportDeclarations({imports:c,module:f});o.push(qe({node:m}));}return o.length&&n.push(o.join(`
`)),n=n.concat(this._items.map(a=>typeof a=="string"?a:qe({node:a,unescape:true}))),n.join(t)}write(t=`
`,r=null){if(this.isEmpty()){this.remove({force:true});return}let n=this._path;if(typeof this._path=="string"){let s=this._path.split(Q.sep);n=s.slice(0,s.length-1).join(Q.sep);}rt(n),At.writeFileSync(this._path,this._toString(t,r));}},fo=e=>{let t=e,r=[],n=t.split("/"),s=n[n.length-1]||"",o=n.indexOf("properties");if(o!==-1)for(t=n.slice(0,o).join("/"),s=n[o-1]||"";o+1<n.length;){let a=n[o+1];if(!a)throw new Error(`Invalid $ref: ${e}`);r.push(a),o+=2;}return {name:s,properties:r,ref:t}},Fc=(e,t,r)=>{if(typeof t=="function")return t(e);let n=r==="preserve"?"":"-";return t.replace("{{name}}",`${n}${e}${n}`)},js=({$ref:e,case:t,count:r=1,create:n=false,identifiers:s,nameTransformer:o,namespace:a})=>{let{name:p,properties:c,ref:f}=fo(e);if(!p)return {created:false,name:""};let m=j({case:t,value:o?Fc(p,o,t):p});r>1&&(m=`${m}${r}`);let l=m.toLocaleLowerCase();s[l]||(s[l]={});let u=s[l];if(a==="enum"&&(u.type||u.value)||a!=="enum"&&u.enum)return js({$ref:f,case:t,count:r+1,create:n,identifiers:s,nameTransformer:o,namespace:a});u[a]||(u[a]={});let d=u[a],y=d[f];if(y){let I=y.name;return c.length&&(I+=c.map(b=>`['${b}']`).join("")),{created:false,name:I}}let h=d[m];return h?h.$ref===f?{created:false,name:h.name}:js({$ref:f,case:t,count:r+1,create:n,identifiers:s,nameTransformer:o,namespace:a}):n?(h={$ref:f,name:Zr(m)},d[m]=h,d[h.$ref]=h,{created:true,name:h.name}):(delete u[a],{created:false,name:""})},Ps=e=>{let t=e.match(/\.[0-9a-z]+$/i),r=t?t[0].slice(1):"",n=e.slice(0,e.length-(r?r.length+1:0));return {extension:r,name:n}};var Yr=class{api;config;context;dependencies=[];handler;name;output;constructor(t){this.api=t.api??{},this.config=t.config,this.context=t.context,this.dependencies=t.dependencies,this.handler=t.handler,this.name=t.name,this.output=t.output;}createFile(t){return this.context.createFile({exportFromIndex:this.config.exportFromIndex,...t})}forEach(...t){let r=t.slice(0,-1),n=t[t.length-1],s=new Set(r.length?r:["operation","parameter","requestBody","schema","server"]);if(s.has("server")&&this.context.ir.servers)for(let o of this.context.ir.servers){let a={server:o,type:"server"};try{n(a);}catch(p){this.forEachError(p,a);}}if(s.has("schema")&&this.context.ir.components?.schemas)for(let o in this.context.ir.components.schemas){let a={$ref:`#/components/schemas/${o}`,name:o,schema:this.context.ir.components.schemas[o],type:"schema"};try{n(a);}catch(p){this.forEachError(p,a);}}if(s.has("parameter")&&this.context.ir.components?.parameters)for(let o in this.context.ir.components.parameters){let a={$ref:`#/components/parameters/${o}`,name:o,parameter:this.context.ir.components.parameters[o],type:"parameter"};try{n(a);}catch(p){this.forEachError(p,a);}}if(s.has("requestBody")&&this.context.ir.components?.requestBodies)for(let o in this.context.ir.components.requestBodies){let a={$ref:`#/components/requestBodies/${o}`,name:o,requestBody:this.context.ir.components.requestBodies[o],type:"requestBody"};try{n(a);}catch(p){this.forEachError(p,a);}}if(s.has("operation")&&this.context.ir.paths)for(let o in this.context.ir.paths){let a=this.context.ir.paths[o];for(let p in a){let c=p,f={method:c,operation:a[c],path:o,type:"operation"};try{n(f);}catch(m){this.forEachError(m,f);}}}}forEachError(t,r){let n=t instanceof Error?t:new Error(String(t));throw new Qt({args:[r],error:n,event:r.type,name:"Error",pluginName:this.name})}getPlugin(t){return this.context.plugins[t]}async run(){await this.handler({plugin:this});}};var tr="#/ir/",en=e=>{let t=Cs(e);return t.length===3&&t[0]==="components"},G=e=>{let t=Cs(e),r=t[t.length-1];return decodeURI(r)},Cs=e=>e.replace(/^#\//,"").split("/"),Es=({$ref:e,spec:t})=>{let r=Cs(decodeURI(e)),n=t;for(let s of r){let o=s;if(n[o]===void 0)throw new Error(`Reference not found: ${e}`);n=n[o];}return n};var tn=class{config;files={};ir={};plugins={};spec;constructor({config:t,spec:r}){this.config=t,this.spec=r;}createFile(t){let r=t.path.split("/"),n=Q.resolve(this.config.output.path,...r.slice(0,r.length-1)),s=new Fe({dir:n,exportFromIndex:t.exportFromIndex,id:t.id,identifierCase:t.identifierCase,name:`${r[r.length-1]}.ts`});return this.files[t.id]=s,s}dereference(t){let r=this.resolveRef(t.$ref),n={...t,...r};return delete n.$ref,n}file({id:t}){return this.files[t]}registerPlugin(t){let r=this.config.plugins[t],n=new Yr({api:r.api,config:r.config,context:this,dependencies:r.dependencies??[],handler:r.handler,name:r.name,output:r.output});return this.plugins[n.name]=n,n}registerPlugins(){return this.config.pluginOrder.map(t=>this.registerPlugin(t))}resolveIrRef(t){return Es({$ref:t,spec:this.ir})}resolveRef(t){return Es({$ref:t,spec:this.spec})}};var rn=({context:e,parameter:t})=>{if(!t.pagination)return;if(t.pagination===true)return t.schema;let r=t.schema;return r.$ref&&(r=e.resolveIrRef(r.$ref)),r.properties[t.pagination]},gt=e=>{for(let t in e)if(e[t].required)return  true;return  false},lo=e=>e?!!(gt(e.cookie)||gt(e.header)||gt(e.path)||gt(e.query)):false,ks=({context:e,parameters:t})=>{if(t){for(let r in t.cookie){let n=t.cookie[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:rn({context:e,parameter:n})}}for(let r in t.header){let n=t.header[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:rn({context:e,parameter:n})}}for(let r in t.path){let n=t.path[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:rn({context:e,parameter:n})}}for(let r in t.query){let n=t.query[r];if(n.pagination)return {in:n.location,name:n.pagination===true?r:`${r}.${n.pagination}`,schema:rn({context:e,parameter:n})}}}};var ue=({detectFormat:e=true,schema:t})=>{if(!t.items)return t;let r=[],n=[];for(let o of t.items){if(!o.type&&o.items||t.type==="tuple"){r.push(o);continue}if(!o.type||o.type==="boolean"||o.type==="integer"||o.type==="null"||o.type==="number"||o.type==="string"||o.type==="unknown"||o.type==="void"){let a=o.const!==void 0?`const-${o.const}`:"",p=o.format!==void 0&&e?`format-${o.format}`:"",c=`${o.$ref??""}${o.type??""}${a}${p}`;n.includes(c)||(n.push(c),r.push(o));continue}r.push(o);}let s={...t};if(s.items=r,s.items.length<=1&&s.type!=="array"&&s.type!=="enum"&&s.type!=="tuple"){let o=s.items[0];delete s.logicalOperator,delete s.items,s={...s,...o};}return s.type==="unknown"?{}:s};var T=(e,t)=>{if(!e?.length)return t?.length?t:void 0;if(!t?.length)return e;let r=new Set(e);for(let n of t)r.add(n);return r.size>e.length?Array.from(r):e};var Ns=({items:e,schema:t})=>{for(let r of e)t.accessScopes=T(t.accessScopes,r.accessScopes);t.items=e;},D=({items:e,logicalOperator:t="or",mutateSchemaOneItem:r=false,schema:n})=>e.length?n.type==="tuple"?(Ns({items:e,schema:n}),n):e.length!==1?(Ns({items:e,schema:n}),n.logicalOperator=t,n):r?(n={...n,...e[0]},n):(Ns({items:e,schema:n}),n):n;var nn=e=>!!(lo(e.parameters)||e.body?.required),v=({method:e,path:t})=>`${e.toUpperCase()} ${t}`,uo=({context:e,operation:t})=>{let r=t.body;if(!r||!r.pagination)return ks({context:e,parameters:t.parameters});if(r.pagination===true)return {in:"body",name:"body",schema:r.schema};let n=r.schema,s=n.$ref?e.resolveIrRef(n.$ref):n,a=("schema"in s?s.schema:s)?.properties?.[r.pagination];return a?{in:"body",name:r.pagination,schema:a}:ks({context:e,parameters:t.parameters})},vs=({statusCode:e})=>{switch(e){case "1XX":return "1XX";case "2XX":return "2XX";case "3XX":return "3XX";case "4XX":return "4XX";case "5XX":return "5XX";case "default":return "default";default:return `${e[0]}XX`}},Le=e=>{let t={};if(!e.responses)return t;let r={properties:{},type:"object"},n={properties:{},type:"object"},s;for(let p in e.responses){let c=e.responses[p];switch(vs({statusCode:p})){case "1XX":case "3XX":break;case "2XX":n.properties[p]=c.schema;break;case "4XX":case "5XX":r.properties[p]=c.schema;break;case "default":s=c;break}}if(s){let p=false;Object.keys(n.properties).length||(n.properties.default=s.schema,p=true);let c=(s.schema.description??"").toLocaleLowerCase(),f=(s.schema.$ref??"").toLocaleLowerCase();["success"].some(u=>c.includes(u)||f.includes(u))&&(n.properties.default=s.schema,p=true),["error","problem"].some(u=>c.includes(u)||f.includes(u))&&(r.properties.default=s.schema,p=true),p||(r.properties.default=s.schema);}let o=Object.keys(r.properties);if(o.length){r.required=o,t.errors=r;let p=D({items:Object.values(r.properties),mutateSchemaOneItem:true,schema:{}});p=ue({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.error=p);}let a=Object.keys(n.properties);if(a.length){n.required=a,t.responses=n;let p=D({items:Object.values(n.properties),mutateSchemaOneItem:true,schema:{}});p=ue({schema:p}),Object.keys(p).length&&p.type!=="unknown"&&(t.response=p);}return t};var rr=e=>{switch(e){case "parameters":return "parameter";case "requestBodies":return "body";case "responses":return "response";case "definitions":case "schemas":return "schema";default:return "unknown"}},yo="/",O=(e,t="")=>`${e}${yo}${t}`,U=e=>{let t=e.indexOf(yo);return {name:e.slice(t+1),namespace:e.slice(0,t)}};var Ce=e=>{let t=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_");return zt.lastIndex=0,zt.test(t)?`_${t}`:t},nt=e=>e.replace(/^[^\p{ID_Start}]+/u,"").replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"-").replace(/[$+]/g,"-"),qs=e=>{let t=e.replace("[]","Array");return nt(t)};var ie=["delete","get","head","options","patch","post","put","trace"],Mt=({context:e,count:t=1,id:r,method:n,path:s,state:o})=>{let a;if(r&&(!e.config.plugins["@hey-api/sdk"]||e.config.plugins["@hey-api/sdk"].config.operationId))a=j({case:"camelCase",value:nt(r)});else {let p=s.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-");a=j({case:"camelCase",value:`${n}-${p}`});}return t>1&&(a=`${a}${t}`),o.ids.has(a)?Mt({context:e,count:t+1,id:r,method:n,path:s,state:o}):(o.ids.set(a,v({method:n,path:s})),a)};var De=(e,t)=>{let r=[],n=[];if(t)for(let s of t)s.startsWith("/")&&s.endsWith("/")?n.push(new RegExp(s.slice(1,s.length-1))):r.push(O(e,s));return {regexps:n,set:new Set(r)}},Dc=({excludeOperations:e,excludeSchemas:t,includeOperations:r,includeSchemas:n,spec:s})=>{if((e.regexps.length||r.regexps.length)&&s.paths)for(let o of Object.entries(s.paths)){let a=o[0],p=o[1];for(let c of ie){if(!p[c])continue;let m=v({method:c,path:a});e.regexps.some(l=>l.test(m))&&e.set.add(O("operation",m)),r.regexps.some(l=>l.test(m))&&r.set.add(O("operation",m));}}if(s.definitions&&(t.regexps.length||n.regexps.length))for(let o of Object.keys(s.definitions))t.regexps.some(a=>a.test(o))&&t.set.add(O("schema",o)),n.regexps.some(a=>a.test(o))&&n.set.add(O("schema",o));},Vc=({excludeOperations:e,excludeParameters:t,excludeRequestBodies:r,excludeResponses:n,excludeSchemas:s,includeOperations:o,includeParameters:a,includeRequestBodies:p,includeResponses:c,includeSchemas:f,spec:m})=>{if((e.regexps.length||o.regexps.length)&&m.paths)for(let l of Object.entries(m.paths)){let u=l[0],d=l[1];for(let y of ie){if(!d[y])continue;let I=v({method:y,path:u});e.regexps.some(b=>b.test(I))&&e.set.add(O("operation",I)),o.regexps.some(b=>b.test(I))&&o.set.add(O("operation",I));}}if(m.components){if((t.regexps.length||a.regexps.length)&&m.components.parameters)for(let l of Object.keys(m.components.parameters))t.regexps.some(u=>u.test(l))&&t.set.add(O("parameter",l)),a.regexps.some(u=>u.test(l))&&a.set.add(O("parameter",l));if((r.regexps.length||p.regexps.length)&&m.components.requestBodies)for(let l of Object.keys(m.components.requestBodies))r.regexps.some(u=>u.test(l))&&r.set.add(O("body",l)),p.regexps.some(u=>u.test(l))&&p.set.add(O("body",l));if((n.regexps.length||c.regexps.length)&&m.components.responses)for(let l of Object.keys(m.components.responses))n.regexps.some(u=>u.test(l))&&n.set.add(O("response",l)),c.regexps.some(u=>u.test(l))&&c.set.add(O("response",l));if((s.regexps.length||f.regexps.length)&&m.components.schemas)for(let l of Object.keys(m.components.schemas))s.regexps.some(u=>u.test(l))&&s.set.add(O("schema",l)),f.regexps.some(u=>u.test(l))&&f.set.add(O("schema",l));}},_c=({spec:e,...t})=>{"swagger"in e?Dc({...t,spec:e}):Vc({...t,spec:e});},nr=(e,t)=>{let r=De("operation",e?.operations?.exclude),n=De("operation",e?.operations?.include),s=De("parameter",e?.parameters?.exclude),o=De("parameter",e?.parameters?.include),a=De("body",e?.requestBodies?.exclude),p=De("body",e?.requestBodies?.include),c=De("response",e?.responses?.exclude),f=De("response",e?.responses?.include),m=De("schema",e?.schemas?.exclude),l=De("schema",e?.schemas?.include);return _c({excludeOperations:r,excludeParameters:s,excludeRequestBodies:a,excludeResponses:c,excludeSchemas:m,includeOperations:n,includeParameters:o,includeRequestBodies:p,includeResponses:f,includeSchemas:l,spec:t}),{deprecated:e?.deprecated??true,operations:{exclude:r.set,include:n.set},orphans:e?.orphans??false,parameters:{exclude:s.set,include:o.set},preserveOrder:e?.preserveOrder??false,requestBodies:{exclude:a.set,include:p.set},responses:{exclude:c.set,include:f.set},schemas:{exclude:m.set,include:l.set},tags:{exclude:new Set(e?.tags?.exclude),include:new Set(e?.tags?.include)}}},sr=e=>e?e.orphans===false||e.deprecated===false?true:!!(e.operations?.exclude?.length||e.operations?.include?.length||e.parameters?.exclude?.length||e.parameters?.include?.length||e.requestBodies?.exclude?.length||e.requestBodies?.include?.length||e.responses?.exclude?.length||e.responses?.include?.length||e.schemas?.exclude?.length||e.schemas?.include?.length||e.tags?.exclude?.length||e.tags?.include?.length):false,Bc=({filters:e,graph:t,parameters:r,requestBodies:n,responses:s,schemas:o})=>{let a=new Set,c=[...e.operations.include.size?e.operations.include:new Set(t.operations.keys())];for(;c.length;){let f=c.pop();if(e.operations.exclude.has(f)||a.has(f))continue;let m=t.operations.get(f);m&&(!e.deprecated&&m.deprecated||e.tags.exclude.size&&m.tags.size&&[...e.tags.exclude].some(l=>m.tags.has(l))||e.tags.include.size&&!new Set([...e.tags.include].filter(l=>m.tags.has(l))).size||[...m.dependencies].some(l=>{let{namespace:u}=U(l);switch(u){case "body":return !n.has(l);case "parameter":return !r.has(l);case "response":return !s.has(l);case "schema":return !o.has(l);default:return  false}})||a.add(f));}return {operations:a}},Kc=({filters:e,graph:t,schemas:r})=>{let n=new Set,o=[...e.parameters.include.size?e.parameters.include:new Set(t.parameters.keys())];for(;o.length;){let a=o.pop();if(e.parameters.exclude.has(a)||n.has(a))continue;let p=t.parameters.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:f}=U(c);switch(f){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||o.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {parameters:n}},Wc=({filters:e,graph:t,schemas:r})=>{let n=new Set,o=[...e.requestBodies.include.size?e.requestBodies.include:new Set(t.requestBodies.keys())];for(;o.length;){let a=o.pop();if(e.requestBodies.exclude.has(a)||n.has(a))continue;let p=t.requestBodies.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:f}=U(c);switch(f){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||o.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {requestBodies:n}},Hc=({filters:e,graph:t,schemas:r})=>{let n=new Set,o=[...e.responses.include.size?e.responses.include:new Set(t.responses.keys())];for(;o.length;){let a=o.pop();if(e.responses.exclude.has(a)||n.has(a))continue;let p=t.responses.get(a);if(p&&!(!e.deprecated&&p.deprecated)&&(n.add(a),!!p.dependencies.size))for(let c of p.dependencies){let{namespace:f}=U(c);switch(f){case "body":{e.requestBodies.exclude.has(c)?n.delete(a):n.has(c)||o.push(c);break}case "schema":{e.schemas.exclude.has(c)?n.delete(a):r.has(c)||r.add(c);break}}}}return {responses:n}},Qc=({filters:e,graph:t})=>{let r=new Set,s=[...e.schemas.include.size?e.schemas.include:new Set(t.schemas.keys())];for(;s.length;){let o=s.pop();if(e.schemas.exclude.has(o)||r.has(o))continue;let a=t.schemas.get(o);if(a&&!(!e.deprecated&&a.deprecated)&&(r.add(o),!!a.dependencies.size))for(let p of a.dependencies){let{namespace:c}=U(p);switch(c){case "schema":{!r.has(p)&&!e.schemas.exclude.has(p)&&s.push(p);break}}}}return {schemas:r}},zc=({filters:e,graph:t,parameters:r})=>{if(e.parameters.exclude.size)for(let n of r){let s=t.parameters.get(n);if(s?.dependencies.size){for(let o of e.parameters.exclude)if(s.dependencies.has(o)){r.delete(n);break}}}},Uc=({filters:e,graph:t,requestBodies:r})=>{if(e.requestBodies.exclude.size)for(let n of r){let s=t.requestBodies.get(n);if(s?.dependencies.size){for(let o of e.requestBodies.exclude)if(s.dependencies.has(o)){r.delete(n);break}}}},Xc=({filters:e,graph:t,responses:r})=>{if(e.responses.exclude.size)for(let n of r){let s=t.responses.get(n);if(s?.dependencies.size){for(let o of e.responses.exclude)if(s.dependencies.has(o)){r.delete(n);break}}}},Gc=({filters:e,graph:t,schemas:r})=>{if(e.schemas.exclude.size)for(let n of r){let s=t.schemas.get(n);if(s?.dependencies.size){for(let o of e.schemas.exclude)if(s.dependencies.has(o)){r.delete(n);break}}}},Jc=({operationDependencies:e,parameters:t,requestBodies:r,responses:n,schemas:s})=>{for(let o of s)e.has(o)||s.delete(o);for(let o of t)e.has(o)||t.delete(o);for(let o of r)e.has(o)||r.delete(o);for(let o of n)e.has(o)||n.delete(o);},Zc=({graph:e,operations:t})=>{let r=new Set,s=[...new Set([...t].flatMap(o=>[...e.operations.get(o)?.dependencies??[]]))];for(;s.length;){let o=s.pop();if(r.has(o))continue;r.add(o);let{namespace:a}=U(o),p;if(a==="body"?p=e.requestBodies.get(o)?.dependencies:a==="operation"?p=e.operations.get(o)?.dependencies:a==="parameter"?p=e.parameters.get(o)?.dependencies:a==="response"?p=e.responses.get(o)?.dependencies:a==="schema"&&(p=e.schemas.get(o)?.dependencies),!!p?.size)for(let c of p)r.has(c)||s.push(c);}return {operationDependencies:r}},ir=({filters:e,graph:t})=>{let{schemas:r}=Qc({filters:e,graph:t}),{parameters:n}=Kc({filters:e,graph:t,schemas:r}),{requestBodies:s}=Wc({filters:e,graph:t,schemas:r}),{responses:o}=Hc({filters:e,graph:t,schemas:r});Gc({filters:e,graph:t,schemas:r}),zc({filters:e,graph:t,parameters:n}),Uc({filters:e,graph:t,requestBodies:s}),Xc({filters:e,graph:t,responses:o});let{operations:a}=Bc({filters:e,graph:t,parameters:n,requestBodies:s,responses:o,schemas:r});if(!e.orphans&&a.size){let{operationDependencies:p}=Zc({graph:t,operations:a});Jc({operationDependencies:p,parameters:n,requestBodies:s,responses:o,schemas:r});}return {operations:a,parameters:n,requestBodies:s,responses:o,schemas:r}};var q=({source:e,target:t})=>{let r={...t};if(e&&(e.cookie&&(r.cookie?r.cookie={...r.cookie,...e.cookie}:r.cookie=e.cookie),e.header&&(r.header?r.header={...r.header,...e.header}:r.header=e.header),e.path&&(r.path?r.path={...r.path,...e.path}:r.path=e.path),e.query&&(r.query?r.query={...r.query,...e.query}:r.query=e.query)),!!Object.keys(r).length)return r};var Yc=e=>/^[A-Za-z_$][A-Za-z0-9_$]*$/.test(e),em=e=>e.map((t,r)=>typeof t=="number"?`[${t}]`:r===0?t:Yc(t)?`.${t}`:`['${t.replace(/"/g,"\\'")}']`).join(""),tm=e=>{let t=em(e.path),r=e.severity==="error"?yt.bold.red:yt.bold.yellow,n=e.message.replace(/`([^`]+)`/g,(s,o)=>yt.yellow(`\`${o}\``));return `${r(`[${e.severity.toUpperCase()}]`)} ${yt.cyan(t)}: ${n}`},rm=({context:e,issue:t})=>e.config.logs.level==="silent"?false:t.severity==="error"?e.config.logs.level!=="warn":true,or=({context:e,result:t})=>{if(e.config.input.validate_EXPERIMENTAL){for(let r of t.issues)rm({context:e,issue:r})&&console.log(tm(r));t.valid||process.exit(1);}};var ho=({operations:e,preserveOrder:t,schemas:r,spec:n})=>{if(n.definitions){let s={};if(t)for(let[o,a]of Object.entries(n.definitions))r.has(O("schema",o))&&(s[o]=a);else for(let o of r){let{name:a}=U(o),p=n.definitions[a];p&&(s[a]=p);}n.definitions=s;}if(n.paths)for(let s of Object.entries(n.paths)){let o=s[0],a=s[1];for(let p of ie){if(!a[p])continue;let f=O("operation",v({method:p,path:o}));e.has(f)||delete a[p];}Object.keys(a).length||delete n.paths[o];}};var xt=(e,t)=>{if("$ref"in e){if(e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],s=r[r.length-1];if(n&&s){let o=rr(n);o==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(O(o,s));}}return}if("in"in e){e.in==="body"&&xt(e.schema,t);return}if(e.items&&typeof e.items=="object"&&xt(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&xt(r,t);if(e.allOf)for(let r of e.allOf)xt(r,t);},go=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],s=new Map;if(e.definitions)for(let[o,a]of Object.entries(e.definitions)){let p=new Set;xt(a,p),r.schemas.set(O("schema",o),{dependencies:p,deprecated:false});}if(e.parameters,e.paths)for(let o of Object.entries(e.paths)){let a=o[0],p=o[1];for(let c of ie){if(c==="trace")continue;let f=p[c];if(!f)continue;let m=v({method:c,path:a});t&&f.operationId&&(s.has(f.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:f.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):s.set(f.operationId,m));let l=new Set;if(f.responses)for(let u of Object.values(f.responses))u&&("$ref"in u?xt(u,l):u.schema&&xt(u.schema,l));if(f.parameters)for(let u of f.parameters)xt(u,l);r.operations.set(O("operation",m),{dependencies:l,deprecated:!!f.deprecated,tags:new Set(f.tags)});}}return {graph:r,issues:n,valid:!n.some(o=>o.severity==="error")}};var xo=/^(application\/(pdf|rtf|msword|vnd\.(ms-|openxmlformats-officedocument\.)|zip|x-(7z|tar|rar|zip|iso)|octet-stream|gzip|x-msdownload|json\+download|xml|x-yaml|x-7z-compressed|x-tar)|text\/(yaml|css|javascript)|audio\/(mpeg|wav)|video\/(mp4|x-matroska)|image\/(vnd\.adobe\.photoshop|svg\+xml))(; ?charset=[^;]+)?$/i,bo=/^application\/(.*\+)?json(;.*)?$/i,Oo=/^multipart\/form-data(;.*)?$/i,So=/^text\/[a-z0-9.+-]+(;.*)?$/i,To=/^application\/x-www-form-urlencoded(;.*)?$/i,Ro=/^application\/octet-stream(;.*)?$/i,st=({mediaType:e})=>(xo.lastIndex=0,xo.test(e)),ar=({mediaType:e})=>{if(bo.lastIndex=0,bo.test(e))return "json";if(Oo.lastIndex=0,Oo.test(e))return "form-data";if(So.lastIndex=0,So.test(e))return "text";if(To.lastIndex=0,To.test(e))return "url-search-params";if(Ro.lastIndex=0,Ro.test(e))return "octet-stream"};var Io=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&st({mediaType:t})?{...r,format:"binary"}:r:st({mediaType:t})?{format:"binary",type:"string"}:void 0},$s=({mimeTypes:e,response:t})=>{let r=[];for(let n of e??[])r.push({mediaType:n,schema:t.schema,type:ar({mediaType:n})});return r};var Ve=(e,t)=>{let r=[];for(let n in t)t[n]===e&&r.push(n);return r.length?r:[G(e)]};var Rr=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},nm=({irSchema:e,schema:t})=>{t.description&&(e.description=t.description),t.title&&(e.title=t.title);},on=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=T(e.accessScopes,["read"])):r.isProperty&&(e.accessScopes=T(e.accessScopes,["both"]));},sm=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let o=Se({context:e,schema:r.items,state:n});if(t.accessScopes=T(t.accessScopes,o.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(o);else if("$ref"in r.items)s.push(o);else {let a=r.items.allOf;a&&a.length>1&&!r.items["x-nullable"]?t={...t,...o}:s.push(o);}}return t=D({items:s,schema:t}),t},im=({irSchema:e={}})=>(e.type="boolean",e),om=({irSchema:e={},schema:t})=>(e.type=t.type,e),am=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let o in r.properties){let a=r.properties[o];if(typeof a!="boolean"){let p=Se({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=T(t.accessScopes,p.accessScopes),s[o]=p;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=Se({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},pm=({irSchema:e={}})=>(e.type="string",e),pr=({schema:e})=>{let t={};return nm({irSchema:t,schema:e}),t},cm=({context:e,schema:t,state:r})=>{let n=pr({schema:t}),s=[],o=Rr({schema:t}),a=t.allOf;for(let p of a){let c=Se({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),p.$ref){let f=e.resolveRef(p.$ref);if(f.discriminator&&r.$ref){let l=Ve(r.$ref).map(d=>({const:d,type:"string"})),u={properties:{[f.discriminator]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};f.required?.includes(f.discriminator)&&(u.required=[f.discriminator]),s.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let m=Se({context:e,schema:f,state:{...r,$ref:p.$ref}});n.accessScopes=T(n.accessScopes,m.accessScopes);}}}if(o==="object"){let p=Ir({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let f of a){let m=f.$ref?e.resolveRef(f.$ref):f;if(Rr({schema:m})==="object"){let l=Ir({context:e,schema:{...m,type:"object"},state:r});if(n.accessScopes=T(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}s.push(p);}}if(n=D({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t["x-nullable"]){let p=[{type:"null"}];s.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},mm=({context:e,schema:t,state:r})=>{let n=pr({schema:t});n.type="enum";let s=[];for(let[o,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t["x-nullable"]&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let f=Ir({context:e,schema:{description:t["x-enum-descriptions"]?.[o],title:t["x-enum-varnames"]?.[o]??t["x-enumNames"]?.[o],type:c==="null"?"string":c},state:r});f.const=a,c==="null"&&(f.type=c),f.type==="array"&&(f.type="tuple"),n.accessScopes=T(n.accessScopes,f.accessScopes),s.push(f);}return n=D({items:s,schema:n}),n},fm=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),n.$ref=n.$ref.replace(/#\/definitions\/([^/]+)/g,"#/components/schemas/$1"),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),o=Se({context:e,schema:s,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=T(n.accessScopes,o.accessScopes);}return n},lm=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=pr({schema:r}));let s={};on({irSchema:s,schema:r,state:n}),s.default===null&&delete s.default;let o=[Ir({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=D({items:o,schema:t}),t},um=({context:e,schema:t,state:r})=>{let n=pr({schema:t});on({irSchema:n,schema:t,state:r});let s=Rr({schema:t});return s?t["x-nullable"]?lm({context:e,irSchema:n,schema:{...t,type:s},state:r}):Ir({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},Ir=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=pr({schema:r}),on({irSchema:t,schema:r,state:n})),r.type){case "array":return sm({context:e,irSchema:t,schema:r,state:n});case "boolean":return im({irSchema:t});case "integer":case "number":return om({irSchema:t,schema:r});case "object":return am({context:e,irSchema:t,schema:r,state:n});case "string":return pm({irSchema:t});default:return Ao({irSchema:t,schema:r,state:n})}},Ao=({irSchema:e,schema:t,state:r})=>(e||(e=pr({schema:t})),e.type="unknown",on({irSchema:e,schema:t,state:r}),e),Se=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?fm({context:e,schema:t,state:r}):t.enum?mm({context:e,schema:t,state:r}):t.allOf?cm({context:e,schema:t,state:r}):t.type||t.properties?um({context:e,schema:t,state:r}):Ao({schema:t,state:r})),Po=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[G(e)]=Se({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var dm=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",bt=({context:e,name:t,schema:r})=>{if(me(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref??"");if("in"in s&&s.in){let o="schema"in s?s.schema:{...s,in:void 0};return bt({context:e,name:t,schema:o})}return bt({context:e,name:t,schema:s})}if("in"in r){if(!r.in)return  false;let s="schema"in r?r.schema:{...r,in:void 0};return bt({context:e,name:t,schema:s})}for(let s in r.properties)if(me(e.config.input.pagination).test(s)){let a=r.properties[s];if(typeof a!="boolean"&&!("$ref"in a)){let p=Rr({schema:a});if(dm(p))return s}}for(let s of r.allOf??[]){let o=bt({context:e,name:t,schema:s});if(o)return o}return  false};var ym=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},hm=({context:e,method:t,operation:r,path:n,state:s})=>{let o={id:Mt({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return r.operationId&&(o.operationId=r.operationId),ym({irOperation:o,operation:r}),o},gm=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{let a=hm({context:e,method:t,operation:r,path:n,state:o});r.parameters&&(a.parameters=r.parameters);let p=false,c={mediaType:"",schema:{properties:{},required:[],type:"object"}},f=[];for(let m of r.requestBody??[]){let l="$ref"in m?e.resolveRef(m.$ref):m,u=l.in==="body"?l.schema:{...l,format:l.type==="file"?"binary":l.format,required:void 0,type:l.type==="file"?"string":l.type},d=$s({mimeTypes:r.consumes,response:{schema:u}}),y=d.find(h=>h.type==="json")||d[0];if(y){let h=bt({context:e,name:"",schema:y.schema&&"$ref"in y.schema?{allOf:[{...y.schema}],description:l.description}:{description:l.description,...y.schema}}),I=Se({context:e,schema:"$ref"in l?{allOf:[{...l,$ref:l.$ref,required:[],type:"string"}],description:l.description}:y.schema&&"$ref"in y.schema?{allOf:[{...y.schema}],description:l.description}:{description:l.description,...y.schema},state:void 0});c.mediaType=y.mediaType,l.in==="body"?c.schema=I:(c.schema.properties[l.name]=I,l.required&&f.push(l.name)),h&&(c.pagination=h),y.type&&(c.type=y.type);}l.required&&(p=true);}c.mediaType&&(f.length&&(c.schema.required=f),a.body=c,p&&(a.body.required=p));for(let m in r.responses){a.responses||(a.responses={});let l=r.responses[m],u="$ref"in l?e.resolveRef(l.$ref):l,d=$s({mimeTypes:r.produces?r.produces:["application/json"],response:u}),y=d.find(h=>h.type==="json")||d[0];y?a.responses[m]={mediaType:y.mediaType,schema:Se({context:e,schema:{description:u.description,...Io({content:y})},state:void 0})}:a.responses[m]={schema:{description:u.description,type:m==="204"?"void":"unknown"}};}if(r.security){let m=[];for(let l of r.security)for(let u in l){let d=s.get(u);if(!d)continue;let y;if(d.type==="apiKey"&&(y=d),d.type==="basic"&&(y={description:d.description,scheme:"basic",type:"http"}),d.type==="oauth2")switch(y={description:d.description,flows:{},type:"oauth2"},d.flow){case "accessCode":y.flows.authorizationCode={authorizationUrl:d.authorizationUrl,scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "application":y.flows.clientCredentials={scopes:d.scopes,tokenUrl:d.tokenUrl};break;case "implicit":y.flows.implicit={authorizationUrl:d.authorizationUrl,scopes:d.scopes};break;case "password":y.flows.password={scopes:d.scopes,tokenUrl:d.tokenUrl};break}y&&m.push(y);}m.length&&(a.security=m);}return a},Ot=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),e.ir.paths[n][t]=gm({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o});};var xm=e=>{switch(e){case "multi":return  true;case "csv":case "pipes":case "ssv":case "tsv":default:return  false}},bm=e=>{switch(e){case "header":case "path":return "simple";case "query":default:return "form"}},it=({context:e,operation:t,parameters:r})=>{if(!r||!Object.keys(r).length)return;let n={};for(let s of r){let o="$ref"in s?e.dereference(s):s;if(o.in==="body"||o.in==="formData"){t.requestBody||(t.requestBody=[]),t.requestBody.push(o);continue}n[o.in]||(n[o.in]={}),n[o.in][o.name.toLocaleLowerCase()]=Om({context:e,parameter:o});}return n},Om=({context:e,parameter:t})=>{let r=t,n=r&&"$ref"in r?{allOf:[{...r,$ref:r.$ref,required:Array.isArray(r.required)?r.required:[],type:r.type}],description:t.description}:{description:t.description,...r,required:Array.isArray(r.required)?r.required:[],type:r.type},s=bt({context:e,name:t.name,schema:n}),o=bm(t.in),c={allowReserved:false,explode:xm(t.collectionFormat),location:t.in,name:t.name,schema:Se({context:e,schema:n,state:void 0}),style:o};return t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c};var jo=/^(([^:/?#]+):)?((\/\/)?([^:/?#]*)(:?([^/?#]*)))?([^?#]*)(\?([^#]*))?(#(.*))?/,_e=e=>{let t={host:"",path:"",port:"",protocol:""};jo.lastIndex=0;let r=e.match(jo);if(!r)return t;let n=r[5]||"";if(n==="."||n==="..")return t;let s=r[8]||"",o=r[2]||"";return o.length===1?t:{host:n,path:s==="/"?"":s,port:r[7]||"",protocol:o}};var Co=({context:e})=>{let t=e.spec.schemes??[],r=e.spec.host??"",n=e.spec.basePath??"";if(typeof e.config.input.path=="string"){let o=_e(e.config.input.path);t.length||o.protocol&&(t=[o.protocol]),r||(r=`${o.host}${o.port?`:${o.port}`:""}`);}t.length||(t=[""]);let s=t.map(o=>`${o?`${o}://`:""}${r}${n}`).filter(Boolean);s.length&&(e.ir.servers=s.map(o=>({url:o})));};var ws=e=>{let t=sr(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let o=go({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=o.graph,or({context:e,result:o});}if(t&&r){let o=nr(e.config.input.filters,e.spec),a=ir({filters:o,graph:r});ho({...a,preserveOrder:o.preserveOrder,spec:e.spec});}let n={ids:new Map},s=new Map;for(let o in e.spec.securityDefinitions){let a=e.spec.securityDefinitions[o];s.set(o,a);}if(e.spec.definitions)for(let o in e.spec.definitions){let a=`#/definitions/${o}`,p=e.spec.definitions[o];Po({$ref:a,context:e,schema:p});}Co({context:e});for(let o in e.spec.paths){if(o.startsWith("x-"))continue;let a=e.spec.paths[o],p=a.$ref?{...e.resolveRef(a.$ref),...a}:a,c={consumes:e.spec.consumes,produces:e.spec.produces,responses:{},security:e.spec.security},f={context:e,operation:{...c,parameters:it({context:e,operation:c,parameters:p.parameters})},path:o,securitySchemesMap:s,state:n};if(p.delete){let m=q({source:it({context:e,operation:p.delete,parameters:p.delete.parameters}),target:f.operation.parameters});Ot({...f,method:"delete",operation:{...f.operation,...p.delete,parameters:m}});}if(p.get){let m=q({source:it({context:e,operation:p.get,parameters:p.get.parameters}),target:f.operation.parameters});Ot({...f,method:"get",operation:{...f.operation,...p.get,parameters:m}});}if(p.head){let m=q({source:it({context:e,operation:p.head,parameters:p.head.parameters}),target:f.operation.parameters});Ot({...f,method:"head",operation:{...f.operation,...p.head,parameters:m}});}if(p.options){let m=q({source:it({context:e,operation:p.options,parameters:p.options.parameters}),target:f.operation.parameters});Ot({...f,method:"options",operation:{...f.operation,...p.options,parameters:m}});}if(p.patch){let m=q({source:it({context:e,operation:p.patch,parameters:p.patch.parameters}),target:f.operation.parameters});Ot({...f,method:"patch",operation:{...f.operation,...p.patch,parameters:m}});}if(p.post){let m=q({source:it({context:e,operation:p.post,parameters:p.post.parameters}),target:f.operation.parameters});Ot({...f,method:"post",operation:{...f.operation,...p.post,parameters:m}});}if(p.put){let m=q({source:it({context:e,operation:p.put,parameters:p.put.parameters}),target:f.operation.parameters});Ot({...f,method:"put",operation:{...f.operation,...p.put,parameters:m}});}}};var Eo=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:s,schemas:o,spec:a})=>{if(a.components){if(a.components.parameters){let p={};if(r)for(let[c,f]of Object.entries(a.components.parameters))t.has(O("parameter",c))&&(p[c]=f);else for(let c of t){let{name:f}=U(c),m=a.components.parameters[f];m&&(p[f]=m);}a.components.parameters=p;}if(a.components.requestBodies){let p={};if(r)for(let[c,f]of Object.entries(a.components.requestBodies))n.has(O("body",c))&&(p[c]=f);else for(let c of n){let{name:f}=U(c),m=a.components.requestBodies[f];m&&(p[f]=m);}a.components.requestBodies=p;}if(a.components.responses){let p={};if(r)for(let[c,f]of Object.entries(a.components.responses))s.has(O("response",c))&&(p[c]=f);else for(let c of s){let{name:f}=U(c),m=a.components.responses[f];m&&(p[f]=m);}a.components.responses=p;}if(a.components.schemas){let p={};if(r)for(let[c,f]of Object.entries(a.components.schemas))o.has(O("schema",c))&&(p[c]=f);else for(let c of o){let{name:f}=U(c),m=a.components.schemas[f];m&&(p[f]=m);}a.components.schemas=p;}}if(a.paths)for(let p of Object.entries(a.paths)){let c=p[0],f=p[1];for(let m of ie){if(!f[m])continue;let u=O("operation",v({method:m,path:c}));e.has(u)||delete f[m];}Object.keys(f).length||delete a.paths[c];}};var W=(e,t)=>{if("$ref"in e){if(e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],s=r[r.length-1];if(n&&s){let o=rr(n);o==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(O(o,s));}}return}if(e.items&&typeof e.items=="object"&&W(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&W(r,t);if(e.additionalProperties&&typeof e.additionalProperties=="object"&&W(e.additionalProperties,t),e.allOf)for(let r of e.allOf)W(r,t);if(e.anyOf)for(let r of e.anyOf)W(r,t);if(e.not&&W(e.not,t),e.oneOf)for(let r of e.oneOf)W(r,t);},ko=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],s=new Map;if(e.components){if(e.components.schemas)for(let[o,a]of Object.entries(e.components.schemas)){let p=new Set;W(a,p),r.schemas.set(O("schema",o),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.parameters)for(let[o,a]of Object.entries(e.components.parameters)){let p=new Set;if("$ref"in a)W(a,p);else if(a.schema&&W(a.schema,p),a.content)for(let c of Object.values(a.content))c.schema&&W(c.schema,p);r.parameters.set(O("parameter",o),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.requestBodies)for(let[o,a]of Object.entries(e.components.requestBodies)){let p=new Set;if("$ref"in a)W(a,p);else for(let c of Object.values(a.content))c.schema&&W(c.schema,p);r.requestBodies.set(O("body",o),{dependencies:p,deprecated:false});}if(e.components.responses)for(let[o,a]of Object.entries(e.components.responses)){let p=new Set;if("$ref"in a)W(a,p);else if(a.content)for(let c of Object.values(a.content))c.schema&&W(c.schema,p);r.responses.set(O("response",o),{dependencies:p,deprecated:false});}}if(e.paths)for(let o of Object.entries(e.paths)){let a=o[0],p=o[1];for(let c of ie){let f=p[c];if(!f)continue;let m=v({method:c,path:a});t&&f.operationId&&(s.has(f.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:f.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):s.set(f.operationId,m));let l=new Set;if(f.requestBody)if("$ref"in f.requestBody)W(f.requestBody,l);else for(let u of Object.values(f.requestBody.content))u.schema&&W(u.schema,l);if(f.responses){for(let u of Object.values(f.responses))if(u){if("$ref"in u)W(u,l);else if(u.content)for(let d of Object.values(u.content))d.schema&&W(d.schema,l);}}if(f.parameters)for(let u of f.parameters)"$ref"in u?W(u,l):u.schema&&W(u.schema,l);r.operations.set(O("operation",m),{dependencies:l,deprecated:!!f.deprecated,tags:new Set(f.tags)});}}if(t&&e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let o=0;o<e.servers.length;o++){let a=e.servers[o];!a||typeof a!="object"?n.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",o],severity:"error"}):a.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",o],severity:"error"});}}return {graph:r,issues:n,valid:!n.some(o=>o.severity==="error")}};var No=({content:e})=>{let{mediaType:t,schema:r}=e;return r&&"$ref"in r?{allOf:[{...r}]}:r?r.type==="string"&&!r.format&&st({mediaType:t})?{...r,format:"binary"}:r:st({mediaType:t})?{format:"binary",type:"string"}:void 0},ot=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:ar({mediaType:r})});return t};var Ft=({schema:e})=>{if(e.type)return e.type;if(e.properties)return "object"},Sm=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},an=({irSchema:e,schema:t,state:r})=>{t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum?t.maximum!==void 0&&(e.exclusiveMaximum=t.maximum):t.maximum!==void 0&&(e.maximum=t.maximum),t.exclusiveMinimum?t.minimum!==void 0&&(e.exclusiveMinimum=t.minimum):t.minimum!==void 0&&(e.minimum=t.minimum),t.format&&(e.format=t.format),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=T(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=T(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=T(e.accessScopes,["both"]));},Tm=({context:e,irSchema:t={},schema:r,state:n})=>{r.maxItems&&r.maxItems===r.minItems?t.type="tuple":t.type="array";let s=[];if(r.items){let o=re({context:e,schema:r.items,state:n});if(t.accessScopes=T(t.accessScopes,o.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(o);else if("$ref"in r.items)s.push(o);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!r.items.nullable?t={...t,...o}:s.push(o);}}return t=D({items:s,schema:t}),t},Rm=({irSchema:e={}})=>(e.type="boolean",e),Im=({irSchema:e={},schema:t})=>(e.type=t.type,e),Am=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let o in r.properties){let a=r.properties[o];if(typeof a!="boolean"){let p=re({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=T(t.accessScopes,p.accessScopes),s[o]=p;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=re({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.required&&(t.required=r.required),t},Pm=({irSchema:e={}})=>(e.type="string",e),St=({schema:e})=>{let t={};return Sm({irSchema:t,schema:e}),t},jm=({context:e,schema:t,state:r})=>{let n=St({schema:t}),s=[],o=Ft({schema:t}),a=t.allOf;for(let p of a){let c=re({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),"$ref"in p){let f=e.resolveRef(p.$ref);if(f.discriminator&&r.$ref){let l=Ve(r.$ref,f.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[f.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};f.required?.includes(f.discriminator.propertyName)&&(u.required=[f.discriminator.propertyName]),s.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let m=re({context:e,schema:f,state:{...r,$ref:p.$ref}});n.accessScopes=T(n.accessScopes,m.accessScopes);}}}if(o==="object"){let p=Lt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let f of a){let m="$ref"in f?e.resolveRef(f.$ref):f;if(Ft({schema:m})==="object"){let l=Lt({context:e,schema:{...m,type:"object"},state:r});if(n.accessScopes=T(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}s.push(p);}}if(n=D({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),t.nullable){let p=[{type:"null"}];s.length&&p.unshift(n),n={items:p,logicalOperator:"or"},p[0].deprecated&&(n.deprecated=p[0].deprecated),p[0].description&&(n.description=p[0].description);}return n},Cm=({context:e,schema:t,state:r})=>{let n=St({schema:t}),s=[],o=Ft({schema:t}),a=t.anyOf;for(let p of a){let c=re({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let m=Ve(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},type:"object"},c],logicalOperator:"and"};}s.push(c);}if(t.nullable&&s.push({type:"null"}),n=D({items:s,mutateSchemaOneItem:true,schema:n}),o==="object"){let p=Lt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Em=({context:e,schema:t,state:r})=>{let n=St({schema:t});n.type="enum";let s=[];for(let[o,a]of t.enum.entries()){let p=typeof a,c;if(p==="string"||p==="number"||p==="boolean"?c=p:p==="object"&&Array.isArray(a)?c="array":a===null?t.nullable&&(c="null"):console.warn("\u{1F6A8}",`unhandled "${p}" typeof value "${a}" for enum`,t.enum),!c)continue;let f=Lt({context:e,schema:{description:t["x-enum-descriptions"]?.[o],title:t["x-enum-varnames"]?.[o]??t["x-enumNames"]?.[o],type:c==="null"?"string":c},state:r});f.const=a,c==="null"&&(f.type=c),f.type==="array"&&(f.type="tuple"),n.accessScopes=T(n.accessScopes,f.accessScopes),s.push(f);}return n=D({items:s,schema:n}),n},km=({context:e,schema:t,state:r})=>{let n=St({schema:t}),s=[],o=Ft({schema:t}),a=t.oneOf;for(let p of a){let c=re({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.discriminator&&"$ref"in p){let m=Ve(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?s=s.concat(c.items):s.push(c);}if(t.nullable&&s.push({type:"null"}),n=D({items:s,mutateSchemaOneItem:true,schema:n}),o==="object"){let p=Lt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Nm=({context:e,schema:t,state:r})=>{let n={};if(n.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let s=e.resolveRef(t.$ref),o=re({context:e,schema:s,state:{...r,$ref:t.$ref,isProperty:false}});n.accessScopes=T(n.accessScopes,o.accessScopes);}return n},vm=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=St({schema:r}));let s={};an({irSchema:s,schema:r,state:n}),s.default===null&&delete s.default;let o=[Lt({context:e,irSchema:s,schema:r,state:n}),{type:"null"}];return t=D({items:o,schema:t}),t},qm=({context:e,schema:t,state:r})=>{let n=St({schema:t});an({irSchema:n,schema:t,state:r});let s=Ft({schema:t});return s?t.nullable?vm({context:e,irSchema:n,schema:{...t,type:s},state:r}):Lt({context:e,irSchema:n,schema:{...t,type:s},state:r}):n},Lt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=St({schema:r}),an({irSchema:t,schema:r,state:n})),r.type){case "array":return Tm({context:e,irSchema:t,schema:r,state:n});case "boolean":return Rm({irSchema:t});case "integer":case "number":return Im({irSchema:t,schema:r});case "object":return Am({context:e,irSchema:t,schema:r,state:n});case "string":return Pm({irSchema:t});default:return vo({irSchema:t,schema:r,state:n})}},vo=({irSchema:e,schema:t,state:r})=>(e||(e=St({schema:t})),e.type="unknown",an({irSchema:e,schema:t,state:r}),e),re=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),"$ref"in t?Nm({context:e,schema:t,state:r}):t.enum?Em({context:e,schema:t,state:r}):t.allOf?jm({context:e,schema:t,state:r}):t.anyOf?Cm({context:e,schema:t,state:r}):t.oneOf?km({context:e,schema:t,state:r}):t.type||t.properties?qm({context:e,schema:t,state:r}):vo({schema:t,state:r})),qo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[G(e)]=re({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var $m=e=>e==="boolean"||e==="integer"||e==="number"||e==="string",Dt=({context:e,name:t,schema:r})=>{if(me(e.config.input.pagination).test(t))return  true;if("$ref"in r){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let o;if("in"in s&&(o=s.schema),!o){let a=ot({content:s.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(o=p.schema);}return o?Dt({context:e,name:t,schema:o}):false}return Dt({context:e,name:t,schema:s})}for(let s in r.properties)if(me(e.config.input.pagination).test(s)){let a=r.properties[s];if(typeof a!="boolean"&&!("$ref"in a)){let p=Ft({schema:a});if($m(p))return s}}for(let s of r.allOf??[]){let o=Dt({context:e,name:t,schema:s});if(o)return o}return  false};var wm=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},Mm=({context:e,method:t,operation:r,path:n,state:s})=>{let o={id:Mt({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return r.operationId&&(o.operationId=r.operationId),wm({irOperation:o,operation:r}),o},Fm=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{let a=Mm({context:e,method:t,operation:r,path:n,state:o});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=ot({content:p.content}),f=c.find(m=>m.type==="json")||c[0];if(f){let m=Dt({context:e,name:"",schema:f.schema&&"$ref"in f.schema?{allOf:[{...f.schema}],description:p.description}:{description:p.description,...f.schema}});a.body={mediaType:f.mediaType,schema:re({context:e,schema:"$ref"in r.requestBody?{allOf:[{...r.requestBody}],description:p.description}:f.schema&&"$ref"in f.schema?{allOf:[{...f.schema}],description:p.description}:{description:p.description,...f.schema},state:void 0})},m&&(a.body.pagination=m),p.required&&(a.body.required=p.required),f.type&&(a.body.type=f.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],f="$ref"in c?e.resolveRef(c.$ref):c,m=ot({content:f.content}),l=m.find(u=>u.type==="json")||m[0];l?a.responses[p]={mediaType:l.mediaType,schema:re({context:e,schema:{description:f.description,...No({content:l})},state:void 0})}:a.responses[p]={schema:{description:f.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let f in c){let m=s.get(f);m&&p.push(m);}p.length&&(a.security=p);}return a},at=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=Fm({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o});};var Lm=e=>{switch(e){case "query":return  false;default:return}},Dm=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},Vm=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},Be=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.dereference(n):n;r[s.in]||(r[s.in]={}),r[s.in][s.name.toLocaleLowerCase()]=$o({context:e,parameter:s});}return r},$o=({context:e,parameter:t})=>{let r=t.schema;if(!r){let f=ot({content:t.content}),m=f.find(l=>l.type==="json")||f[0];m&&(r=m.schema);}let n=r&&"$ref"in r?{allOf:[{...r}],deprecated:t.deprecated,description:t.description}:{deprecated:t.deprecated,description:t.description,...r},s=Dt({context:e,name:t.name,schema:n}),o=t.style||Vm(t.in),a=t.explode!==void 0?t.explode:Dm(o),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:Lm(t.in),explode:a,location:t.in,name:t.name,schema:re({context:e,schema:n,state:void 0}),style:o};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},wo=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[G(e)]=$o({context:t,parameter:r});};var _m=({context:e,requestBody:t})=>{let r=ot({content:t.content}),n=r.find(p=>p.type==="json")||r[0],s=n?n.schema:void 0,o={description:t.description,...s},a={schema:re({context:e,schema:o,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},Mo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[G(e)]=_m({context:t,requestBody:r});};var Fo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=_e(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Ms=e=>{let t=sr(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let o=ko({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=o.graph,or({context:e,result:o});}if(t&&r){let o=nr(e.config.input.filters,e.spec),a=ir({filters:o,graph:r});Eo({...a,preserveOrder:o.preserveOrder,spec:e.spec});}let n={ids:new Map},s=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[o],p="$ref"in a?e.resolveRef(a.$ref):a;s.set(o,p);}for(let o in e.spec.components.parameters){let a=`#/components/parameters/${o}`,p=e.spec.components.parameters[o],c="$ref"in p?e.resolveRef(p.$ref):p;wo({$ref:a,context:e,parameter:c});}for(let o in e.spec.components.requestBodies){let a=`#/components/requestBodies/${o}`,p=e.spec.components.requestBodies[o],c="$ref"in p?e.resolveRef(p.$ref):p;Mo({$ref:a,context:e,requestBody:c});}for(let o in e.spec.components.schemas){let a=`#/components/schemas/${o}`,p=e.spec.components.schemas[o];qo({$ref:a,context:e,schema:p});}}Fo({context:e});for(let o in e.spec.paths){let a=e.spec.paths[o],p=a.$ref?{...e.resolveRef(a.$ref),...a}:a,c={context:e,operation:{description:p.description,parameters:Be({context:e,parameters:p.parameters}),security:e.spec.security,servers:p.servers,summary:p.summary},path:o,securitySchemesMap:s,state:n};p.delete&&at({...c,method:"delete",operation:{...c.operation,...p.delete,parameters:q({source:Be({context:e,parameters:p.delete.parameters}),target:c.operation.parameters})}}),p.get&&at({...c,method:"get",operation:{...c.operation,...p.get,parameters:q({source:Be({context:e,parameters:p.get.parameters}),target:c.operation.parameters})}}),p.head&&at({...c,method:"head",operation:{...c.operation,...p.head,parameters:q({source:Be({context:e,parameters:p.head.parameters}),target:c.operation.parameters})}}),p.options&&at({...c,method:"options",operation:{...c.operation,...p.options,parameters:q({source:Be({context:e,parameters:p.options.parameters}),target:c.operation.parameters})}}),p.patch&&at({...c,method:"patch",operation:{...c.operation,...p.patch,parameters:q({source:Be({context:e,parameters:p.patch.parameters}),target:c.operation.parameters})}}),p.post&&at({...c,method:"post",operation:{...c.operation,...p.post,parameters:q({source:Be({context:e,parameters:p.post.parameters}),target:c.operation.parameters})}}),p.put&&at({...c,method:"put",operation:{...c.operation,...p.put,parameters:q({source:Be({context:e,parameters:p.put.parameters}),target:c.operation.parameters})}}),p.trace&&at({...c,method:"trace",operation:{...c.operation,...p.trace,parameters:q({source:Be({context:e,parameters:p.trace.parameters}),target:c.operation.parameters})}});}};var Lo=({operations:e,parameters:t,preserveOrder:r,requestBodies:n,responses:s,schemas:o,spec:a})=>{if(a.components){if(a.components.parameters){let p={};if(r)for(let[c,f]of Object.entries(a.components.parameters))t.has(O("parameter",c))&&(p[c]=f);else for(let c of t){let{name:f}=U(c),m=a.components.parameters[f];m&&(p[f]=m);}a.components.parameters=p;}if(a.components.requestBodies){let p={};if(r)for(let[c,f]of Object.entries(a.components.requestBodies))n.has(O("body",c))&&(p[c]=f);else for(let c of n){let{name:f}=U(c),m=a.components.requestBodies[f];m&&(p[f]=m);}a.components.requestBodies=p;}if(a.components.responses){let p={};if(r)for(let[c,f]of Object.entries(a.components.responses))s.has(O("response",c))&&(p[c]=f);else for(let c of s){let{name:f}=U(c),m=a.components.responses[f];m&&(p[f]=m);}a.components.responses=p;}if(a.components.schemas){let p={};if(r)for(let[c,f]of Object.entries(a.components.schemas))o.has(O("schema",c))&&(p[c]=f);else for(let c of o){let{name:f}=U(c),m=a.components.schemas[f];m&&(p[f]=m);}a.components.schemas=p;}}if(a.paths)for(let p of Object.entries(a.paths)){let c=p[0],f=p[1];for(let m of ie){if(!f[m])continue;let u=O("operation",v({method:m,path:c}));e.has(u)||delete f[m];}Object.keys(f).length||delete a.paths[c];}};var F=(e,t)=>{if("$ref"in e&&e.$ref){let r=e.$ref.split("/"),n=r[r.length-2],s=r[r.length-1];if(n&&s){let o=rr(n);o==="unknown"&&console.warn(`unsupported type: ${n}`),t.add(O(o,s));}}if(e.items&&typeof e.items=="object"&&F(e.items,t),e.properties)for(let r of Object.values(e.properties))typeof r=="object"&&F(r,t);if(e.additionalProperties&&typeof e.additionalProperties=="object"&&F(e.additionalProperties,t),e.allOf)for(let r of e.allOf)F(r,t);if(e.anyOf)for(let r of e.anyOf)F(r,t);if(e.contains&&F(e.contains,t),e.not&&F(e.not,t),e.oneOf)for(let r of e.oneOf)F(r,t);if(e.prefixItems)for(let r of e.prefixItems)F(r,t);e.propertyNames&&typeof e.propertyNames=="object"&&F(e.propertyNames,t);},Do=({spec:e,validate:t})=>{let r={operations:new Map,parameters:new Map,requestBodies:new Map,responses:new Map,schemas:new Map},n=[],s=new Map;if(e.components){if(e.components.schemas)for(let[o,a]of Object.entries(e.components.schemas)){let p=new Set;F(a,p),r.schemas.set(O("schema",o),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.parameters)for(let[o,a]of Object.entries(e.components.parameters)){let p=new Set;if("$ref"in a)F(a,p);else if(a.schema&&F(a.schema,p),a.content)for(let c of Object.values(a.content))c.schema&&F(c.schema,p);r.parameters.set(O("parameter",o),{dependencies:p,deprecated:"deprecated"in a?!!a.deprecated:false});}if(e.components.requestBodies)for(let[o,a]of Object.entries(e.components.requestBodies)){let p=new Set;if("$ref"in a)F(a,p);else for(let c of Object.values(a.content))c.schema&&F(c.schema,p);r.requestBodies.set(O("body",o),{dependencies:p,deprecated:false});}if(e.components.responses)for(let[o,a]of Object.entries(e.components.responses)){let p=new Set;if("$ref"in a)F(a,p);else if(a.content)for(let c of Object.values(a.content))c.schema&&F(c.schema,p);r.responses.set(O("response",o),{dependencies:p,deprecated:false});}}if(e.paths)for(let o of Object.entries(e.paths)){let a=o[0],p=o[1];for(let c of ie){let f=p[c];if(!f)continue;let m=v({method:c,path:a});t&&f.operationId&&(s.has(f.operationId)?n.push({code:"duplicate_key",context:{key:"operationId",value:f.operationId},message:"Duplicate `operationId` found. Each `operationId` must be unique.",path:["paths",a,c,"operationId"],severity:"error"}):s.set(f.operationId,m));let l=new Set;if(f.requestBody)if("$ref"in f.requestBody)F(f.requestBody,l);else for(let u of Object.values(f.requestBody.content))u.schema&&F(u.schema,l);if(f.responses){for(let u of Object.values(f.responses))if(u){if("$ref"in u)F(u,l);else if(u.content)for(let d of Object.values(u.content))d.schema&&F(d.schema,l);}}if(f.parameters)for(let u of f.parameters)"$ref"in u?F(u,l):u.schema&&F(u.schema,l);r.operations.set(O("operation",m),{dependencies:l,deprecated:!!f.deprecated,tags:new Set(f.tags)});}}if(t&&e.servers){(typeof e.servers!="object"||!Array.isArray(e.servers))&&n.push({code:"invalid_type",message:"`servers` must be an array.",path:[],severity:"error"});for(let o=0;o<e.servers.length;o++){let a=e.servers[o];!a||typeof a!="object"?n.push({code:"invalid_type",context:{actual:typeof a,expected:"object"},message:"Each entry in `servers` must be an object.",path:["servers",o],severity:"error"}):a.url||n.push({code:"missing_required_field",context:{field:"url"},message:"Missing required field `url` in server object.",path:["servers",o],severity:"error"});}}return {graph:r,issues:n,valid:!n.some(o=>o.severity==="error")}};var Vo=({content:e})=>{let{mediaType:t,schema:r}=e;return r?r.type==="string"&&!r.format&&st({mediaType:t})?{...r,format:"binary"}:r:st({mediaType:t})?{format:"binary",type:"string"}:void 0},pt=({content:e})=>{let t=[];for(let r in e)t.push({mediaType:r,schema:e[r].schema,type:ar({mediaType:r})});return t};var Ke=({schema:e})=>typeof e.type=="string"?[e.type]:e.type?e.type:e.properties?["object"]:[],Bm=({irSchema:e,schema:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.title&&(e.title=t.title);},pn=({irSchema:e,schema:t,state:r})=>{if(t.const!==void 0&&(e.const=t.const,!t.type))if(t.const===null)e.type="null";else switch(typeof t.const){case "bigint":case "number":e.type="number";break;case "boolean":e.type="boolean";break;case "string":e.type="string";break}t.default!==void 0&&(e.default=t.default),t.exclusiveMaximum!==void 0&&(e.exclusiveMaximum=t.exclusiveMaximum),t.exclusiveMinimum!==void 0&&(e.exclusiveMinimum=t.exclusiveMinimum),t.format&&(e.format=t.format),t.maximum!==void 0&&(e.maximum=t.maximum),t.maxItems!==void 0&&(e.maxItems=t.maxItems),t.maxLength!==void 0&&(e.maxLength=t.maxLength),t.minimum!==void 0&&(e.minimum=t.minimum),t.minItems!==void 0&&(e.minItems=t.minItems),t.minLength!==void 0&&(e.minLength=t.minLength),t.pattern&&(e.pattern=t.pattern),t.readOnly?(e.accessScope="read",e.accessScopes=T(e.accessScopes,["read"])):t.writeOnly?(e.accessScope="write",e.accessScopes=T(e.accessScopes,["write"])):r.isProperty&&(e.accessScopes=T(e.accessScopes,["both"]));},Km=({context:e,irSchema:t={},schema:r,state:n})=>{r.prefixItems&&r.prefixItems.length||r.maxItems&&r.maxItems===r.minItems||r.const!==void 0?t.type="tuple":t.type="array";let s=[];for(let o of r.prefixItems??[]){let a=J({context:e,schema:o,state:n});t.accessScopes=T(t.accessScopes,a.accessScopes),s.push(a);}if(r.items){let o=J({context:e,schema:r.items,state:n});if(t.accessScopes=T(t.accessScopes,o.accessScopes),!s.length&&r.maxItems&&r.maxItems===r.minItems)s=Array(r.maxItems).fill(o);else {let a=r.items.allOf||r.items.anyOf||r.items.oneOf;a&&a.length>1&&!Ke({schema:r.items}).includes("null")?t={...t,...o}:s.push(o);}}return t=D({items:s,schema:t}),t},Wm=({irSchema:e={}})=>(e.type="boolean",e),Hm=({irSchema:e={}})=>(e.type="null",e),Qm=({irSchema:e={},schema:t})=>(e.type=t.type,e),zm=({context:e,irSchema:t={},schema:r,state:n})=>{t.type="object";let s={};for(let o in r.properties){let a=r.properties[o];if(typeof a!="boolean"){let p=J({context:e,schema:a,state:{...n,isProperty:true}});t.accessScopes=T(t.accessScopes,p.accessScopes),s[o]=p;}}if(Object.keys(s).length&&(t.properties=s),r.additionalProperties===void 0)t.properties||(t.additionalProperties={type:"unknown"});else if(typeof r.additionalProperties=="boolean")t.additionalProperties={type:r.additionalProperties?"unknown":"never"};else {let o=J({context:e,schema:r.additionalProperties,state:n});t.additionalProperties=o;}return r.propertyNames&&(t.propertyNames=J({context:e,schema:r.propertyNames,state:n})),r.required&&(t.required=r.required),t},Um=({irSchema:e={}})=>(e.type="string",e),ct=({schema:e})=>{let t={};return Bm({irSchema:t,schema:e}),t},Xm=({context:e,schema:t,state:r})=>{let n=ct({schema:t}),s=[],o=Ke({schema:t}),a=t.allOf;for(let p of a){let c=J({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.required&&(c.required?c.required=[...c.required,...t.required]:c.required=t.required),s.push(c),p.$ref){let f=e.resolveRef(p.$ref);if(f.discriminator&&r.$ref){let l=Ve(r.$ref,f.discriminator.mapping).map(d=>({const:d,type:"string"})),u={properties:{[f.discriminator.propertyName]:l.length>1?{items:l,logicalOperator:"or"}:l[0]},type:"object"};f.required?.includes(f.discriminator.propertyName)&&(u.required=[f.discriminator.propertyName]),s.push(u);}if(!r.circularReferenceTracker.has(p.$ref)){let m=J({context:e,schema:f,state:{...r,$ref:p.$ref}});n.accessScopes=T(n.accessScopes,m.accessScopes);}}}if(o.includes("object")){let p=Vt({context:e,schema:{...t,type:"object"},state:r});if(n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties){for(let c of p.required??[])if(!p.properties[c])for(let f of a){let m=f.$ref?e.resolveRef(f.$ref):f;if(Ke({schema:m}).includes("object")){let l=Vt({context:e,schema:{...m,type:"object"},state:r});if(n.accessScopes=T(n.accessScopes,l.accessScopes),l.properties?.[c]){p.properties[c]=l.properties[c];break}}}s.push(p);}}if(n=D({items:s,logicalOperator:"and",mutateSchemaOneItem:true,schema:n}),o.includes("null")){let p=[{type:"null"}];s.length&&p.unshift(n),n={items:p,logicalOperator:"or"};}return n},Gm=({context:e,schema:t,state:r})=>{let n=ct({schema:t}),s=[],o=Ke({schema:t}),a=t.anyOf;for(let p of a){let c=J({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.discriminator&&p.$ref){let m=Ve(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},type:"object"},c],logicalOperator:"and"};}s.push(c);}if(o.includes("null")&&s.push({type:"null"}),n=D({items:s,mutateSchemaOneItem:true,schema:n}),o.includes("object")){let p=Vt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Jm=({context:e,schema:t,state:r})=>{let n=ct({schema:t});n.type="enum";let s=[],o=Ke({schema:t});for(let[a,p]of t.enum.entries()){let c=typeof p,f;if(c==="string"||c==="number"||c==="boolean"?f=c:c==="object"&&Array.isArray(p)?f="array":p===null?o.includes("null")&&(f="null"):console.warn("\u{1F6A8}",`unhandled "${c}" typeof value "${p}" for enum`,t.enum),!f)continue;let m=Vt({context:e,schema:{const:p,description:t["x-enum-descriptions"]?.[a],title:t["x-enum-varnames"]?.[a]??t["x-enumNames"]?.[a],type:f},state:r});n.accessScopes=T(n.accessScopes,m.accessScopes),s.push(m);}return n=D({items:s,schema:n}),n},Zm=({context:e,schema:t,state:r})=>{let n=ct({schema:t}),s=[],o=Ke({schema:t}),a=t.oneOf;for(let p of a){let c=J({context:e,schema:p,state:r});if(n.accessScopes=T(n.accessScopes,c.accessScopes),t.discriminator&&p.$ref){let m=Ve(p.$ref,t.discriminator.mapping).map(u=>({const:u,type:"string"}));c={items:[{properties:{[t.discriminator.propertyName]:m.length>1?{items:m,logicalOperator:"or"}:m[0]},required:[t.discriminator.propertyName],type:"object"},c],logicalOperator:"and"};}c.logicalOperator==="or"&&c.type!=="array"&&c.items?s=s.concat(c.items):s.push(c);}if(o.includes("null")&&s.push({type:"null"}),n=D({items:s,mutateSchemaOneItem:true,schema:n}),o.includes("object")){let p=Vt({context:e,schema:{...t,type:"object"},state:r});n.accessScopes=T(n.accessScopes,p.accessScopes),p.properties&&(n={items:[n,p],logicalOperator:"and"});}return n},Ym=({context:e,schema:t,state:r})=>{let n=ct({schema:t}),s={};if(s.$ref=decodeURI(t.$ref),!r.circularReferenceTracker.has(t.$ref)){let a=e.resolveRef(t.$ref),p=J({context:e,schema:a,state:{...r,$ref:t.$ref,isProperty:false}});s.accessScopes=T(s.accessScopes,p.accessScopes);}let o=[];return o.push(s),t.type&&typeof t.type!="string"&&t.type.includes("null")&&o.push({type:"null"}),n=D({items:o,mutateSchemaOneItem:true,schema:n}),n},Vt=({context:e,irSchema:t,schema:r,state:n})=>{switch(t||(t=ct({schema:r}),pn({irSchema:t,schema:r,state:n})),r.type){case "array":return Km({context:e,irSchema:t,schema:r,state:n});case "boolean":return Wm({irSchema:t});case "integer":case "number":return Qm({irSchema:t,schema:r});case "null":return Hm({irSchema:t});case "object":return zm({context:e,irSchema:t,schema:r,state:n});case "string":return Um({irSchema:t});default:return _o({irSchema:t,schema:r,state:n})}},ef=({context:e,irSchema:t,schema:r,state:n})=>{t||(t=ct({schema:r}));let s={};pn({irSchema:s,schema:r,state:n}),r.type.includes("null")&&s.default===null&&delete s.default;let o=[];for(let a of r.type)if(a==="null")o.push({type:"null"});else {let p=Vt({context:e,irSchema:s,schema:{...r,type:a},state:n});t.accessScopes=T(t.accessScopes,p.accessScopes),o.push(p);}return t=D({items:o,schema:t}),t},tf=({context:e,schema:t,state:r})=>{let n=ct({schema:t});pn({irSchema:n,schema:t,state:r});let s=Ke({schema:t});return s.length===1?Vt({context:e,irSchema:n,schema:{...t,type:s[0]},state:r}):ef({context:e,irSchema:n,schema:{...t,type:s},state:r})},_o=({irSchema:e,schema:t,state:r})=>(e||(e=ct({schema:t})),e.type="unknown",pn({irSchema:e,schema:t,state:r}),e),J=({context:e,schema:t,state:r})=>(r||(r={circularReferenceTracker:new Set}),r.$ref&&r.circularReferenceTracker.add(r.$ref),t.$ref?Ym({context:e,schema:t,state:r}):t.enum?Jm({context:e,schema:t,state:r}):t.allOf?Xm({context:e,schema:t,state:r}):t.anyOf?Gm({context:e,schema:t,state:r}):t.oneOf?Zm({context:e,schema:t,state:r}):t.type||t.properties?tf({context:e,schema:t,state:r}):_o({schema:t,state:r})),Bo=({$ref:e,context:t,schema:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.schemas||(t.ir.components.schemas={}),t.ir.components.schemas[G(e)]=J({context:t,schema:r,state:{$ref:e,circularReferenceTracker:new Set}});};var Ko=e=>e.includes("boolean")||e.includes("integer")||e.includes("number")||e.includes("string"),_t=({context:e,name:t,schema:r})=>{if(me(e.config.input.pagination).test(t))return  true;if(r.$ref){let s=e.resolveRef(r.$ref);if("content"in s||"in"in s){let o;if("in"in s&&(o=s.schema),!o){let a=pt({content:s.content}),p=a.find(c=>c.type==="json")||a[0];p?.schema&&(o=p.schema);}return o?_t({context:e,name:t,schema:o}):false}return _t({context:e,name:t,schema:s})}for(let s in r.properties)if(me(e.config.input.pagination).test(s)){let a=r.properties[s];if(typeof a!="boolean"){let p=Ke({schema:a});if(!p.length){let f=(a.anyOf??a.oneOf??[]).filter(m=>m.type!=="null");if(f.length===1){let m=Ke({schema:f[0]});if(Ko(m))return s}}if(Ko(p))return s}}for(let s of r.allOf??[]){let o=_t({context:e,name:t,schema:s});if(o)return o}return  false};var rf=({irOperation:e,operation:t})=>{t.deprecated!==void 0&&(e.deprecated=t.deprecated),t.description&&(e.description=t.description),t.summary&&(e.summary=t.summary),t.tags?.length&&(e.tags=t.tags);},nf=({context:e,method:t,operation:r,path:n,state:s})=>{let o={id:Mt({context:e,id:r.operationId,method:t,path:n,state:s}),method:t,path:n};return r.operationId&&(o.operationId=r.operationId),rf({irOperation:o,operation:r}),o},sf=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{let a=nf({context:e,method:t,operation:r,path:n,state:o});if(r.parameters&&(a.parameters=r.parameters),r.requestBody){let p="$ref"in r.requestBody?e.resolveRef(r.requestBody.$ref):r.requestBody,c=pt({content:p.content}),f=c.find(m=>m.type==="json")||c[0];if(f){let m=_t({context:e,name:"",schema:{description:p.description,...f.schema}});a.body={mediaType:f.mediaType,schema:J({context:e,schema:{description:p.description,..."$ref"in r.requestBody?r.requestBody:f.schema},state:void 0})},m&&(a.body.pagination=m),p.required&&(a.body.required=p.required),f.type&&(a.body.type=f.type);}}for(let p in r.responses){a.responses||(a.responses={});let c=r.responses[p],f="$ref"in c?e.resolveRef(c.$ref):c,m=pt({content:f.content}),l=m.find(u=>u.type==="json")||m[0];l?a.responses[p]={mediaType:l.mediaType,schema:J({context:e,schema:{description:f.description,...Vo({content:l})},state:void 0})}:a.responses[p]={schema:{description:f.description,type:p==="204"?"void":"unknown"}};}if(r.security){let p=[];for(let c of r.security)for(let f in c){let m=s.get(f);m&&p.push(m);}p.length&&(a.security=p);}return a},mt=({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o})=>{e.ir.paths||(e.ir.paths={}),e.ir.paths[n]||(e.ir.paths[n]={}),r.servers&&(e.ir.servers=[...e.ir.servers??[],...r.servers]),e.ir.paths[n][t]=sf({context:e,method:t,operation:r,path:n,securitySchemesMap:s,state:o});};var of=e=>{switch(e){case "query":return  false;default:return}},af=e=>{switch(e){case "deepObject":case "form":return  true;default:return  false}},pf=e=>{switch(e){case "header":case "path":return "simple";case "cookie":case "query":return "form"}},We=({context:e,parameters:t})=>{if(!t||!Object.keys(t).length)return;let r={};for(let n of t){let s="$ref"in n?e.dereference(n):n;r[s.in]||(r[s.in]={}),r[s.in][s.name.toLocaleLowerCase()]=Wo({context:e,parameter:s});}return r},Wo=({context:e,parameter:t})=>{let r=t.schema;if(!r){let f=pt({content:t.content}),m=f.find(l=>l.type==="json")||f[0];m&&(r=m.schema);}let n={deprecated:t.deprecated,description:t.description,...r},s=_t({context:e,name:t.name,schema:n}),o=t.style||pf(t.in),a=t.explode!==void 0?t.explode:af(o),c={allowReserved:t.allowReserved!==void 0?t.allowReserved:of(t.in),explode:a,location:t.in,name:t.name,schema:J({context:e,schema:n,state:void 0}),style:o};return t.deprecated&&(c.deprecated=t.deprecated),t.description&&(c.description=t.description),s&&(c.pagination=s),t.required&&(c.required=t.required),c},Ho=({$ref:e,context:t,parameter:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.parameters||(t.ir.components.parameters={}),t.ir.components.parameters[G(e)]=Wo({context:t,parameter:r});};var cf=({context:e,requestBody:t})=>{let r=pt({content:t.content}),n=r.find(p=>p.type==="json")||r[0],s=n?n.schema:void 0,o={description:t.description,...s},a={schema:J({context:e,schema:o,state:void 0})};return t.description&&(a.description=t.description),t.required&&(a.required=t.required),a},Qo=({$ref:e,context:t,requestBody:r})=>{t.ir.components||(t.ir.components={}),t.ir.components.requestBodies||(t.ir.components.requestBodies={}),t.ir.components.requestBodies[G(e)]=cf({context:t,requestBody:r});};var zo=({context:e})=>{if(e.spec.servers){e.ir.servers=e.spec.servers;return}if(typeof e.config.input.path=="string"){let t=_e(e.config.input.path);e.ir.servers=[{url:`${t.protocol?`${t.protocol}://`:""}${t.host}${t.port?`:${t.port}`:""}`}];}e.ir.servers||(e.ir.servers=[{url:"/"}]);};var Fs=e=>{let t=sr(e.config.input.filters),r;if(t||e.config.input.validate_EXPERIMENTAL){let o=Do({spec:e.spec,validate:!!e.config.input.validate_EXPERIMENTAL});r=o.graph,or({context:e,result:o});}if(t&&r){let o=nr(e.config.input.filters,e.spec),a=ir({filters:o,graph:r});Lo({...a,preserveOrder:o.preserveOrder,spec:e.spec});}let n={ids:new Map},s=new Map;if(e.spec.components){for(let o in e.spec.components.securitySchemes){let a=e.spec.components.securitySchemes[o],p="$ref"in a?e.resolveRef(a.$ref):a;s.set(o,p);}for(let o in e.spec.components.parameters){let a=`#/components/parameters/${o}`,p=e.spec.components.parameters[o],c="$ref"in p?e.resolveRef(p.$ref):p;Ho({$ref:a,context:e,parameter:c});}for(let o in e.spec.components.requestBodies){let a=`#/components/requestBodies/${o}`,p=e.spec.components.requestBodies[o],c="$ref"in p?e.resolveRef(p.$ref):p;Qo({$ref:a,context:e,requestBody:c});}for(let o in e.spec.components.schemas){let a=`#/components/schemas/${o}`,p=e.spec.components.schemas[o];Bo({$ref:a,context:e,schema:p});}}zo({context:e});for(let o in e.spec.paths){let a=e.spec.paths[o],p=a.$ref?{...e.resolveRef(a.$ref),...a}:a,c={context:e,operation:{description:p.description,parameters:We({context:e,parameters:p.parameters}),security:e.spec.security,servers:p.servers,summary:p.summary},path:o,securitySchemesMap:s,state:n};p.delete&&mt({...c,method:"delete",operation:{...c.operation,...p.delete,parameters:q({source:We({context:e,parameters:p.delete.parameters}),target:c.operation.parameters})}}),p.get&&mt({...c,method:"get",operation:{...c.operation,...p.get,parameters:q({source:We({context:e,parameters:p.get.parameters}),target:c.operation.parameters})}}),p.head&&mt({...c,method:"head",operation:{...c.operation,...p.head,parameters:q({source:We({context:e,parameters:p.head.parameters}),target:c.operation.parameters})}}),p.options&&mt({...c,method:"options",operation:{...c.operation,...p.options,parameters:q({source:We({context:e,parameters:p.options.parameters}),target:c.operation.parameters})}}),p.patch&&mt({...c,method:"patch",operation:{...c.operation,...p.patch,parameters:q({source:We({context:e,parameters:p.patch.parameters}),target:c.operation.parameters})}}),p.post&&mt({...c,method:"post",operation:{...c.operation,...p.post,parameters:q({source:We({context:e,parameters:p.post.parameters}),target:c.operation.parameters})}}),p.put&&mt({...c,method:"put",operation:{...c.operation,...p.put,parameters:q({source:We({context:e,parameters:p.put.parameters}),target:c.operation.parameters})}}),p.trace&&mt({...c,method:"trace",operation:{...c.operation,...p.trace,parameters:q({source:We({context:e,parameters:p.trace.parameters}),target:c.operation.parameters})}});}};var cn=["connect","delete","get","head","options","patch","post","put","trace"];function mn(e="1.0"){return String(e).replace(/^v/gi,"")}var cr="#/components/parameters/",fn="#/components/schemas/";var mr=({config:e,name:t})=>{let r=e.plugins["@hey-api/sdk"];if(r?.config.classNameBuilder){let n="";return typeof r.config.classNameBuilder=="function"?n=r.config.classNameBuilder(t):n=r.config.classNameBuilder.replace("{{name}}",t),n}return t},Ls=e=>S().plugins["@hey-api/typescript"]?.config.style==="PascalCase"?j({case:"PascalCase",value:e}):e,Uo=e=>{let t=Ls(e);return Ce(t).replace(oe,"_$1")};var Xo=(e,t)=>{if(e.enum&&!t.includes("boolean"))return "enum"},Ds=e=>fr(e).includes("null"),Tt=e=>e.nullable===true||Ds(e),fr=({type:e})=>Array.isArray(e)?e:e?[e]:[];var Ar=e=>e.trim().replace(/^#\/definitions\//,"").replace(/^#\/parameters\//,"").replace(/^#\/responses\//,"").replace(/^#\/securityDefinitions\//,"").replace(/^#\/components\/schemas\//,"").replace(/^#\/components\/responses\//,"").replace(/^#\/components\/parameters\//,"").replace(/^#\/components\/examples\//,"").replace(/^#\/components\/requestBodies\//,"").replace(/^#\/components\/headers\//,"").replace(/^#\/components\/securitySchemes\//,"").replace(/^#\/components\/links\//,"").replace(/^#\/components\/callbacks\//,"");var Go=(e,t)=>{if(t==="binary")return "binary";switch(e){case "any":case "object":case "unknown":return "unknown";case "array":return "unknown[]";case "boolean":return "boolean";case "byte":case "double":case "float":case "int":case "integer":case "long":case "number":case "short":return "number";case "char":case "date":case "date-time":case "password":case "string":return "string";case "file":return "binary";case "null":return "null";case "void":return "void";default:return}},Jo=/(?<!`1)\[.*\]$/g,P=({debug:e,format:t,type:r="unknown"})=>{let n={$refs:[],base:"unknown",imports:[],isNullable:false,template:null,type:"unknown"};if(Array.isArray(r)){let a=r.filter(p=>p!=="null").map(p=>Go(p,t)).filter(Boolean).join(" | ");return n.type=a,n.base=a,n.isNullable=Ds({type:r}),n}let s=Go(r,t);if(s)return n.type=s,n.base=s,n;let o=decodeURIComponent(Ar(r));if(Jo.lastIndex=0,Jo.test(o)){let a=o.match(/(.*?)\[(.*)\]$/);if(a?.length){let p=P({debug:e,type:Ce(a[1])}),c=P({debug:e,type:Ce(a[2])});return p.type==="unknown[]"?(n.type=`${c.type}[]`,n.base=`${c.type}`,p.$refs=[],p.imports=[]):c.type?(n.type=`${p.type}<${c.type}>`,n.base=p.type,n.template=c.type):(n.type=p.type,n.base=p.type,n.template=p.type),n.$refs=[...n.$refs,...p.$refs,...c.$refs],n.imports=[...n.imports,...p.imports,...c.imports],n}}if(o){let a=Ls(Ce(o));return r.startsWith(cr)&&(a=`Parameter${a}`),n.type=a,n.base=a,r.startsWith("#")&&(n.$refs=[...n.$refs,decodeURIComponent(r)]),n.imports=[...n.imports,a],n}return n};function He(e,t,r){return r.indexOf(e)===t}var lr=(e,t)=>{if(!Array.isArray(t))return [];let r=(e["x-enum-descriptions"]??[]).filter(s=>typeof s=="string"),n=(e["x-enum-varnames"]??e["x-enumNames"]??[]).filter(s=>typeof s=="string");return t.filter(He).filter(s=>typeof s=="number"||typeof s=="string").map((s,o)=>({customDescription:r[o],customName:n[o],description:void 0,value:s}))};var X=e=>e?.replace(/\\/g,"\\\\").replace(/'/g,"\\'");var ln=({definition:e,getModel:t,openApi:r,types:n})=>{let s=[];return Object.entries(e.properties??{}).forEach(([o,a])=>{let p=!!e.required?.includes(o);if(a.$ref){let c=P({type:a.$ref});s.push({$refs:[],base:c.base,description:a.description||null,enum:[],enums:[],exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:"reference",format:a.format,imports:c.imports,in:"",isDefinition:false,isNullable:a["x-nullable"]===true,isReadOnly:a.readOnly===true,isRequired:p,link:null,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,name:ge(o),pattern:X(a.pattern),properties:[],template:c.template,type:c.type,uniqueItems:a.uniqueItems});}else {let c=t({definition:a,openApi:r,types:n});s.push({$refs:[],base:c.base,description:a.description||null,enum:c.enum,enums:c.enums,exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:c.export,format:a.format,imports:c.imports,in:"",isDefinition:false,isNullable:a["x-nullable"]===true,isReadOnly:a.readOnly===true,isRequired:p,link:c.link,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,name:ge(o),pattern:X(a.pattern),properties:c.properties,template:c.template,type:c.type,uniqueItems:a.uniqueItems});}}),s};var mf=/~1/g,ff=/~0/g;function _(e,t){if(t.$ref){let r=t.$ref.replace(/^#/g,"").split("/").filter(Boolean),n=e;return r.forEach(s=>{let o=decodeURIComponent(s.replace(mf,"/").replace(ff,"~"));if(n.hasOwnProperty(o))n=n[o];else throw new Error(`Could not find reference: "${t.$ref}"`)}),n}return t}var Zo=({definitions:e,getModel:t,openApi:r,required:n,types:s})=>e.reduce((o,a)=>{if(a.$ref){let p=_(r,a);return [...o,...t({definition:p,openApi:r,types:s}).properties]}return [...o,...t({definition:a,openApi:r,types:s}).properties]},[]).filter(o=>!o.isRequired&&n.includes(o.name)).map(o=>({...o,isRequired:true}));var Yo=({definition:e,definitions:t,getModel:r,openApi:n,type:s,types:o})=>{let a={$refs:[],enums:[],export:s,imports:[],properties:[]},p=[];if(t.map(c=>r({definition:c,openApi:n,types:o})).filter(c=>{let f=c.properties.length,m=c.enums.length;return !(c.type==="unknown"&&!f&&!m)}).forEach(c=>{a.imports.push(...c.imports),a.enums.push(...c.enums),a.properties.push(c);}),e.required&&s==="all-of"){let c=Zo({definitions:t,getModel:r,openApi:n,required:e.required,types:o});c.forEach(f=>{a.imports.push(...f.imports),a.enums.push(...f.enums);}),p.push(...c);}if(e.properties){let c=ln({definition:e,getModel:r,openApi:n,types:o});c.forEach(f=>{a.imports.push(...f.imports),a.enums.push(...f.enums),f.export==="enum"&&a.enums.push(f);}),p.push(...c);}return p.length&&a.properties.push({$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:p,template:null,type:"unknown"}),a};var Qe=({definition:e,isDefinition:t=false,meta:r,openApi:n,types:s})=>{let o={$refs:[],base:"unknown",description:e.description||null,enum:[],enums:[],exclusiveMaximum:e.exclusiveMaximum,exclusiveMinimum:e.exclusiveMinimum,export:"interface",format:e.format,imports:[],in:"",isDefinition:t,isNullable:e["x-nullable"]===true,isReadOnly:e.readOnly===true,isRequired:false,link:null,maxItems:e.maxItems,maxLength:e.maxLength,maxProperties:e.maxProperties,maximum:e.maximum,meta:r,minItems:e.minItems,minLength:e.minLength,minProperties:e.minProperties,minimum:e.minimum,multipleOf:e.multipleOf,name:r?.name??"",pattern:X(e.pattern),properties:[],template:null,type:"unknown",uniqueItems:e.uniqueItems};if(e.$ref){let a=P({type:e.$ref});return o.export="reference",o.type=a.type,o.base=a.base,o.template=a.template,o.imports.push(...a.imports),o}if(e.enum&&e.type!=="boolean"){let a=lr(e,e.enum);if(a.length)return o.base="string",o.enum=[...o.enum,...a],o.export="enum",o.type="string",o}if(e.type==="array"&&e.items)if(e.items.$ref){let a=P({type:e.items.$ref});return o.export="array",o.type=a.type,o.base=a.base,o.template=a.template,o.imports.push(...a.imports),o}else {let a=Qe({definition:e.items,openApi:n,types:s});return o.export="array",o.type=a.type,o.base=a.base,o.template=a.template,o.link=a,o.imports.push(...a.imports),o}if(e.type==="object"&&typeof e.additionalProperties=="object")if(e.additionalProperties.$ref){let a=P({type:e.additionalProperties.$ref});return o.export="dictionary",o.type=a.type,o.base=a.base,o.template=a.template,o.imports.push(...a.imports),o}else {let a=Qe({definition:e.additionalProperties,openApi:n,types:s});return o.export="dictionary",o.type=a.type,o.base=a.base,o.template=a.template,o.link=a,o.imports.push(...a.imports),o}if(e.allOf?.length){let a=Yo({definition:e,definitions:e.allOf,getModel:Qe,openApi:n,type:"all-of",types:s});return o.export=a.export,o.imports.push(...a.imports),o.properties.push(...a.properties),o.enums=[...o.enums,...a.enums],o}if(e.type==="object")return o.export="interface",o.type="unknown",o.base="unknown",e.properties&&ln({definition:e,getModel:Qe,openApi:n,types:s}).forEach(p=>{o.imports.push(...p.imports),o.enums=[...o.enums,...p.enums],o.properties.push(p),p.export==="enum"&&(o.enums=[...o.enums,p]);}),o;if(e.type){let a=P({format:e.format,type:e.type});return o.export="generic",o.type=a.type,o.base=a.base,o.template=a.template,o.imports.push(...a.imports),o}return o};var ea=e=>{let t={},r=[];return Object.entries(e.definitions??{}).forEach(([n,s])=>{let a=P({type:n}).base.replace(oe,"_$1"),p={$ref:`#/definitions/${n}`,name:a};t[a]=p;let c=Qe({definition:s,isDefinition:true,meta:p,openApi:e,types:t});r=[...r,c];}),{models:r,types:t}};function Vs(e,t){let r=e.toLocaleLowerCase(),n=t.toLocaleLowerCase();return r.localeCompare(n,"en")}var Pr=(e,t)=>Vs(e.name,t.name);function ta(e){return e.sort(Pr)}var lf=(e,t)=>{if(t)return t;if(typeof e=="number")return `'_${e}'`;let r="";return typeof e=="string"&&(r=e.replace(/[^$\u200c\u200d\p{ID_Continue}]/gu,"_").replace(/^([^$_\p{ID_Start}])/u,"_$1").replace(/(\p{Lowercase})(\p{Uppercase}+)/gu,"$1_$2")),r=r.trim(),r||(r="empty_string"),r.toUpperCase()},ra=e=>e.map(t=>un(t.value,true)).filter(He).join(" | "),un=(e,t=false)=>typeof e=="string"?e.includes("'")&&t?`"${e}"`:`'${e}'`:e,dn=e=>{let t=lf(e.value,e.customName),r=un(e.value);return {key:t,value:r}},yn=e=>{let t=e.enum.map(r=>dn(r)).sort((r,n)=>Vs(r.key,n.key)).map(r=>`${r.key}=${r.value}`).join("&");return {$ref:`enum/${e.name}/${t}`,name:Ce(Ut(e.name))}};var na=e=>{let r=`Parameter${P({type:e}).base.replace(oe,"_$1")}`;return {$ref:cr+e,name:r}},hn=e=>{let t=Uo(e);return {$ref:fn+e,name:t}};var jr=e=>e.format==="date"||e.format==="date-time",_s=e=>{let t=S();return e.base==="binary"?i.typeUnionNode({types:["Blob","File"]}):t.plugins["@hey-api/transformers"]?.config.dates&&jr(e)?i.typeNode("Date"):i.typeNode(e.base)},uf=e=>{let t=e.base==="null"?false:e.isNullable,r=_s(e);if(e.export==="reference"&&e.$refs.length===1&&e.$refs[0].startsWith(fn)){let s=hn(e.base);r=i.typeNode(s.name);}return i.typeUnionNode({isNullable:t,types:[r]})},df=e=>{if(e.link){if(Array.isArray(e.link)){let t=e.link.map(n=>Te(n));return i.typeTupleNode({isNullable:e.isNullable,types:t})}if(e.export==="array"&&e.maxItems&&e.minItems&&e.maxItems===e.minItems&&e.maxItems<=100){let t=Array(e.maxItems).fill(Te(e.link));return i.typeTupleNode({isNullable:e.isNullable,types:t})}return i.typeArrayNode([Te(e.link)],e.isNullable)}return i.typeArrayNode([_s(e)],e.isNullable)},yf=e=>{let t=e.enum.map(r=>un(r.value));return i.typeUnionNode({isNullable:e.isNullable,types:t})},hf=e=>{let t=e.link&&!Array.isArray(e.link)?Te(e.link):_s(e);return i.typeRecordNode(["string"],[t],e.isNullable,true)},sa=({model:e,style:t})=>{let r=e.properties.map(s=>i.nodeToString({node:Te(s),unescape:true})).filter(He),n=t==="union"?i.typeUnionNode({isNullable:e.isNullable&&!e.properties.find(s=>s.isNullable),types:r}):i.typeIntersectionNode({isNullable:e.isNullable,types:r});return e.meta?n:i.typeParenthesizedNode({type:n})},gf=e=>{if(!e.properties.length)return i.typeNode("unknown");let t=S(),r=K(t),n=e.properties.map(s=>{let o=s.isRequired?"":"?",a=Te(s),p=r?/^\dXX$/.test(s.name)?ge(s.name):s.name:ge(Ut(Bs(s.name)));return s.name==="[key: string]"&&(p=s.name,o&&(o="",a=i.typeUnionNode({types:[a,"undefined"]}))),{comment:[s.description&&V(s.description),s.deprecated&&"@deprecated"],isReadOnly:s.isReadOnly,isRequired:o==="",name:p,type:a}});return i.typeInterfaceNode({isNullable:e.isNullable,properties:n,useLegacyResolution:true})},Te=e=>{switch(e.export){case "all-of":return sa({model:e,style:"intersection"});case "any-of":case "one-of":return sa({model:e,style:"union"});case "array":return df(e);case "dictionary":return hf(e);case "enum":return yf(e);case "interface":return gf(e);case "const":case "generic":case "reference":default:return uf(e)}},Re=({client:e,count:t=1,create:r=false,meta:n,nameTransformer:s})=>{let o={created:false,name:""},a=n.name;s&&(a=s(a)),t>1&&(a=`${a}${t}`);let p=e.types[a];return p?p.$ref===n.$ref?o={created:false,name:a}:o=Re({client:e,count:t+1,create:r,meta:n,nameTransformer:s}):r&&(e.types[a]=n,o={created:true,name:a}),o},ia=({client:e,name:t})=>{let r={deleted:false,name:""};return e.types[t]&&(delete e.types[t],r={deleted:true,name:t}),r},Bs=e=>{let t=S();return K(t)?j({case:"camelCase",value:qs(e)}).replace(oe,"_$1"):e};var gn=e=>{let t=e.find(r=>r.in==="header");return t?t.name:null},ze=e=>e.some(r=>r.isRequired),xn=e=>{if(e==="default")return "default";if(e==="1XX")return "1XX";if(e==="2XX")return "2XX";if(e==="3XX")return "3XX";if(e==="4XX")return "4XX";if(e==="5XX")return "5XX";if(/\d{3}/g.test(e)){let t=Number.parseInt(e,10);if(t>=100&&t<600)return t}return null},bn=(e,t)=>e.code>t.code?1:e.code<t.code?-1:0,xf=e=>e==="3XX"||e==="4XX"||e==="5XX"||typeof e=="number"&&e>=300,oa=e=>e==="2XX"||typeof e=="number"&&e>=200&&e<300,bf=(e,t)=>{let r=[],n=f=>{r.includes(f)||(r=[...r,f]);};t.some(({code:f})=>oa(f))||n("success");let o=(e.description??"").toLocaleLowerCase(),a=e.$refs.join("|").toLocaleLowerCase(),p=["error","problem"];return ["success"].some(f=>o.includes(f)||a.includes(f))&&n("success"),p.some(f=>o.includes(f)||a.includes(f))&&n("error"),r.length||n("error"),r},On=({config:e,operationKey:t})=>{let r=e.plugins["@hey-api/sdk"]?.config.filter?new RegExp(e.plugins["@hey-api/sdk"]?.config.filter):void 0;return !r||r.test(t)},Sn=({config:e,method:t,operationId:r,path:n})=>{if(e.plugins["@hey-api/sdk"]?.config.operationId&&r)return j({case:"camelCase",value:nt(r)});let s=n;return K(e)&&(s=s.replace(/[^/]*?{api-version}.*?\//g,"")),s=s.replace(/{(.*?)}/g,"by-$1").replace(/[/:+]/g,"-"),j({case:"camelCase",value:`${t}-${s}`})},Tn=e=>{let t=S();return !K(t)||e.prop!=="api-version"},Rn=e=>{let t=S();return K(t)?Bs(e.prop):e.prop},In=e=>e.map(t=>{let{code:r}=t;return r==="default"?t.responseTypes=bf(t,e):oa(r)?t.responseTypes=["success"]:xf(r)&&(t.responseTypes=["error"]),t});var B=(e,t)=>{if(e.default===void 0||e.default===null)return e.default;switch(fr(e).find(s=>s!=="null")||typeof e.default){case "int":case "integer":case "number":if(t?.export==="enum"&&t.enum?.[e.default]){let{value:s}=t.enum[e.default];return s}return e.default;case "array":case "boolean":case "object":case "string":return e.default;default:return}};var aa=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:t.in,isDefinition:false,isNullable:t["x-nullable"]===true,isReadOnly:false,isRequired:t.required===true,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maximum:t.maximum,mediaType:null,minItems:t.minItems,minLength:t.minLength,minimum:t.minimum,multipleOf:t.multipleOf,pattern:X(t.pattern),prop:t.name,properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems},s={...n,name:Rn(n)};if(t.$ref){let a=P({type:t.$ref});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"reference",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}if(t.enum){let a=lr(t,t.enum);if(a.length)return s={...s,base:"string",enum:[...s.enum,...a],export:"enum",type:"string"},s.default=B(t,s),s}if(t.type==="array"&&t.items){let a=P({format:t.items.format,type:t.items.type});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"array",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}if(t.type==="object"&&t.items){let a=P({format:t.items.format,type:t.items.type});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"dictionary",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}let o=t.schema;if(o){if(o.$ref?.startsWith("#/parameters/")&&(o=_(e,o)),o.$ref){let p=P({type:o.$ref});return s={...s,$refs:[...s.$refs,...p.$refs],base:p.base,export:"reference",imports:[...s.imports,...p.imports],template:p.template,type:p.type},s.default=B(t,s),s}let a=Qe({definition:o,openApi:e,types:r});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,enum:[...s.enum,...a.enum],enums:[...s.enums,...a.enums],export:a.export,imports:[...s.imports,...a.imports],link:a.link,properties:[...s.properties,...a.properties],template:a.template,type:a.type},s.default=B(t,s),s}if(t.type){let a=P({format:t.format,type:t.type});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"generic",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s.default=B(t,s),s}return s};var Of=["body","formData","header","path","query"],An=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(s=>{let o=_(e,s),a=aa({openApi:e,parameter:o,types:r}),p=!Tn(a);if(!(!Of.includes(o.in)||p)){switch(o.in){case "body":n.parametersBody=a;break;case "formData":n.parametersForm=[...n.parametersForm,a];break;case "header":n.parametersHeader=[...n.parametersHeader,a];break;case "path":n.parametersPath=[...n.parametersPath,a];break;case "query":n.parametersQuery=[...n.parametersQuery,a];break}n.$refs=[...n.$refs,...a.$refs],n.imports=[...n.imports,...a.imports],n.parameters=[...n.parameters,a];}}),n};function Pn(e){return e.sort((t,r)=>{let n=t.isRequired&&t.default===void 0,s=r.isRequired&&r.default===void 0;return n&&!s?-1:s&&!n?1:0})}var pa=({code:e,openApi:t,response:r,types:n})=>{let s={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"},o=r.schema;if(o){if(o.$ref?.startsWith("#/responses/")&&(o=_(t,o)),o.$ref){let p=P({type:o.$ref});return s.export="reference",s.type=p.type,s.base=p.base,s.template=p.template,s.imports=[...s.imports,...p.imports],s}let a=Qe({definition:o,openApi:t,types:n});return s.export=a.export,s.type=a.type,s.base=a.base,s.template=a.template,s.link=a.link,s.isReadOnly=a.isReadOnly,s.isRequired=a.isRequired,s.isNullable=a.isNullable,s.format=a.format,s.maximum=a.maximum,s.exclusiveMaximum=a.exclusiveMaximum,s.minimum=a.minimum,s.exclusiveMinimum=a.exclusiveMinimum,s.multipleOf=a.multipleOf,s.maxLength=a.maxLength,s.minLength=a.minLength,s.maxItems=a.maxItems,s.minItems=a.minItems,s.uniqueItems=a.uniqueItems,s.maxProperties=a.maxProperties,s.minProperties=a.minProperties,s.pattern=X(a.pattern),s.imports=[...s.imports,...a.imports],s.enum=[...s.enum,...a.enum],s.enums=[...s.enums,...a.enums],s.properties=[...s.properties,...a.properties],s}if(r.headers)for(let a in r.headers)return s.in="header",s.name=a,s.type="string",s.base="string",s;return s};var ca=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([s,o])=>{let a=xn(s);if(!a)return;let p=_(e,o),c=pa({code:a,openApi:e,response:p,types:r});n=[...n,c];}),n=In(n),n.sort(bn)};var ma=({method:e,op:t,openApi:r,pathParams:n,types:s,url:o})=>{let a={$refs:[],deprecated:t.deprecated===true,description:t.description||null,id:t.operationId||null,imports:[],method:e.toUpperCase(),parameters:[...n.parameters],parametersBody:n.parametersBody,parametersCookie:[...n.parametersCookie],parametersForm:[...n.parametersForm],parametersHeader:[...n.parametersHeader],parametersPath:[...n.parametersPath],parametersQuery:[...n.parametersQuery],path:o,responseHeader:null,responses:[],summary:t.summary||null,tags:t.tags||null},p={...a,name:Sn({config:S(),method:a.method,operationId:t.operationId,path:a.path})};if(t.parameters){let c=An({openApi:r,parameters:t.parameters,types:s});p.$refs=[...p.$refs,...c.$refs],p.imports=[...p.imports,...c.imports],p.parameters=[...p.parameters,...c.parameters],p.parametersBody=c.parametersBody,p.parametersCookie=[...p.parametersCookie,...c.parametersCookie],p.parametersForm=[...p.parametersForm,...c.parametersForm],p.parametersHeader=[...p.parametersHeader,...c.parametersHeader],p.parametersPath=[...p.parametersPath,...c.parametersPath],p.parametersQuery=[...p.parametersQuery,...c.parametersQuery];}if(t.responses){p.responses=ca({openApi:r,responses:t.responses,types:s});let c=p.responses.filter(f=>f.responseTypes.includes("success"));p.responseHeader=gn(c),c.forEach(f=>{p.$refs=[...p.$refs,...f.$refs],p.imports=[...p.imports,...f.imports];});}return p.parameters=Pn(p.parameters),p};var fa=({openApi:e,types:t})=>{let r=new Map,n=[],s=S();for(let o in e.paths){let a=e.paths[o],p=An({openApi:e,parameters:a.parameters??[],types:t});for(let c in a){let f=c,m=v({method:f,path:o});if(cn.includes(f)){let l=a[f];if(l.operationId&&(r.has(l.operationId)?s.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${m}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,m)),On({config:s,operationKey:m})){let u=ma({method:f,op:l,openApi:e,pathParams:p,types:t,url:o});n.push(u);}}}}return n};var la=e=>{let t=e.schemes?.[0]||"http",r=e.host,n=e.basePath||"";return (r?`${t}://${r}${n}`:n).replace(/\/$/g,"")};var ua=e=>{let t=mn(e.info.version),r=la(e),{models:n,types:s}=ea(e),o=fa({openApi:e,types:s});return {models:n,operations:o,server:r,types:s,version:t}};var Sf=e=>{let t={};for(let r in e)t[e[r]]=r;return t},da=(e,t)=>{if(e.components&&t){for(let r in e.components.schemas)if(e.components.schemas.hasOwnProperty(r)){let n=e.components.schemas[r];if(n.discriminator&&n.oneOf?.length&&n.oneOf.some(s=>s.$ref&&Ar(s.$ref)==t.name))return n.discriminator}}},ya=(e,t)=>{if(e.mapping){let r=Sf(e.mapping),n=Object.keys(r).find(s=>Ar(s)==t.name);if(n&&r[n])return r[n]}return t.name};var Ks=({debug:e,definition:t,getModel:r,model:n,openApi:s,types:o})=>{let a=typeof t.additionalProperties=="object"?t.additionalProperties:{},p=r({debug:e,definition:a,openApi:s,parentDefinition:t,types:o});if(a.$ref){let c=P({type:a.$ref});return n.base=c.base,n.default=B(t,n),n.export="dictionary",n.imports.push(...c.imports),n.template=c.template,n.type=c.type,n}if(t.additionalProperties&&t.properties&&Object.keys(t.properties).length>0){let c=typeof t.additionalProperties=="object"&&t.additionalProperties.type&&!Array.isArray(t.additionalProperties.type)?t.additionalProperties.type:p.base,f=[P({type:c}).base,...n.properties.map(m=>m.base)];return p.base=f.filter(He).join(" | "),p.default=B(t,n),p.export="generic",p.isRequired=t.additionalProperties===true,p.name="[key: string]",p}return n.base=p.base,n.default=B(t,n),n.export="dictionary",n.imports.push(...p.imports),n.link=p,n.template=p.template,n.type=p.type,n},jn=({debug:e,definition:t,getModel:r,openApi:n,parent:s,types:o})=>{let a=[],p=da(n,s);return Object.entries(t.properties??{}).forEach(([c,f])=>{let m=!!t.required?.includes(c),l={default:f.default,deprecated:f.deprecated===true,description:f.description||null,exclusiveMaximum:f.exclusiveMaximum,exclusiveMinimum:f.exclusiveMinimum,format:f.type==="array"?f.items?.format??f.format:f.format,in:"",isDefinition:false,isReadOnly:f.readOnly===true,isRequired:m,maxItems:f.maxItems,maxLength:f.maxLength,maxProperties:f.maxProperties,maximum:f.maximum,minItems:f.minItems,minLength:f.minLength,minProperties:f.minProperties,minimum:f.minimum,multipleOf:f.multipleOf,name:ge(c),pattern:X(f.pattern),uniqueItems:f.uniqueItems};if(s&&p?.propertyName==c){a=[...a,{...l,$refs:[],base:`'${ya(p,s)}'`,enum:[],enums:[],export:"reference",imports:[],isNullable:Tt(f),link:null,properties:[],template:null,type:"string"}];return}if(f.$ref){let d=P({type:f.$ref});a=[...a,{...l,$refs:d.$refs,base:d.base,enum:[],enums:[],export:"reference",imports:d.imports,isNullable:d.isNullable||Tt(f),link:null,properties:[],template:d.template,type:d.type}];return}let u=r({debug:e,definition:f,initialValues:l,openApi:n,parentDefinition:t,types:o});u.isNullable=u.isNullable||Tt(f),a=[...a,u];}),a};var ha=({debug:e,definitions:t,getModel:r,openApi:n,required:s,types:o})=>t.reduce((p,c)=>{if(c.$ref){let f=P({type:c.$ref}),m={$ref:c.$ref,name:f.base};o[f.base]=m;let l=_(n,c);return [...p,...r({debug:e,definition:l,meta:m,openApi:n,types:o}).properties]}return [...p,...r({debug:e,definition:c,openApi:n,parentDefinition:c,types:o}).properties]},[]).filter(p=>!p.isRequired&&s.includes(p.name)).map(p=>({...p,isRequired:true}));var Cn=e=>[{definitions:e.allOf,type:"all-of"},{definitions:e.anyOf,type:"any-of"},{definitions:e.oneOf,type:"one-of"}].find(r=>r.definitions?.length),ga=({debug:e,definition:t,definitions:r,getModel:n,model:s,openApi:o,type:a,types:p})=>{let c={$refs:s.$refs,enums:s.enums,export:a,imports:s.imports,properties:s.properties},f=[];if(r.map(m=>n({debug:e,definition:m,openApi:o,parentDefinition:t,types:p})).forEach(m=>{c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.enums=[...c.enums,...m.enums],c.properties=[...c.properties,m];}),t.required&&a==="all-of"){let m=ha({debug:e,definitions:r,getModel:n,openApi:o,required:t.required,types:p});m.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums];}),f=[...f,...m];}if(t.properties){let m=jn({definition:t,getModel:n,openApi:o,types:p});m.forEach(l=>{c.$refs=[...c.$refs,...l.$refs],c.imports=[...c.imports,...l.imports],c.enums=[...c.enums,...l.enums],l.export==="enum"&&(c.enums=[...c.enums,l]);}),f=[...f,...m];}if(f.length){let m=Cn(t);if(m){let l={$refs:[],base:"unknown",description:"",enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"properties",properties:f,template:null,type:"unknown"};m.type==="one-of"?(c.properties=[{...c,base:"",description:null,enum:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:true,link:null,name:"",template:null,type:""},l],c.export="all-of"):c.properties=[...c.properties,l];}}return c};var ne=({debug:e,definition:t,initialValues:r={},isDefinition:n=false,meta:s,openApi:o,parentDefinition:a=null,types:p})=>{let c=fr(t),f=Xo(t,c),m={$refs:[],base:"unknown",deprecated:!!t.deprecated,description:t.description||null,enum:[],enums:[],exclusiveMaximum:t.exclusiveMaximum,exclusiveMinimum:t.exclusiveMinimum,export:"interface",format:t.format,imports:[],in:"",isDefinition:n,isNullable:Tt(t),isReadOnly:t.readOnly===true,isRequired:false,link:null,maxItems:t.maxItems,maxLength:t.maxLength,maxProperties:t.maxProperties,maximum:t.maximum,meta:s,minItems:t.minItems,minLength:t.minLength,minProperties:t.minProperties,minimum:t.minimum,multipleOf:t.multipleOf,name:s?.name??"",pattern:X(t.pattern),properties:[],template:null,type:"unknown",uniqueItems:t.uniqueItems,...r};if(t.$ref){let u=P({debug:e,type:t.$ref});return m.$refs=[...m.$refs,decodeURIComponent(t.$ref)],m.base=u.base,m.export="reference",m.imports=[...m.imports,...u.imports],m.template=u.template,m.type=u.type,m.default=B(t,m),m}if(f==="enum"){let u=lr(t,t.enum);if(u.length)return m.base="string",m.enum=[...m.enum,...u],m.export="enum",m.type="string",m.default=B(t,m),m.meta||(m.meta=yn(m)),m}if(c.includes("array")&&(t.items||t.prefixItems)){if(t.prefixItems){let y=t.prefixItems.map(h=>ne({definition:h,openApi:o,parentDefinition:t,types:p}));return m.export="array",m.$refs=[...m.$refs,...y.reduce((h,I)=>[...h,...I.$refs],[])],m.imports=[...m.imports,...y.reduce((h,I)=>[...h,...I.imports],[])],m.link=y,m.default=B(t,m),m}if(!t.items)return m;if(t.items.$ref){let y=P({type:t.items.$ref});return m.$refs=[...m.$refs,decodeURIComponent(t.items.$ref)],m.base=y.base,m.export="array",m.imports=[...m.imports,...y.imports],m.template=y.template,m.type=y.type,m.default=B(t,m),m}if(t.items.anyOf&&a&&a.type){let y=Cn(a);if(y&&y.definitions.some(h=>!fr(h).includes("array")))return ne({definition:t.items,openApi:o,parentDefinition:t,types:p})}let u=Array.isArray(t.items)?{anyOf:t.items}:t.items,d=ne({definition:u,openApi:o,parentDefinition:t,types:p});return m.base=d.base,m.export="array",m.$refs=[...m.$refs,...d.$refs],m.imports=[...m.imports,...d.imports],m.link=d,m.template=d.template,m.type=d.type,m.default=B(t,m),m}let l=Cn(t);if(l){let u=ga({...l,debug:e,definition:t,getModel:ne,model:m,openApi:o,types:p});return {...m,...u}}if(c.includes("object")||t.properties||t.additionalProperties){if(t.properties&&(Object.keys(t.properties).length>0||!t.additionalProperties)){if(m.base="unknown",m.export="interface",m.type="unknown",m.default=B(t,m),jn({debug:e,definition:t,getModel:ne,openApi:o,parent:m,types:p}).forEach(y=>{m.$refs=[...m.$refs,...y.$refs],m.enums=[...m.enums,...y.enums],m.imports=[...m.imports,...y.imports],m.properties=[...m.properties,y],y.export==="enum"&&(m.enums=[...m.enums,y]);}),t.additionalProperties){let y=Ks({debug:e,definition:t,getModel:ne,model:m,openApi:o,types:p});m.properties=[...m.properties,y];}return !m.properties.length&&m.base==="unknown"&&m.type==="unknown"&&(m.export="dictionary",m.name||(m.name="[key: string]")),m}return Ks({debug:e,definition:t,getModel:ne,model:m,openApi:o,types:p})}if(t.const!==void 0){let u=t.const,d=typeof u=="string"?`"${u}"`:`${u}`;return m.base=d,m.export="const",m.type=d,m}if(c.length){let u=P({format:t.format,type:t.type});return m.base=u.base,m.export="generic",m.$refs=[...m.$refs,...u.$refs],m.imports=[...m.imports,...u.imports],m.isNullable=u.isNullable||m.isNullable,m.template=u.template,m.type=u.type,m.default=B(t,m),m}return m};var En=e=>{if(e.schema)return e.schema;if(e.content){let t=Object.entries(e.content);for(let[r,n]of t)if(n.schema){let s=r;return e.content[s].schema}}};var xa=e=>{let t={},r=[];return e.components?(Object.entries(e.components.schemas??{}).forEach(([n,s])=>{let o=hn(n);t[o.name]=o;let a=ne({definition:s,isDefinition:true,meta:o,openApi:e,types:t});r=[...r,a];}),Object.entries(e.components.parameters??{}).forEach(([n,s])=>{let o=En(s);if(!o)return;let a=na(n);t[a.name]=a;let p=ne({definition:o,isDefinition:true,meta:a,openApi:e,types:t});p.deprecated=s.deprecated,p.description=s.description||null,r=[...r,p];}),{models:r,types:t}):{models:r,types:t}};var ba=({openApi:e,parameter:t,types:r})=>{let n={$refs:[],base:"unknown",deprecated:t.deprecated===true,description:t.description||null,enum:[],enums:[],export:"interface",imports:[],in:t.in,isDefinition:false,isNullable:Tt(t),isReadOnly:false,isRequired:t.required===true,link:null,mediaType:null,prop:t.name,properties:[],template:null,type:"unknown"},s={...n,name:Rn(n)};if(t.$ref){let a=P({type:t.$ref});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,export:"reference",imports:[...s.imports,...a.imports],template:a.template,type:a.type},s}let o=En(t);if(o){if(o.$ref?.startsWith(cr)&&(o=_(e,o)),o.$ref){let p=P({type:o.$ref});return s={...s,$refs:[...s.$refs,...p.$refs],base:p.base,export:"reference",imports:[...s.imports,...p.imports],template:p.template,type:p.type},s.default=B(o),s}let a=ne({definition:o,openApi:e,types:r});return s={...s,$refs:[...s.$refs,...a.$refs],base:a.base,enum:[...s.enum,...a.enum],enums:[...s.enums,...a.enums],exclusiveMaximum:a.exclusiveMaximum,exclusiveMinimum:a.exclusiveMinimum,export:a.export,format:a.format,imports:[...s.imports,...a.imports],isNullable:s.isNullable||a.isNullable,isReadOnly:a.isReadOnly,isRequired:s.isRequired||a.isRequired,link:a.link,maxItems:a.maxItems,maxLength:a.maxLength,maxProperties:a.maxProperties,maximum:a.maximum,minItems:a.minItems,minLength:a.minLength,minProperties:a.minProperties,minimum:a.minimum,multipleOf:a.multipleOf,pattern:X(a.pattern),properties:[...s.properties,...a.properties],template:a.template,type:a.type,uniqueItems:a.uniqueItems},(s.enum.length||s.enums.length)&&!s.meta&&(s.meta=yn(s)),s.default=a.default,s}return s};var Tf=["cookie","formData","header","path","query"],kn=({openApi:e,parameters:t,types:r})=>{let n={$refs:[],imports:[],parameters:[],parametersBody:null,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[]};return t.forEach(s=>{let o=_(e,s),a=ba({openApi:e,parameter:o,types:r}),p=!Tn(a);if(!(!Tf.includes(o.in)||p)){switch(o.in){case "cookie":n.parametersCookie=[...n.parametersCookie,a];break;case "formData":n.parametersForm=[...n.parametersForm,a];break;case "header":n.parametersHeader=[...n.parametersHeader,a];break;case "path":n.parametersPath=[...n.parametersPath,a];break;case "query":n.parametersQuery=[...n.parametersQuery,a];break}n.$refs=[...n.$refs,...a.$refs],n.imports=[...n.imports,...a.imports],n.parameters=[...n.parameters,a];}}),n};var Rf=["application/json-patch+json","application/json","application/ld+json","application/x-www-form-urlencoded","multipart/batch","multipart/form-data","multipart/mixed","multipart/related","text/json","text/plain"],Nn=(e,t)=>{let r=Object.keys(t).filter(s=>{let o=s.split(";")[0].trim();return Rf.includes(o)}).find(s=>!!t[s]?.schema);if(r)return {mediaType:r,schema:t[r].schema};let n=Object.keys(t).find(s=>!!t[s]?.schema);if(n)return {mediaType:n,schema:t[n].schema}};var Oa=({body:e,debug:t,openApi:r,types:n})=>{let s=e["x-body-name"]??"requestBody",o={$refs:[],base:"unknown",default:void 0,description:e.description||null,enum:[],enums:[],export:"interface",imports:[],in:"body",isDefinition:false,isNullable:e.nullable===true,isReadOnly:false,isRequired:e.required===true,link:null,mediaType:null,name:s,prop:s,properties:[],template:null,type:"unknown"};if(!e.content)return o;let a=Nn(r,e.content);if(!a)return o;switch(o.mediaType=a.mediaType,o.mediaType){case "application/x-www-form-urlencoded":case "multipart/form-data":o.in="formData",o.name="formData",o.prop="formData";break}if(a.schema.$ref){let c=P({type:a.schema.$ref});return o.export="reference",o.type=c.type,o.base=c.base,o.template=c.template,o.$refs=[...o.$refs,...c.$refs],o.imports=[...o.imports,...c.imports],o}let p=ne({debug:t,definition:a.schema,openApi:r,types:n});return o.$refs=[...o.$refs,...p.$refs],o.base=p.base,o.enum=[...o.enum,...p.enum],o.enums=[...o.enums,...p.enums],o.exclusiveMaximum=p.exclusiveMaximum,o.exclusiveMinimum=p.exclusiveMinimum,o.export=p.export,o.format=p.format,o.imports=[...o.imports,...p.imports],o.isNullable=o.isNullable||p.isNullable,o.isReadOnly=p.isReadOnly,o.isRequired=o.isRequired||p.isRequired,o.link=p.link,o.maximum=p.maximum,o.maxItems=p.maxItems,o.maxLength=p.maxLength,o.maxProperties=p.maxProperties,o.minimum=p.minimum,o.minItems=p.minItems,o.minLength=p.minLength,o.minProperties=p.minProperties,o.multipleOf=p.multipleOf,o.pattern=X(p.pattern),o.properties=[...o.properties,...p.properties],o.template=p.template,o.type=p.type,o.uniqueItems=p.uniqueItems,o};var Sa=({code:e,openApi:t,response:r,types:n})=>{let s={$refs:[],base:e!==204?"unknown":"void",code:e,description:r.description||null,enum:[],enums:[],export:"generic",imports:[],in:"response",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],responseTypes:[],template:null,type:e!==204?"unknown":"void"};if(r.content){let o=Nn(t,r.content);if(o){if(o.schema.$ref?.startsWith("#/components/responses/")&&(o.schema=_(t,o.schema)),o.schema.$ref){let p=P({type:o.schema.$ref});return s.base=p.base,s.export="reference",s.$refs=[...s.$refs,...p.$refs],s.imports=[...s.imports,...p.imports],s.template=p.template,s.type=p.type,s}let a=ne({definition:o.schema,openApi:t,types:n});return s.export=a.export,s.type=a.type,s.base=a.base,s.template=a.template,s.link=a.link,s.isReadOnly=a.isReadOnly,s.isRequired=a.isRequired,s.isNullable=a.isNullable,s.format=a.format,s.maximum=a.maximum,s.exclusiveMaximum=a.exclusiveMaximum,s.minimum=a.minimum,s.exclusiveMinimum=a.exclusiveMinimum,s.multipleOf=a.multipleOf,s.maxLength=a.maxLength,s.minLength=a.minLength,s.maxItems=a.maxItems,s.minItems=a.minItems,s.uniqueItems=a.uniqueItems,s.maxProperties=a.maxProperties,s.minProperties=a.minProperties,s.pattern=X(a.pattern),s.$refs=[...s.$refs,...a.$refs],s.imports=[...s.imports,...a.imports],s.enum=[...s.enum,...a.enum],s.enums=[...s.enums,...a.enums],s.properties=[...s.properties,...a.properties],s}}if(r.headers)for(let o in r.headers)return s.in="header",s.name=o,s.type="string",s.base="string",s;return s};var Ta=({openApi:e,responses:t,types:r})=>{let n=[];return Object.entries(t).forEach(([s,o])=>{let a=xn(s);if(!a)return;let p=_(e,o),c=Sa({code:a,openApi:e,response:p,types:r});n=[...n,c];}),n=In(n),n.sort(bn)};var ur=(e,t)=>{let r=[...e],n=[...t];for(;n.length>0;){let s=n[0];n=n.slice(1),r.every(a=>a.in!==s.in||a.name!==s.name)&&(r=[...r,s]);}return r},Ra=({debug:e,method:t,op:r,openApi:n,pathParams:s,types:o,url:a})=>{let p={$refs:[],deprecated:!!r.deprecated,description:r.description||null,id:r.operationId||null,imports:[],method:t.toUpperCase(),parameters:[],parametersBody:s.parametersBody,parametersCookie:[],parametersForm:[],parametersHeader:[],parametersPath:[],parametersQuery:[],path:a,responseHeader:null,responses:[],summary:r.summary||null,tags:r.tags||null},c={...p,name:Sn({config:S(),method:p.method,operationId:r.operationId,path:p.path})};if(r.parameters){let f=kn({openApi:n,parameters:r.parameters,types:o});c.$refs=[...c.$refs,...f.$refs],c.imports=[...c.imports,...f.imports],c.parameters=[...c.parameters,...f.parameters],c.parametersBody=f.parametersBody,c.parametersCookie=[...c.parametersCookie,...f.parametersCookie],c.parametersForm=[...c.parametersForm,...f.parametersForm],c.parametersHeader=[...c.parametersHeader,...f.parametersHeader],c.parametersPath=[...c.parametersPath,...f.parametersPath],c.parametersQuery=[...c.parametersQuery,...f.parametersQuery];}if(r.requestBody){let f=_(n,r.requestBody),m=Oa({body:f,debug:e,openApi:n,types:o});c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports],c.parameters=[...c.parameters,m],c.parametersBody=m;}if(r.responses){c.responses=Ta({openApi:n,responses:r.responses,types:o});let f=c.responses.filter(m=>m.responseTypes.includes("success"));c.responseHeader=gn(f),f.forEach(m=>{c.$refs=[...c.$refs,...m.$refs],c.imports=[...c.imports,...m.imports];});}return c.parameters=ur(c.parameters,s.parameters),c.parametersCookie=ur(c.parametersCookie,s.parametersCookie),c.parametersForm=ur(c.parametersForm,s.parametersForm),c.parametersHeader=ur(c.parametersHeader,s.parametersHeader),c.parametersPath=ur(c.parametersPath,s.parametersPath),c.parametersQuery=ur(c.parametersQuery,s.parametersQuery),c.parameters=Pn(c.parameters),c};var Ia=({openApi:e,types:t})=>{let r=new Map,n=[],s=S();for(let o in e.paths){let a=e.paths[o],p=kn({openApi:e,parameters:a.parameters??[],types:t});for(let c in a){let f=c,m=v({method:f,path:o});if(cn.includes(f)){let l=a[f];if(l.operationId&&(r.has(l.operationId)?s.logs.level!=="silent"&&console.warn(`\u2757\uFE0F Duplicate operationId: ${l.operationId} in ${m}. Please ensure your operation IDs are unique. This behavior is not supported and will likely lead to unexpected results.`):r.set(l.operationId,m)),On({config:s,operationKey:m})){let u=Ra({method:f,op:l,openApi:e,pathParams:p,types:t,url:o});n.push(u);}}}}return n};var Aa=e=>{let t=e.servers?.[0],r=t?.variables||{},n=t?.url||"";return Object.entries(r).forEach(([s,o])=>{n=n.replace(`{${s}}`,o.default);}),n.replace(/\/$/g,"")};var Pa=e=>{let t=mn(e.info.version),r=Aa(e),{models:n,types:s}=xa(e),o=Ia({openApi:e,types:s});return {models:n,operations:o,server:r,types:s,version:t}};function RT({openApi:e}){let t=e;if("openapi"in t)return Pa(t);if("swagger"in t)return ua(t);throw new Error(`Unsupported OpenAPI specification: ${JSON.stringify(t,null,2)}`)}var IT=({config:e,spec:t})=>{let r=new tn({config:e,spec:t});if("swagger"in r.spec)return ws(r),r;switch(r.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":return Ms(r),r;case "3.1.0":case "3.1.1":return Fs(r),r;}throw new Error("Unsupported OpenAPI specification")};var ja=e=>{let t={file:true,level:"info",path:process.cwd()};return typeof e?.logs=="string"?t.path=e.logs:t={...t,...e?.logs},t};var A=e=>t=>({...e,config:{...e.config,...t}});var Rt={baseUrl:true,bundle:true,exportFromIndex:false},It={dependencies:["@hey-api/typescript"],output:"client",tags:["client"]};var Pf=fileURLToPath(import.meta.url),Ca=Q.dirname(Pf),ka=e=>{let t=e.split(Q.sep);return t.slice(0,t.length-1).join(Q.sep)},Z=({config:e,sourceOutput:t})=>{let r=E(e);if("bundle"in r.config&&r.config.bundle)return Ht({moduleOutput:"client",sourceOutput:t});if(Q.isAbsolute(r.name)){let n=ka(r.name),s=Q.resolve(e.output.path);return Q.relative(s,n).replace(/\\/g,"/")}return r.name},H={Options:{asType:true,name:"Options"},OptionsLegacyParser:{asType:true,name:"OptionsLegacyParser"}},Ea=e=>{let t=At.readFileSync(e,"utf8");t=t.replace(/from\s+['"](\.\.?\/[^'"]*?)['"]/g,(r,n)=>{let s=n.lastIndexOf("/");return (s>=0?n.slice(s+1):n).includes(".")?r:`from '${n}.js'`}),At.writeFileSync(e,t,"utf8");},LT=({outputPath:e,plugin:t,tsConfig:r})=>{if(t.name.startsWith("@hey-api/client-")){let l=r?.options.moduleResolution===x.ModuleResolutionKind.NodeNext,u=Q.resolve(e,"core");rt(u);let d=Q.resolve(Ca,"clients","core");if(At.cpSync(d,u,{recursive:true}),l){let b=At.readdirSync(u);for(let w of b)Ea(Q.resolve(u,w));}let y=Q.resolve(e,"client");rt(y);let h=t.name.slice(16),I=Q.resolve(Ca,"clients",h);if(At.cpSync(I,y,{recursive:true}),l){let b=At.readdirSync(y);for(let w of b)Ea(Q.resolve(y,w));}return}let s="";if(Q.isAbsolute(t.name)&&(s=ka(t.name)),s){let l=Q.resolve(e,"client");rt(l),At.cpSync(s,l,{recursive:true});return}let a=Q.normalize(ci.resolve(t.name)).split(Q.sep),p=a.slice(0,a.indexOf("dist")+1).join(Q.sep),f=[a[a.length-1],"index.d.ts","index.d.cts"],m=Q.resolve(e,"client");rt(m);for(let l of f)At.copyFileSync(Q.resolve(p,l),Q.resolve(m,l));};var pe=({case:e="PascalCase",config:t,id:r,parameterId:n,type:s})=>{let o="";switch(s){case "data":case "error":case "errors":case "parameter":case "response":case "responses":o=`${(s[0]??"").toLocaleUpperCase()}${s.slice(1)}`;break}let a=true;t.plugins["@hey-api/typescript"]?.config.identifierCase==="preserve"&&(a=false);let p=a?"-":"",c=[tr,j({case:e,value:r}),p,o];return n&&c.push(p,j({case:e,value:n})),c.join("")};var k="types";function jf(e,t){return {...e,get name(){return t?.(e),e.name}}}var Ee=({context:e,file:t,operation:r,type:n})=>{let s=e.file({id:k}).identifier({$ref:pe({config:e.config,id:r.id,type:n}),namespace:"type"});return jf(s,o=>{o.name&&t.import({asType:true,module:t.relativePathToFile({context:e,id:k}),name:o.name});})};var Cf=({plugin:e})=>{let{baseUrl:t}=e.config;if(t===false)return;if(typeof t=="string")return t;let{servers:r}=e.context.ir;if(r)return r[typeof t=="number"?t:0]?.url},Na=({plugin:e})=>{let t=e.context.file({id:ve}),r=Z({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({module:r,name:"createClient"}),s=t.import({module:r,name:"createConfig"}),o=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:k}),name:"ClientOptions"}),a=e.config.runtimeConfigPath?t.import({module:t.relativePathToFile({context:e.context,id:e.config.runtimeConfigPath}),name:"createClientConfig"}):void 0,p=[],c=Cf({plugin:e});if(c){let l=_e(c);if(l.protocol&&l.host&&!c.includes("{"))p.push({key:fe(e.context.config),value:c});else if(c!=="/"&&c.startsWith("/")){let u=c.endsWith("/")?c.slice(0,-1):c;p.push({key:fe(e.context.config),value:u});}}"throwOnError"in e.config&&e.config.throwOnError&&p.push({key:"throwOnError",value:true});let f=[i.callExpression({functionName:s.name,parameters:p.length?[i.objectExpression({obj:p})]:void 0,types:[i.typeReferenceNode({typeName:o.name})]})],m=i.constVariable({exportConst:true,expression:i.callExpression({functionName:n.name,parameters:a?[i.callExpression({functionName:a.name,parameters:f})]:f}),name:"client"});t.add(m);};var va=({plugin:e})=>{let t=e.context.file({id:ve}),r=Z({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({asType:true,module:t.relativePathToFile({context:e.context,id:k}),name:"ClientOptions"}),s=t.import({asType:true,module:r,name:"Config"}),o=t.import({alias:"DefaultClientOptions",asType:true,module:r,name:"ClientOptions"}),a=i.typeReferenceNode({typeName:o.name}),p=i.typeReferenceNode({typeName:"T"}),c=i.typeAliasDeclaration({comment:["The `createClientConfig()` function will be called on client initialization","and the returned object will become the client's initial configuration.","","You may want to initialize your client this way instead of calling","`setConfig()`. This is useful for example if you're using Next.js","to ensure your client always has the correct values."],exportType:true,name:"CreateClientConfig",type:i.functionTypeNode({parameters:[i.parameterDeclaration({name:"override",required:false,type:i.typeReferenceNode({typeArguments:[i.typeIntersectionNode({types:[a,p]})],typeName:s.name})})],returnType:i.typeReferenceNode({typeArguments:[i.typeIntersectionNode({types:[i.typeReferenceNode({typeArguments:[a],typeName:"Required"}),p]})],typeName:s.name})}),typeParameters:[{default:i.typeReferenceNode({typeName:n.name}),extends:a,name:"T"}]});t.add(c);};var Pt=({plugin:e})=>{e.createFile({id:ve,path:e.output}),va({plugin:e}),Na({plugin:e});};var vn={...It,config:{...Rt,throwOnError:false},handler:Pt,name:"@hey-api/client-axios"};var qn={...It,config:{...Rt,throwOnError:false},handler:Pt,name:"@hey-api/client-fetch"};var $n={...It,config:{...Rt,throwOnError:false},handler:Pt,name:"@hey-api/client-next"};var wn={...It,config:Rt,handler:Pt,name:"@hey-api/client-nuxt"};var Mn={config:{},handler:()=>{},name:"legacy/angular",output:"client",tags:["client"]};var Fn={config:{},handler:()=>{},name:"legacy/axios",output:"client",tags:["client"]};var Ln={config:{},handler:()=>{},name:"legacy/fetch",output:"client",tags:["client"]};var Dn={config:{},handler:()=>{},name:"legacy/node",output:"client",tags:["client"]};var Vn={config:{},handler:()=>{},name:"legacy/xhr",output:"client",tags:["client"]};var _n="schemas",Ws=({plugin:e,schema:t})=>{e.config.type==="form"&&(t.description&&delete t.description,t["x-enum-descriptions"]&&delete t["x-enum-descriptions"],t["x-enum-varnames"]&&delete t["x-enum-varnames"],t["x-enumNames"]&&delete t["x-enumNames"],t.title&&delete t.title);},dr=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>dr({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(n.$ref)return n.$ref=decodeURI(n.$ref),n;if(Ws({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=dr({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>dr({context:e,plugin:t,schema:s}))),n.items&&(n.items=dr({context:e,plugin:t,schema:n.items})),n.properties)for(let s in n.properties){let o=n.properties[s];typeof o!="boolean"&&(n.properties[s]=dr({context:e,plugin:t,schema:o}));}return n},jt=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>jt({context:e,plugin:t,schema:s}));let n=structuredClone(r);if("$ref"in n)return n.$ref=decodeURI(n.$ref),n;if(Ws({plugin:t,schema:n}),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=jt({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>jt({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>jt({context:e,plugin:t,schema:s}))),n.items&&(n.items=jt({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>jt({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let o=n.properties[s];typeof o!="boolean"&&(n.properties[s]=jt({context:e,plugin:t,schema:o}));}return n},ft=({context:e,plugin:t,schema:r})=>{if(Array.isArray(r))return r.map(s=>ft({context:e,plugin:t,schema:s}));let n=structuredClone(r);if(Ws({plugin:t,schema:n}),n.$ref&&(n.$ref=decodeURI(n.$ref)),n.additionalProperties&&typeof n.additionalProperties!="boolean"&&(n.additionalProperties=ft({context:e,plugin:t,schema:n.additionalProperties})),n.allOf&&(n.allOf=n.allOf.map(s=>ft({context:e,plugin:t,schema:s}))),n.anyOf&&(n.anyOf=n.anyOf.map(s=>ft({context:e,plugin:t,schema:s}))),n.items&&(n.items=ft({context:e,plugin:t,schema:n.items})),n.oneOf&&(n.oneOf=n.oneOf.map(s=>ft({context:e,plugin:t,schema:s}))),n.prefixItems&&(n.prefixItems=n.prefixItems.map(s=>ft({context:e,plugin:t,schema:s}))),n.properties)for(let s in n.properties){let o=n.properties[s];typeof o!="boolean"&&(n.properties[s]=ft({context:e,plugin:t,schema:o}));}return n},Hs=({name:e,plugin:t,schema:r})=>{let n="";return t.config.nameBuilder&&(typeof t.config.nameBuilder=="function"?n=t.config.nameBuilder(e,r):n=t.config.nameBuilder.replace("{{name}}",e)),n||(n=`${e}Schema`),Zr(n)},Lf=({context:e,plugin:t})=>{if(e.spec.definitions)for(let r in e.spec.definitions){let n=e.spec.definitions[r],s=dr({context:e,plugin:t,schema:n}),o=i.constVariable({assertion:"const",exportConst:true,expression:i.objectExpression({obj:s}),name:Hs({name:r,plugin:t,schema:n})});e.file({id:_n}).add(o);}},Df=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=jt({context:e,plugin:t,schema:n}),o=i.constVariable({assertion:"const",exportConst:true,expression:i.objectExpression({obj:s}),name:Hs({name:r,plugin:t,schema:n})});e.file({id:_n}).add(o);}},Vf=({context:e,plugin:t})=>{if(e.spec.components)for(let r in e.spec.components.schemas){let n=e.spec.components.schemas[r],s=ft({context:e,plugin:t,schema:n}),o=i.constVariable({assertion:"const",exportConst:true,expression:i.objectExpression({obj:s}),name:Hs({name:r,plugin:t,schema:n})});e.file({id:_n}).add(o);}},qa=({plugin:e})=>{if(e.createFile({id:_n,path:e.output}),"swagger"in e.context.spec){Lf({context:e.context,plugin:e});return}switch(e.context.spec.openapi){case "3.0.0":case "3.0.1":case "3.0.2":case "3.0.3":case "3.0.4":Df({context:e.context,plugin:e});break;case "3.1.0":case "3.1.1":Vf({context:e.context,plugin:e});break;default:throw new Error("Unsupported OpenAPI specification")}};var Qs=(e,t)=>{let r=S();if(Array.isArray(e))return e.map(s=>Qs(s));if(typeof e!="object"||e===null)return e;let n={...e};return Object.entries(n).forEach(([s,o])=>{if(r.plugins["@hey-api/schemas"]?.config.type==="form"&&["description","x-enum-descriptions","x-enum-varnames","x-enumNames","title"].includes(s)&&t!=="properties"){delete n[s];return}s==="$ref"&&typeof o=="string"&&(n[s]=decodeURIComponent(o)),o&&typeof o=="object"&&(n[s]=Qs(o,s));}),n},_f=(e,t)=>{let r=S(),n=Ce(e),s=r.plugins["@hey-api/schemas"];return s?.config.nameBuilder?typeof s.config.nameBuilder=="function"?s.config.nameBuilder(n,t):s.config.nameBuilder.replace("{{name}}",n):`${n}Schema`},$a=({files:e,openApi:t,plugin:r})=>{let n=S();e.schemas=new Fe({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"schemas",name:"schemas.ts"});let s=(o,a)=>{let p=Qs(a),c=i.objectExpression({obj:p}),f=i.constVariable({assertion:"const",exportConst:true,expression:c,name:_f(o,a)});e.schemas.add(f);};"swagger"in t&&Object.entries(t.definitions??{}).forEach(([o,a])=>{s(o,a);}),"openapi"in t&&Object.entries(t.components?.schemas??{}).forEach(([o,a])=>{s(o,a);});};var Bn={config:{exportFromIndex:false,nameBuilder:e=>`${e}Schema`,type:"json"},handler:qa,handlerLegacy:$a,name:"@hey-api/schemas",output:"schemas"};var lt=({operation:e})=>{let t=[];return e.summary&&t.push(V(e.summary)),e.description&&t.push(V(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0},Bt=({context:e,operation:t})=>{let n=E(e.config).name==="@hey-api/client-nuxt",s=e.config.plugins["@hey-api/sdk"];return s&&!s.config.client&&!s.config.instance||n||nn(t)};var yr="TComposable",Ue="DefaultT",zs="ResT",ce="sdk";var Kf=({dataExpression:e})=>{let t=e!==void 0?i.callExpression({functionName:"BigInt",parameters:[i.callExpression({functionName:i.propertyAccessExpression({expression:e,name:"toString"})})]}):void 0;if(t){if(typeof e=="string")return [t];if(e)return [i.assignment({left:e,right:t})]}return []},Wf=({dataExpression:e})=>{let t=i.identifier({text:"Date"});return typeof e=="string"?[i.newExpression({argumentsArray:[i.identifier({text:e})],expression:t})]:e?[i.assignment({left:e,right:i.newExpression({argumentsArray:[e],expression:t})})]:[]},Kn=({id:e,type:t})=>{let r="";switch(t){case "data":r="DataResponseTransformer";break;case "error":r="ErrorResponseTransformer";break;case "response":r="ResponseTransformer";break}return `${tr}${j({case:"camelCase",value:e})}${r}`},Hf=({$ref:e,type:t})=>{let r="";switch(t){case "response":r="SchemaResponseTransformer";break}let n=e.split("/");return `${n.slice(0,n.length-1).join("/")}/${j({case:"camelCase",value:n[n.length-1]})}${r}`},wa=({$ref:e})=>Hf({$ref:e,type:"response"}),kr="transformers",Wn="data",Cr=e=>e.map(t=>x.isStatement(t)?t:i.expressionToStatement({expression:t})),Fa=({node:e})=>e.kind===x.SyntaxKind.ReturnStatement,La=({plugin:e,schema:t})=>{let r=i.identifier({text:Wn}),n=Er({dataExpression:r,plugin:e,schema:t});return n.length&&!Fa({node:n[n.length-1]})&&n.push(i.returnStatement({expression:r})),n},Er=({dataExpression:e,plugin:t,schema:r})=>{let n=t.context.file({id:kr});if(r.$ref){let s=n.identifier({$ref:wa({$ref:r.$ref}),create:true,namespace:"value"});if(s.created&&s.name){let o=t.context.resolveIrRef(r.$ref),a=La({plugin:t,schema:o});if(a.length){let p=i.constVariable({expression:i.arrowFunction({async:false,multiLine:true,parameters:[{name:Wn,type:i.keywordTypeNode({keyword:"any"})}],statements:Cr(a)}),name:s.name});n.add(p);}else s=n.blockIdentifier({$ref:wa({$ref:r.$ref}),namespace:"value"});}if(s.name){let o=i.callExpression({functionName:s.name,parameters:[e]});if(e)return typeof e=="string"&&e==="item"?[i.returnStatement({expression:o})]:[typeof e=="string"?o:i.assignment({left:e,right:o})]}return []}if(r.type==="array"){if(!e||typeof e=="string")return [];let s=r.items?Er({dataExpression:"item",plugin:t,schema:r.items?.[0]?r.items[0]:{...r,type:void 0}}):[];if(!s.length)return [];let o=Cr(s);return o.some(p=>Fa({node:p}))||o.push(i.returnStatement({expression:i.identifier({text:"item"})})),[i.assignment({left:e,right:i.callExpression({functionName:i.propertyAccessExpression({expression:e,name:"map"}),parameters:[i.arrowFunction({multiLine:true,parameters:[{name:"item",type:"any"}],statements:o})]})})]}if(r.type==="object"){let s=[],o=r.required??[];for(let a in r.properties){let p=r.properties[a],c=i.propertyAccessExpression({expression:e||Wn,name:a}),f=Er({dataExpression:c,plugin:t,schema:p});if(!f.length)continue;let m=!p.items?.find(u=>u.type==="null");o.includes(a)&&m?s=s.concat(f):s.push(i.ifStatement({expression:c,thenStatement:i.block({statements:Cr(f)})}));}return s}if(t.config.dates&&r.type==="string"&&(r.format==="date"||r.format==="date-time"))return Wf({dataExpression:e});if(t.config.bigInt&&r.type==="integer"&&r.format==="int64")return Kf({dataExpression:e});if(r.items){if(r.items.length===1)return Er({dataExpression:"item",plugin:t,schema:r.items[0]});let s=[];if(r.logicalOperator==="and"||r.items.length===2&&r.items.find(o=>o.type==="null"||o.type==="void")){for(let o of r.items){let a=Er({dataExpression:e||"item",plugin:t,schema:o});if(a.length)if(e)s=s.concat(a);else {let p=i.identifier({text:"item"});s.push(i.ifStatement({expression:p,thenStatement:i.block({statements:Cr(a)})}),i.returnStatement({expression:p}));}}return s}r.type!=="enum"&&((r.items??[]).every(o=>["boolean","integer","null","number","string"].includes(o.type))||console.warn(`\u2757\uFE0F Transformers warning: schema ${JSON.stringify(r)} is too complex and won't be currently processed. This will likely produce an incomplete transformer which is not what you want. Please open an issue if you'd like this improved https://github.com/hey-api/openapi-ts/issues`));}return []},Da=({plugin:e})=>{let t=e.createFile({id:kr,path:e.output});e.forEach("operation",({operation:r})=>{let{response:n}=Le(r);if(!n)return;if(n.items&&n.items.length>1){e.context.config.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(r)} has ${n.items.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);return}let s=e.context.file({id:k}).identifier({$ref:pe({config:e.context.config,id:r.id,type:"response"}),namespace:"type"});if(!s.name)return;let o=t.identifier({$ref:Kn({id:r.id,type:"response"}),create:true,namespace:"value"});if(!o.name)return;let a=La({plugin:e,schema:n});if(a.length){t.import({asType:true,module:t.relativePathToFile({context:e.context,id:k}),name:s.name});let p=i.constVariable({exportConst:true,expression:i.arrowFunction({async:true,multiLine:true,parameters:[{name:Wn,type:i.keywordTypeNode({keyword:"any"})}],returnType:i.typeReferenceNode({typeArguments:[i.typeReferenceNode({typeName:s.name})],typeName:"Promise"}),statements:Cr(a)}),name:o.name});t.add(p);}else o=t.blockIdentifier({$ref:Kn({id:r.id,type:"response"}),namespace:"value"});});};var Qf=({securitySchemeObject:e})=>{if(e.type==="openIdConnect")return {scheme:"bearer",type:"http"};if(e.type==="oauth2")return e.flows.password||e.flows.authorizationCode||e.flows.clientCredentials||e.flows.implicit?{scheme:"bearer",type:"http"}:void 0;if(e.type==="apiKey")return e.in==="header"?{name:e.name,type:"apiKey"}:e.in==="query"||e.in=="cookie"?{in:e.in,name:e.name,type:"apiKey"}:void 0;if(e.type==="http"){let t=e.scheme.toLowerCase();return t==="bearer"||t==="basic"?{scheme:t,type:"http"}:void 0}},Va=({operation:e,plugin:t})=>{if(!e.security||!t.config.auth)return [];let r=[];for(let n of e.security){let s=Qf({securitySchemeObject:n});s?r.push(s):console.warn(`\u2757\uFE0F SDK warning: unsupported security scheme. Please open an issue if you'd like it added https://github.com/hey-api/openapi-ts/issues
${JSON.stringify(n,null,2)}`);}return r};var _a=({operation:e,plugin:t})=>{if(!t.config.validator.request)return;let r=t.getPlugin(t.config.validator.request);if(!(!r||!r.api.createRequestValidator))return r.api.createRequestValidator({file:t.context.file({id:ce}),operation:e,plugin:r})},Ba=({operation:e,plugin:t})=>{if(!t.config.validator.response)return;let r=t.getPlugin(t.config.validator.response);if(!(!r||!r.api.createResponseValidator))return r.api.createResponseValidator({file:t.context.file({id:ce}),operation:e,plugin:r})};var Ka=({context:e,value:t})=>{let r=j({case:"PascalCase",value:nt(t)});return mr({config:e.config,name:r})},zf=({operation:e,plugin:t})=>t.config.methodNameBuilder?t.config.methodNameBuilder(e):!t.config.asClass&&e.id.match(oe)?`${e.id}_`:e.id,Hn=({context:e,operation:t,plugin:r})=>{let n=new Map,s,o,a=[];if(r.config.classStructure==="auto"&&t.operationId&&(a=t.operationId.split(/[./]/).filter(Boolean),a.length>1)){let c=a.pop();o=j({case:"camelCase",value:nt(c)}),s=a.pop();}let p=r.config.instance?[r.config.instance]:t.tags??["default"];for(let c of p){let f=Ka({context:e,value:s||c});n.set(c,{className:f,methodName:o||zf({operation:t,plugin:r}),path:(s?[c,...a,s]:[c]).map(m=>Ka({context:e,value:m}))});}return n},Nr=({context:e,file:t,operation:r,throwOnError:n})=>{let o=E(e.config).name==="@hey-api/client-nuxt",a=Ee({context:e,file:t,operation:r,type:"data"}),p=Ee({context:e,file:t,operation:r,type:o?"response":"responses"}),c=H.Options.name;return o?`${c}<${yr}, ${a.name||"unknown"}, ${p.name||"unknown"}, ${Ue}>`:n?`${c}<${a.name||"unknown"}, ${n}>`:a.name?`${c}<${a.name}>`:c},Uf=e=>{if(!e)return;let t=e.split(";")[0]?.trim();if(t){if(t.startsWith("application/json")||t.endsWith("+json"))return "json";if(["application/","audio/","image/","video/"].some(r=>t.startsWith(r)))return "blob";if(t.startsWith("text/"))return "text"}},Us=({context:e,isRequiredOptions:t,operation:r,plugin:n})=>{let s=e.file({id:ce}),o=s.nameWithoutExtension(),a=E(e.config),p=a.name==="@hey-api/client-nuxt",c=Ee({context:e,file:s,operation:r,type:p?"error":"errors"}),f=Ee({context:e,file:s,operation:r,type:p?"response":"responses"}),m=[];if(r.body)switch(r.body.type){case "form-data":m.push({spread:"formDataBodySerializer"}),s.import({module:Z({config:e.config,sourceOutput:o}),name:"formDataBodySerializer"});break;case "json":break;case "text":case "octet-stream":m.push({key:"bodySerializer",value:null});break;case "url-search-params":m.push({spread:"urlSearchParamsBodySerializer"}),s.import({module:Z({config:e.config,sourceOutput:o}),name:"urlSearchParamsBodySerializer"});break}for(let L in r.parameters?.query){let M=r.parameters.query[L];if((M.schema.type==="array"||M.schema.type==="tuple")&&(M.style!=="form"||!M.explode)){m.push({key:"querySerializer",value:[{key:"array",value:[{key:"explode",value:false},{key:"style",value:"form"}]}]});break}}let l=_a({operation:r,plugin:n});if(l&&m.push({key:"requestValidator",value:l}),n.config.transformer==="@hey-api/transformers"){let L=e.file({id:kr}).identifier({$ref:Kn({id:r.id,type:"response"}),namespace:"value"});L.name&&(s.import({module:s.relativePathToFile({context:e,id:kr}),name:L.name}),m.push({key:"responseTransformer",value:L.name}));}if(a.name==="@hey-api/client-axios"){for(let L in r.responses)if(vs({statusCode:L})==="2XX"){let M=r.responses[L],Ae=Uf(M?.mediaType);if(Ae){m.push({key:"responseType",value:Ae});break}}}let u=Ba({operation:r,plugin:n});u&&m.push({key:"responseValidator",value:u}),n.config.responseStyle==="data"&&m.push({key:"responseStyle",value:n.config.responseStyle});let d=Va({operation:r,plugin:n});if(d.length&&m.push({key:"security",value:i.arrayLiteralExpression({elements:d})}),m.push({key:"url",value:r.path}),m.push({spread:"options"}),r.body){let L=r.parameters?.header?.["content-type"];if(!!!L?.required){let Ae=i.propertyAccessExpression({expression:i.identifier({text:"options"}),isOptional:!t,name:"headers"});m.push({key:"headers",value:[{key:L?.name??"Content-Type",value:r.body.type==="form-data"?null:r.body.mediaType},{spread:Ae}]});}}let y=f.name||"unknown",h=c.name||"unknown",I=n.config.client?s.import({alias:"_heyApiClient",module:s.relativePathToFile({context:e,id:ve}),name:"client"}):void 0,b=i.propertyAccessExpression({expression:i.identifier({text:"options"}),isOptional:!t,name:"client"}),w;n.config.instance?w=i.binaryExpression({left:b,operator:"??",right:i.propertyAccessExpression({expression:i.this(),name:"_client"})}):I?.name?w=i.binaryExpression({left:b,operator:"??",right:i.identifier({text:I.name})}):w=b;let C=[];return p?C.push(yr,`${y} | ${Ue}`,h,Ue):C.push(y,h,"ThrowOnError"),n.config.responseStyle==="data"&&C.push(i.stringLiteral({text:n.config.responseStyle})),[i.returnFunctionCall({args:[i.objectExpression({identifiers:["responseTransformer"],obj:m})],name:i.propertyAccessExpression({expression:w,name:i.identifier({text:r.method})}),types:C})]};var Kt=({meta:e,onImport:t,...r})=>{if(!e)return {created:false,name:""};let{created:n,name:s}=Re({meta:e,...r});return s&&t(s),{created:n,name:s}},Ua=e=>`${e}ModelResponseTransformer`,Wt=e=>`${j({case:"PascalCase",value:e})}Data`,hr=e=>`${j({case:"PascalCase",value:e})}Error`,Xs=e=>`${e}Transformer`,Xe=e=>`${j({case:"PascalCase",value:e})}Response`,Gs=({importedType:e,throwOnError:t})=>{let r=H.OptionsLegacyParser.name;return t?`${r}<${e||"unknown"}, ${t}>`:e?`${r}<${e}>`:r},Wa=(e,t)=>{let r=S(),{name:n}=Re({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Wt}),s=ze(t.parameters);if(!K(r))return [{isRequired:s,name:"options",type:Gs({importedType:n,throwOnError:"ThrowOnError"})}];if(!t.parameters.length)return [];let o=a=>{if(a.default!==void 0)return JSON.stringify(a.default,null,4)};return r.useOptions?[{default:s?void 0:{},name:"data",type:n}]:t.parameters.map(a=>{let p=`${n}['${a.name}']`;return {default:a?.default,isRequired:(!a.isRequired&&!o(a)?"?":"")=="",name:a.name,type:p}})},Ha=(e,t)=>{let r=S(),n=i.typeNode("void");if(t.responses.filter(a=>a.responseTypes.includes("success")).length){let{name:a}=Re({client:e,meta:{$ref:t.name,name:t.name},nameTransformer:Xe});n=i.typeUnionNode({types:[a]});}return r.useOptions&&r.plugins["@hey-api/sdk"]?.config.response==="response"&&(n=i.typeNode("ApiResult",[n])),E(r).name==="legacy/angular"?n=i.typeNode("Observable",[n]):n=i.typeNode("CancelablePromise",[n]),n},Qa=e=>{let t=S();if(!K(t))return [e.deprecated&&"@deprecated",e.summary&&V(e.summary),e.description&&V(e.description)];let r=[];e.parameters.length&&(t.useOptions?r=["@param data The data for the request.",...e.parameters.map(o=>`@param data.${o.name} ${o.description?V(o.description):""}`)]:r=e.parameters.map(o=>`@param ${o.name} ${o.description?V(o.description):""}`));let n=e.responses.filter(o=>o.responseTypes.includes("success"));return [e.deprecated&&"@deprecated",e.summary&&V(e.summary),e.description&&V(e.description),...r,...n.map(o=>`@returns ${o.type} ${o.description?V(o.description):""}`),"@throws ApiError"]},Xf=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=S(),o=Xe(n.name),{name:a}=Re({client:e,meta:{$ref:`transformers/${o}`,name:o},nameTransformer:Xs});if(a&&r(a),!K(s)){let m=[{spread:"options"}],u=n.parameters.filter(d=>d.in==="body"||d.in==="formData").map(d=>d.mediaType||(d.in==="formData"?"multipart/form-data":void 0)).filter(Boolean).filter(He);return u.length===1&&(u[0]==="multipart/form-data"&&(m=[...m,{spread:"formDataBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:null},{spread:"options?.headers"}]}],t?.("formDataBodySerializer")),u[0]==="application/x-www-form-urlencoded"&&(m=[...m,{spread:"urlSearchParamsBodySerializer"},{key:"headers",value:[{key:"Content-Type",value:u[0]},{spread:"options?.headers"}]}],t?.("urlSearchParamsBodySerializer"))),m=[...m,{key:"url",value:n.path}],a&&(m=[...m,{key:"responseTransformer",value:a}]),i.objectExpression({identifiers:["responseTransformer"],obj:m})}let p=m=>m.reduce((l,u)=>{let d=u.prop,y=s.useOptions?`data.${u.name}`:u.name;return d===y?l[d]=d:ge(d)===d?l[d]=y:l[`'${d}'`]=y,l},{}),c={method:n.method,url:n.path};n.parametersPath.length&&(c.path=p(n.parametersPath)),n.parametersCookie.length&&(c.cookies=p(n.parametersCookie)),n.parametersHeader.length&&(c.headers=p(n.parametersHeader)),n.parametersQuery.length&&(c.query=p(n.parametersQuery)),n.parametersForm.length&&(c.formData=p(n.parametersForm)),n.parametersBody&&(n.parametersBody.in==="formData"&&(s.useOptions?c.formData=`data.${n.parametersBody.name}`:c.formData=n.parametersBody.name),n.parametersBody.in==="body"&&(s.useOptions?c.body=`data.${n.parametersBody.name}`:c.body=n.parametersBody.name)),n.parametersBody?.mediaType&&(c.mediaType=n.parametersBody?.mediaType),n.responseHeader&&(c.responseHeader=n.responseHeader),a&&(c.responseTransformer=a);let f=n.responses.filter(m=>m.responseTypes.includes("error"));if(f.length>0){let m={};f.forEach(l=>{m[l.code]=l.description??"";}),c.errors=m;}return i.objectExpression({identifiers:["body","cookies","formData","headers","path","query","responseTransformer"],obj:c,shorthand:true})},Ie=({config:e,handleIllegal:t,id:r,operation:n})=>e.plugins["@hey-api/sdk"]?.config.methodNameBuilder?e.plugins["@hey-api/sdk"].config.methodNameBuilder(n):t&&r.match(oe)?`${r}_`:r,za=({client:e,onClientImport:t,onImport:r,operation:n})=>{let s=S(),o=Xf({client:e,onClientImport:t,onImport:r,operation:n});if(!K(s)){let p=Re({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:hr}).name,f=n.responses.filter(m=>m.responseTypes.includes("success")).length?Re({client:e,meta:{$ref:n.name,name:n.name},nameTransformer:Xe}).name:"void";return [i.returnFunctionCall({args:[o],name:`(options?.client ?? client).${n.method.toLocaleLowerCase()}`,types:p&&f?[f,p,"ThrowOnError"]:p?["unknown",p,"ThrowOnError"]:f?[f,"unknown","ThrowOnError"]:[]})]}return kt(s)?[i.returnFunctionCall({args:[o],name:"this.httpRequest.request"})]:E(s).name==="legacy/angular"?[i.returnFunctionCall({args:["OpenAPI","this.http",o],name:"__request"})]:[i.returnFunctionCall({args:["OpenAPI",o],name:"__request"})]},Gf=({client:e,onClientImport:t,onImport:r,onNode:n,service:s})=>{let o=S(),a=E(o),p=K(o);for(let u of s.operations)u.parameters.length&&Kt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Wt,onImport:r}),p||Kt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:hr,onImport:r}),u.responses.filter(y=>y.responseTypes.includes("success")).length&&Kt({client:e,meta:{$ref:u.name,name:u.name},nameTransformer:Xe,onImport:r});let c={default:("throwOnError"in a.config?a.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"};if(!o.plugins["@hey-api/sdk"]?.config.asClass&&!kt(o)){for(let u of s.operations){let d={parameters:Wa(e,u),returnType:p?Ha(e,u):void 0,statements:za({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]},y=a.name==="legacy/angular"?i.anonymousFunction(d):i.arrowFunction(d),h=i.constVariable({comment:Qa(u),exportConst:true,expression:y,name:Ie({config:o,handleIllegal:true,id:u.name,operation:u})});n(h);}return}let f=s.operations.map(u=>i.methodDeclaration({accessLevel:"public",comment:Qa(u),isStatic:kt(o)===void 0&&a.name!=="legacy/angular",name:Ie({config:o,id:u.name,operation:u}),parameters:Wa(e,u),returnType:p?Ha(e,u):void 0,statements:za({client:e,onClientImport:t,onImport:r,operation:u}),types:p?void 0:[c]}));if(!f.length)return;kt(o)?f=[i.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"httpRequest",type:"BaseHttpRequest"}]}),...f]:a.name==="legacy/angular"&&(f=[i.constructorDeclaration({multiLine:false,parameters:[{accessLevel:"public",isReadOnly:true,name:"http",type:"HttpClient"}]}),...f]);let m=[];f.forEach((u,d)=>{d&&m.push(i.identifier({text:`
`})),m.push(u);});let l=i.classDeclaration({decorator:a.name==="legacy/angular"?{args:[{providedIn:"root"}],name:"Injectable"}:void 0,exportClass:true,name:mr({config:o,name:s.name}),nodes:m});n(l);},Xa=({client:e,files:t,plugin:r})=>{let n=S(),s=K(n),o="sdk";if(t.sdk=new Fe({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"sdk",name:`${o}.ts`}),!s)t.sdk.import({module:Z({config:n,sourceOutput:o}),name:"createClient"}),t.sdk.import({module:Z({config:n,sourceOutput:o}),name:"createConfig"}),t.sdk.import({...H.OptionsLegacyParser,module:Z({config:n,sourceOutput:o})});else if(E(n).name==="legacy/angular"?(t.sdk.import({module:"@angular/core",name:"Injectable"}),kt(n)||t.sdk.import({module:"@angular/common/http",name:"HttpClient"}),t.sdk.import({asType:true,module:"rxjs",name:"Observable"})):t.sdk.import({asType:true,module:"./core/CancelablePromise",name:"CancelablePromise"}),n.plugins["@hey-api/sdk"]?.config.response==="response"&&t.sdk.import({asType:true,module:"./core/ApiResult",name:"ApiResult"}),kt(n)){let p=E(n);t.sdk.import({asType:p.name!=="legacy/angular",module:"./core/BaseHttpRequest",name:"BaseHttpRequest"});}else t.sdk.import({module:"./core/OpenAPI",name:"OpenAPI"}),t.sdk.import({alias:"__request",module:"./core/request",name:"request"});if(!s){let a=E(n),p=i.constVariable({exportConst:true,expression:i.callExpression({functionName:"createClient",parameters:[i.callExpression({functionName:"createConfig",parameters:["throwOnError"in a&&a.throwOnError?i.objectExpression({obj:[{key:"throwOnError",value:true}]}):void 0]})]}),name:"client"});t.sdk.add(p);}for(let a of e.services)Gf({client:e,onClientImport:p=>{t.sdk.import({module:Z({config:n,sourceOutput:o}),name:p});},onImport:p=>{t.sdk.import({asType:!p.endsWith("Transformer"),module:`./${t.types.nameWithoutExtension()}`,name:p});},onNode:p=>{t.sdk.add(p);},service:a});};var Ga=({clientOptions:e,context:t,plugin:r})=>{let n=t.file({id:ce}),o=E(t.config).name==="@hey-api/client-nuxt",a=Z({config:t.config,sourceOutput:n.nameWithoutExtension()}),p=n.import({asType:true,module:a,name:"TDataShape"}),c=n.import({asType:true,module:a,name:"Client"}),f=i.typeAliasDeclaration({exportType:true,name:"Options",type:i.typeIntersectionNode({types:[i.typeReferenceNode({typeArguments:o?[i.typeReferenceNode({typeName:"TComposable"}),i.typeReferenceNode({typeName:"TData"}),i.typeReferenceNode({typeName:zs}),i.typeReferenceNode({typeName:Ue})]:[i.typeReferenceNode({typeName:"TData"}),i.typeReferenceNode({typeName:"ThrowOnError"})],typeName:e.name}),i.typeInterfaceNode({properties:[{comment:["You can provide a client instance returned by `createClient()` instead of","individual options. This might be also useful if you want to implement a","custom client."],isRequired:!r.config.client,name:"client",type:i.typeReferenceNode({typeName:c.name})},{comment:["You can pass arbitrary values through the `meta` object. This can be","used to access values that aren't defined as part of the SDK function."],isRequired:false,name:"meta",type:i.typeReferenceNode({typeArguments:[i.keywordTypeNode({keyword:"string"}),i.keywordTypeNode({keyword:"unknown"})],typeName:"Record"})}],useLegacyResolution:false})]}),typeParameters:o?[i.typeParameterDeclaration({constraint:i.typeReferenceNode({typeName:"Composable"}),name:"TComposable"}),i.typeParameterDeclaration({constraint:i.typeReferenceNode({typeName:p.name}),defaultType:i.typeReferenceNode({typeName:p.name}),name:"TData"}),i.typeParameterDeclaration({defaultType:i.keywordTypeNode({keyword:"unknown"}),name:zs}),i.typeParameterDeclaration({defaultType:i.keywordTypeNode({keyword:"undefined"}),name:Ue})]:[i.typeParameterDeclaration({constraint:i.typeReferenceNode({typeName:p.name}),defaultType:i.typeReferenceNode({typeName:p.name}),name:"TData"}),i.typeParameterDeclaration({constraint:i.keywordTypeNode({keyword:"boolean"}),defaultType:i.keywordTypeNode({keyword:"boolean"}),name:"ThrowOnError"})]});n.add(f);};var Zf=({plugin:e})=>{let t=i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:i.this(),name:"_client"}),operator:"=",right:i.propertyAccessExpression({expression:i.identifier({text:"args"}),name:"client"})})});return [i.propertyDeclaration({initializer:e.config.client?i.identifier({text:"_heyApiClient"}):void 0,modifier:"protected",name:"_client",type:x.factory.createTypeReferenceNode("Client")}),i.identifier({text:`
`}),i.constructorDeclaration({multiLine:true,parameters:[{isRequired:!e.config.client,name:"args",type:i.typeInterfaceNode({properties:[{isRequired:!e.config.client,name:"client",type:"Client"}],useLegacyResolution:false})}],statements:[e.config.client?i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"args"}),isOptional:true,name:"client"}),thenStatement:i.block({statements:[t]})}):t]})]},Yf=({plugin:e})=>{let t=E(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.context.file({id:ce}),s=new Map,o=new Set,a=e.config.instance?Zf({plugin:e}):[];e.forEach("operation",({operation:c})=>{let f=Bt({context:e.context,operation:c}),m=Ee({context:e.context,file:n,operation:c,type:"response"}),l=Hn({context:e.context,operation:c,plugin:e});for(let u of l.values())u.path.forEach((d,y)=>{s.has(d)||s.set(d,{className:d,classes:new Set,methods:new Set,nodes:[],root:!y});let h=u.path[y-1];if(h){let C=s.get(h);C.classes.add(d),s.set(h,C);}if(!(u.path.length===y+1))return;let b=s.get(d);if(b.methods.has(u.methodName))return;let w=i.methodDeclaration({accessLevel:"public",comment:lt({operation:c}),isStatic:!e.config.instance,name:u.methodName,parameters:[{isRequired:f,name:"options",type:Nr({context:e.context,file:n,operation:c,throwOnError:r?void 0:"ThrowOnError"})}],returnType:void 0,statements:Us({context:e.context,isRequiredOptions:f,operation:c,plugin:e}),types:r?[{extends:i.typeNode("Composable"),name:yr},{default:m.name?i.typeReferenceNode({typeName:m.name}):i.typeNode("undefined"),extends:m.name?i.typeReferenceNode({typeName:m.name}):void 0,name:Ue}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]});b.nodes.length?b.nodes.push(i.identifier({text:`
`}),w):b.nodes.push(w),b.methods.add(u.methodName),s.set(d,b);});});let p=c=>{if(o.has(c.className))return;if(c.classes.size)for(let m of c.classes){let l=s.get(m);p(l),c.nodes.push(i.propertyDeclaration({initializer:e.config.instance?i.newExpression({argumentsArray:e.config.instance?[i.objectExpression({multiLine:false,obj:[{key:"client",value:i.propertyAccessExpression({expression:i.this(),name:"_client"})}]})]:[],expression:i.identifier({text:l.className})}):i.identifier({text:l.className}),modifier:e.config.instance?void 0:"static",name:j({case:"camelCase",value:l.className})}));}let f=i.classDeclaration({exportClass:c.root,extendedClasses:e.config.instance?["_HeyApiClient"]:void 0,name:c.className,nodes:c.nodes});n.add(f),o.add(c.className);};if(a.length){let c=i.classDeclaration({exportClass:false,name:"_HeyApiClient",nodes:a});n.add(c);}for(let c of s.values())p(c);},el=({plugin:e})=>{let t=E(e.context.config),r=t.name==="@hey-api/client-nuxt",n=e.context.file({id:ce});e.forEach("operation",({operation:s})=>{let o=Bt({context:e.context,operation:s}),a=Ee({context:e.context,file:n,operation:s,type:"response"}),p=i.constVariable({comment:lt({operation:s}),exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:o,name:"options",type:Nr({context:e.context,file:n,operation:s,throwOnError:r?void 0:"ThrowOnError"})}],returnType:void 0,statements:Us({context:e.context,isRequiredOptions:o,operation:s,plugin:e}),types:r?[{extends:i.typeNode("Composable"),name:yr},{default:a.name?i.typeReferenceNode({typeName:a.name}):i.typeNode("undefined"),extends:a.name?i.typeReferenceNode({typeName:a.name}):void 0,name:Ue}]:[{default:("throwOnError"in t.config?t.config.throwOnError:false)??false,extends:"boolean",name:"ThrowOnError"}]}),name:Ie({config:e.context.config,handleIllegal:true,id:s.id,operation:s})});n.add(p);});},Ja=({plugin:e})=>{let t=e.createFile({id:ce,path:e.output}),r=Z({config:e.context.config,sourceOutput:t.nameWithoutExtension()}),n=t.import({...H.Options,alias:"ClientOptions",module:r});E(e.context.config).name==="@hey-api/client-nuxt"&&t.import({asType:true,module:r,name:"Composable"}),Ga({clientOptions:n,context:e.context,plugin:e}),e.config.asClass?Yf({plugin:e}):el({plugin:e});};var Qn={config:{asClass:false,auth:true,classStructure:"auto",client:true,exportFromIndex:true,instance:false,operationId:true,response:"body",responseStyle:"fields",transformer:false,validator:false},dependencies:["@hey-api/typescript"],handler:Ja,handlerLegacy:Xa,name:"@hey-api/sdk",output:"sdk",resolveConfig:(e,t)=>{e.config.client?(typeof e.config.client=="boolean"&&(e.config.client=t.pluginByTag("client",{defaultPlugin:"@hey-api/client-fetch"})),e.dependencies.add(e.config.client)):e.config.client=false,e.config.transformer?(typeof e.config.transformer=="boolean"&&(e.config.transformer=t.pluginByTag("transformer")),e.dependencies.add(e.config.transformer)):e.config.transformer=false,typeof e.config.validator!="object"&&(e.config.validator={request:e.config.validator,response:e.config.validator}),e.config.validator.request?(typeof e.config.validator.request=="boolean"&&(e.config.validator.request=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.request)):e.config.validator.request=false,e.config.validator.response?(typeof e.config.validator.response=="boolean"&&(e.config.validator.response=t.pluginByTag("validator")),e.dependencies.add(e.config.validator.response)):e.config.validator.response=false,e.config.instance?(typeof e.config.instance!="string"&&(e.config.instance="Sdk"),e.config.asClass=true):e.config.instance=false;}};var rl="$OpenApiTs",se={$refs:[],base:"",description:null,enum:[],enums:[],export:"interface",imports:[],in:"",isDefinition:false,isNullable:false,isReadOnly:false,isRequired:false,link:null,name:"",properties:[],template:null,type:""},nl=({comments:e,leadingComment:t,meta:r,obj:n,onNode:s,...o})=>{if(!r)return;let{created:a,name:p}=Re({create:true,meta:r,...o});if(a){let c=i.enumDeclaration({comments:e,leadingComment:t,name:p,obj:n});s(c);}},ut=({comment:e,meta:t,onCreated:r,onNode:n,type:s,...o})=>{if(!t)return {created:false,name:""};let a=Re({create:true,meta:t,...o}),{created:p,name:c}=a;if(p){let f=i.typeAliasDeclaration({comment:e,exportType:true,name:c,type:s});n(f),r?.(c);}return a},sl=e=>{let t=S(),r=[];Ya(e),e.model.enums.forEach(n=>t.plugins["@hey-api/typescript"]?.config.enums!=="typescript+namespace"?Za({...e,model:n}):il({...e,model:n,onNode:s=>{r.push(s);}})),r.length&&e.onNode(i.namespaceDeclaration({name:e.model.name,statements:r}));},Za=({client:e,model:t,onNode:r})=>{let n=S(),s={},o={};t.enum.forEach(p=>{let{key:c,value:f}=dn(p);s[c]=f;let m=p.customDescription||p.description;m&&(o[c]=[V(m)]);});let a=[t.description&&V(t.description),t.deprecated&&"@deprecated"];if(n.plugins["@hey-api/typescript"]?.config.enums==="typescript"||n.plugins["@hey-api/typescript"]?.config.enums==="typescript+namespace"){nl({client:e,comments:o,leadingComment:a,meta:t.meta,obj:s,onNode:r});return}ut({client:e,comment:a,meta:t.meta,onCreated:p=>{if(n.plugins["@hey-api/typescript"]?.config.enums==="javascript"){let c=i.objectExpression({multiLine:true,obj:Object.entries(s).map(([m,l])=>({comments:o[m],key:m,value:l})),unescape:true}),f=i.constVariable({assertion:"const",comment:a,exportConst:true,expression:c,name:p});r(f);}},onNode:r,type:ra(t.enum)});},il=({model:e,onNode:t})=>{let r={},n={};e.enum.forEach(s=>{let{key:o,value:a}=dn(s);r[o]=a;let p=s.customDescription||s.description;p&&(n[o]=[V(p)]);}),t(i.enumDeclaration({comments:n,leadingComment:[e.description&&V(e.description),e.deprecated&&"@deprecated"],name:e.meta?.name||e.name,obj:r}));},Ya=({client:e,model:t,onNode:r})=>{ut({client:e,comment:[t.description&&V(t.description),t.deprecated&&"@deprecated"],meta:t.meta,onNode:r,type:Te(t)});},ol=e=>{switch(e.model.export){case "all-of":case "any-of":case "one-of":case "interface":return sl(e);case "enum":return Za(e);default:return Ya(e)}},al=({client:e,onNode:t})=>{let r={},n=S();if(!n.plugins["@hey-api/sdk"]&&!n.plugins["@hey-api/typescript"]?.config.tree)return;let s=K(n);for(let a of e.services)for(let p of a.operations){if(!p.parameters.length&&!p.responses.length)continue;r[p.path]||(r[p.path]={});let c=r[p.path];c[p.method]||(c[p.method]={});let f=c[p.method];if(f.$ref=p.name,p.responses.length>0){if(f.res||(f.res={}),Array.isArray(f.res))continue;p.responses.forEach(l=>{f.res[l.code]=l;});}if(p.parameters.length>0){let l={mediaType:null,...se,in:"body",name:"body",prop:"body"},u=p.parameters.filter(b=>b.in==="body");u.length||(u=p.parameters.filter(b=>b.in==="formData")),u.length===1?l={...se,...u[0],in:"body",isRequired:u[0].isRequired,name:"body",prop:"body"}:u.length>1&&(l={...se,in:"body",isRequired:u.some(b=>b.isRequired),mediaType:"multipart/form-data",name:"body",prop:"body",properties:u});let d={...se,in:"header",isRequired:ze(p.parameters.filter(b=>b.in==="header")),mediaType:null,name:s?"header":"headers",prop:s?"header":"headers",properties:p.parameters.filter(b=>b.in==="header").sort(Pr)},y={...se,in:"path",isRequired:ze(p.parameters.filter(b=>b.in==="path")),mediaType:null,name:"path",prop:"path",properties:p.parameters.filter(b=>b.in==="path").sort(Pr)},h={...se,in:"query",isRequired:ze(p.parameters.filter(b=>b.in==="query")),mediaType:null,name:"query",prop:"query",properties:p.parameters.filter(b=>b.in==="query").sort(Pr)},I=s?ta([...p.parameters]):[l,d,y,h].filter(b=>b.properties.length||b.$refs.length||b.mediaType);f.req=I,ut({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Wt,onNode:t,type:Te({...se,properties:I})});}let m=p.responses.filter(l=>l.responseTypes.includes("success"));if(m.length>0){ut({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:Xe,onNode:t,type:Te({...se,export:"any-of",properties:m})});let l=p.responses.filter(u=>u.responseTypes.includes("error"));s||ut({client:e,meta:{$ref:p.name,name:p.name},nameTransformer:hr,onNode:t,type:Te(l.length?{...se,export:"one-of",properties:l}:{...se,base:"unknown"})});}}let o=Object.entries(r).map(([a,p])=>{let c=Object.entries(p).map(([m,l])=>{let u=m,d=[];if(l.req){let h=l.$ref,{name:I}=Re({client:e,meta:{$ref:h,name:h},nameTransformer:Wt}),b={...se,base:I,export:"reference",isRequired:true,name:"req",properties:[],type:I};d=[...d,b];}if(l.res){let h=Object.entries(l.res).map(([b,w])=>({...se,...w,isRequired:true,name:String(b)})),I={...se,isRequired:true,name:"res",properties:h};d=[...d,I];}return {...se,isRequired:true,name:u.toLocaleLowerCase(),properties:d}}).filter(Boolean);return {...se,isRequired:true,name:`'${a}'`,properties:c}});n.plugins["@hey-api/typescript"]?.config.tree&&ut({client:e,meta:{$ref:"@hey-api/openapi-ts",name:rl},onNode:t,type:Te({...se,properties:o})});},ep=({client:e,files:t,plugin:r})=>{let n=S();t.types=new Fe({dir:n.output.path,exportFromIndex:r.config.exportFromIndex,id:"types",name:"types.ts"});let s=o=>{t.types?.add(o);};for(let o of e.models)ol({client:e,model:o,onNode:s});al({client:e,onNode:s});};var Ct="data",pl=e=>e.base==="unknown"&&e.export==="generic"&&e.type==="unknown",tp=({client:e,model:t})=>t.$refs.map(n=>{let s=e.models.find(o=>o.meta?.$ref===n);if(!s)throw new Error(`Ref ${n} could not be found. Transformers cannot be generated without having access to all refs.`);return s}),rp=e=>{let t=e.model.meta.name,{name:r}=ut({...e,meta:{$ref:`transformers/${t}`,name:t},nameTransformer:Ua,onCreated:s=>{let o=zn({...e,meta:{$ref:`transformers/${t}`,name:s},path:[Ct]});np({...e,async:false,name:s,statements:o});},type:`(${Ct}: any) => ${t}`});return {created:!!e.client.types[r],name:r}},cl=e=>{let{model:t}=e,r=tp(e);if(r.length===1){let{created:n,name:s}=rp({...e,model:r[0]});return n?[i.transformArrayMutation({path:e.path,transformerName:s})]:[]}return jr(t)||t.link&&!Array.isArray(t.link)&&t.link.export==="any-of"&&t.link.properties.find(n=>jr(n))?[i.transformArrayMap({path:e.path,transformExpression:i.conditionalExpression({condition:i.identifier({text:"item"}),whenFalse:i.identifier({text:"item"}),whenTrue:i.transformNewDate({parameterName:"item"})})})]:[]},ml=e=>{let{model:t}=e,r=[...e.path,t.name];return t.type==="string"&&t.export!=="array"&&jr(t)?[i.transformDateMutation({path:r})]:zn({...e,model:t,path:r})},zn=e=>{let{model:t}=e;switch(t.export){case "array":return cl(e);case "interface":return t.properties.flatMap(r=>ml({...e,model:r}));case "reference":{if(t.$refs.length!==1)return [];let r=tp(e),{created:n,name:s}=rp({...e,model:r[0]});return n?t.in==="response"?[i.expressionToStatement({expression:i.callExpression({functionName:s,parameters:[Ct]})})]:i.transformFunctionMutation({path:e.path,transformerName:s}):[]}default:return []}},np=({async:e,client:t,name:r,onNode:n,onRemoveNode:s,statements:o})=>{let a={created:false,name:r};if(!o.length)return ia({client:t,name:r}),s?.(),a;let p=i.arrowFunction({async:e,multiLine:true,parameters:[{name:Ct}],statements:[...o,i.returnVariable({expression:Ct})]}),c=i.constVariable({exportConst:true,expression:p,name:r,typeName:r});return n(c),{created:true,name:r}},sp=({client:e,files:t})=>{let r=S(),n=o=>{t.types?.add(o);},s=()=>{t.types?.removeNode();};for(let o of e.services)for(let a of o.operations){let p=a.responses.filter(m=>m.responseTypes.includes("success"));if(!p.length)continue;let c=p.filter(m=>!pl(m));if(!c.length)continue;if(c.length>1){r.logs.level==="debug"&&console.warn(`\u2757\uFE0F Transformers warning: route ${v(a)} has ${c.length} non-void success responses. This is currently not handled and we will not generate a response transformer. Please open an issue if you'd like this feature https://github.com/hey-api/openapi-ts/issues`);continue}let f=Xe(a.name);ut({client:e,meta:{$ref:`transformers/${f}`,name:f},nameTransformer:Xs,onCreated:m=>{let l=p.length>1?p.flatMap(u=>{let d=zn({client:e,meta:{$ref:`transformers/${f}`,name:f},model:u,onNode:n,onRemoveNode:s,path:[Ct]});return d.length?[i.ifStatement({expression:i.safeAccessExpression(["data"]),thenStatement:i.block({statements:d})})]:[]}):zn({client:e,meta:{$ref:`transformers/${f}`,name:f},model:p[0],onNode:n,onRemoveNode:s,path:[Ct]});np({async:true,client:e,name:m,onNode:n,onRemoveNode:s,statements:l});},onNode:n,type:`(${Ct}: any) => Promise<${f}>`});}};var Un={config:{bigInt:true,dates:true,exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:Da,handlerLegacy:sp,name:"@hey-api/transformers",output:"transformers",tags:["transformer"]};var op=({context:e,name:t})=>(he.lastIndex=0,he.test(t)?t.startsWith("-")?x.factory.createStringLiteral(t):x.factory.createNumericLiteral(t):j({case:e.config.output.case,value:t}));var ke=({schema:e})=>{let t=[];return e.title&&t.push(V(e.title)),e.description&&t.push(V(e.description)),e.deprecated&&t.push("@deprecated"),t.length?t:void 0};var Xn=i.keywordTypeNode({keyword:"string"}),ul=({server:e})=>{let t=_e(e.url);return t.protocol&&t.host?i.literalTypeNode({literal:i.stringLiteral({text:e.url})}):i.templateLiteralType({value:[t.protocol||Xn,"://",t.host||Xn,t.port?`:${t.port}`:"",t.path||""]})},ap=({identifier:e,plugin:t,servers:r})=>{let n=t.context.file({id:k});if(!e.name)return;let s=E(t.context.config),o=r.map(p=>ul({server:p}));r.length?"strictBaseUrl"in s.config&&s.config.strictBaseUrl||o.push(i.typeIntersectionNode({types:[Xn,x.factory.createTypeLiteralNode([])]})):o.push(Xn);let a=i.typeAliasDeclaration({exportType:true,name:e.name,type:i.typeInterfaceNode({properties:[{name:fe(t.context.config),type:i.typeUnionNode({types:o})}],useLegacyResolution:false})});n.add(a);};var Zs=({$ref:e,accessScope:t,plugin:r})=>{if(!t||t==="both")return e;let n=e.split("/"),s=n.pop(),o=t==="read"?r.config.readableNameBuilder:r.config.writableNameBuilder,a=dl({name:s,nameBuilder:o});return n.push(a),n.join("/")},dl=({name:e,nameBuilder:t})=>t?t.replace("{{name}}",e):e,yl=({schema:e,state:t})=>{let r=t?.accessScope;return r?!!(e.accessScope&&r!==e.accessScope||e.$ref&&e.accessScopes&&!e.accessScopes.includes(r)&&!e.accessScopes.includes("both")||(e.type==="array"||e.type==="tuple")&&e.items&&e.items.every(n=>n.accessScopes&&!n.accessScopes.includes(r)&&!n.accessScopes.includes("both"))):false},hl=({$ref:e,plugin:t,schema:r})=>{let s=t.context.file({id:k}).identifier({$ref:e,create:true,namespace:"value"});if(!s.created)return;let o=ti({plugin:t,schema:r});t.config.enumsConstantsIgnoreNull&&o.typeofItems.includes("object")&&(o.obj=o.obj.filter(c=>c.value!==null));let a=i.objectExpression({multiLine:true,obj:o.obj});return i.constVariable({assertion:"const",comment:ke({schema:r}),exportConst:true,expression:a,name:s.name||""})},ti=({plugin:e,schema:t})=>{let r=[];return {obj:(t.items??[]).map((s,o)=>{let a=typeof s.const;r.includes(a)||r.push(a);let p;return s.title?p=s.title:a==="number"||a==="string"?p=`${s.const}`:a==="boolean"?p=s.const?"true":"false":s.const===null?p="null":p=`${o}`,p&&(p=j({case:e.config.enumsCase,stripLeadingSeparators:false,value:p}),he.lastIndex=0,he.test(p)&&(e.config.enums==="typescript"||e.config.enums==="typescript+namespace")&&(p=`_${p}`)),{comments:ke({schema:s}),key:p,value:s.const}}),typeofItems:r}},Ys=({$ref:e,plugin:t,schema:r,state:n})=>{let o=t.context.file({id:k}).identifier({$ref:e,create:true,namespace:"type"});if(!o.created&&!en(e)&&t.config.enums!=="typescript+namespace")return;let a=Y({plugin:t,schema:{...r,type:void 0},state:n});if(a)return i.typeAliasDeclaration({comment:ke({schema:r}),exportType:true,name:o.name||"",type:a})},mp=({plugin:e,schema:t})=>!ti({plugin:e,schema:t}).typeofItems.filter(n=>n!=="number"&&n!=="string").length,pp=({$ref:e,plugin:t,schema:r,state:n})=>{let s=ti({plugin:t,schema:r});if(!mp({plugin:t,schema:r}))return Ys({$ref:e,plugin:t,schema:r,state:n});let a=t.context.file({id:k}).identifier({$ref:e,create:true,namespace:"enum"});return i.enumDeclaration({leadingComment:ke({schema:r}),name:a.name||"",obj:s.obj})},gl=({namespace:e,plugin:t,schema:r,state:n})=>{if(!r.items)return i.typeArrayNode(i.keywordTypeNode({keyword:"unknown"}));r=ue({detectFormat:false,schema:r});let s=[];for(let o of r.items){let a=Y({namespace:e,plugin:t,schema:o,state:n});a&&s.push(a);}if(s.length)return s.length===1?i.typeArrayNode(s[0]):r.logicalOperator==="and"?i.typeArrayNode(i.typeIntersectionNode({types:s})):i.typeArrayNode(i.typeUnionNode({types:s}))},xl=({schema:e})=>e.const!==void 0?i.literalTypeNode({literal:i.ots.boolean(e.const)}):i.keywordTypeNode({keyword:"boolean"}),bl=({$ref:e,namespace:t,plugin:r,schema:n,state:s})=>{let o=r.context.file({id:k}),a=e?en(e):false,p=a||!!r.config.exportInlineEnums;if(e&&p){if(!r.config.enums){let f=Ys({$ref:e,plugin:r,schema:n,state:s});f&&o.add(f);}if(r.config.enums==="javascript"){let f=Ys({$ref:e,plugin:r,schema:n,state:s});f&&o.add(f);let m=hl({$ref:e,plugin:r,schema:n});m&&o.add(m);}if(r.config.enums==="typescript"){let f=pp({$ref:e,plugin:r,schema:n,state:s});f&&o.add(f);}if(r.config.enums==="typescript+namespace"){let f=pp({$ref:e,plugin:r,schema:n,state:s});f&&(a?o.add(f):t.push(f));}}return Y({plugin:r,schema:{...n,type:void 0},state:s})},Ol=({plugin:e,schema:t})=>t.const!==void 0?i.literalTypeNode({literal:i.ots.number(t.const)}):t.type==="integer"&&t.format==="int64"&&e.getPlugin("@hey-api/transformers")?.config.bigInt?i.typeReferenceNode({typeName:"bigint"}):i.keywordTypeNode({keyword:"number"}),Sl=({namespace:e,plugin:t,schema:r,state:n})=>{let s,o,a=[],p=[],c=r.required??[],f=false,m=false;for(let l in r.properties){let u=r.properties[l];if(yl({schema:u,state:n})){m=true;continue}let y=Y({$ref:n?[...n.path,l].join("/"):`${tr}${l}`,namespace:e,plugin:t,schema:u,state:n});if(!y)continue;let h=c.includes(l);a.push({comment:ke({schema:u}),isReadOnly:u.accessScope==="read",isRequired:h,name:op({context:t.context,name:l}),type:y}),p.push(u),h||(f=true);}if(r.additionalProperties&&(r.additionalProperties.type!=="never"||!p.length)&&(r.additionalProperties.type==="never"?p=[r.additionalProperties]:p.unshift(r.additionalProperties),f&&p.push({type:"undefined"}),o={isRequired:!r.propertyNames,name:"key",type:Y({namespace:e,plugin:t,schema:p.length===1?p[0]:{items:p,logicalOperator:"or"},state:n})},r.propertyNames&&r.propertyNames.$ref&&(s=G(r.propertyNames.$ref))),!(m&&!a.length&&!o))return i.typeInterfaceNode({indexKey:s,indexProperty:o,properties:a,useLegacyResolution:false})},Tl=({plugin:e,schema:t})=>{if(t.const!==void 0)return i.literalTypeNode({literal:i.stringLiteral({text:t.const})});if(t.format){if(t.format==="binary")return i.typeUnionNode({types:[i.typeReferenceNode({typeName:"Blob"}),i.typeReferenceNode({typeName:"File"})]});if((t.format==="date-time"||t.format==="date")&&e.getPlugin("@hey-api/transformers")?.config.dates)return i.typeReferenceNode({typeName:"Date"})}return i.keywordTypeNode({keyword:"string"})},Rl=({namespace:e,plugin:t,schema:r,state:n})=>{let s=[];if(r.const&&Array.isArray(r.const))s=r.const.map(o=>i.valueToExpression({value:o})??i.identifier({text:"unknown"}));else if(r.items)for(let o of r.items){let a=Y({namespace:e,plugin:t,schema:o,state:n});a&&s.push(a);}if(s.length)return i.typeTupleNode({types:s})},cp=({$ref:e,namespace:t,plugin:r,schema:n,state:s})=>{switch(n.type){case "array":return gl({namespace:t,plugin:r,schema:n,state:s});case "boolean":return xl({schema:n});case "enum":return bl({$ref:e,namespace:t,plugin:r,schema:n,state:s});case "integer":case "number":return Ol({plugin:r,schema:n});case "never":return i.keywordTypeNode({keyword:"never"});case "null":return i.literalTypeNode({literal:i.null()});case "object":return Sl({namespace:t,plugin:r,schema:n,state:s});case "string":return Tl({plugin:r,schema:n});case "tuple":return Rl({namespace:t,plugin:r,schema:n,state:s});case "undefined":return i.keywordTypeNode({keyword:"undefined"});case "unknown":return i.keywordTypeNode({keyword:"unknown"});case "void":return i.keywordTypeNode({keyword:"void"})}},Js=({parameters:e})=>{let t={type:"object"};if(e){let r={},n=[];for(let s in e){let o=e[s];r[o.name]=ue({detectFormat:false,schema:o.schema}),o.required&&n.push(o.name);}t.properties=r,n.length&&(t.required=n);}return t},Il=({operation:e,plugin:t})=>{let r=t.context.file({id:k}),n={type:"object"},s=[];n.properties||(n.properties={}),e.body?(n.properties.body=e.body.schema,e.body.required&&s.push("body")):n.properties.body={type:"never"},e.parameters?.header&&(n.properties.headers=Js({parameters:e.parameters.header}),n.properties.headers.required&&s.push("headers")),e.parameters?.path?(n.properties.path=Js({parameters:e.parameters.path}),n.properties.path.required&&s.push("path")):n.properties.path={type:"never"},e.parameters?.query?(n.properties.query=Js({parameters:e.parameters.query}),n.properties.query.required&&s.push("query")):n.properties.query={type:"never"},n.properties.url={const:e.path,type:"string"},s.push("url"),n.required=s;let o=r.identifier({$ref:pe({config:t.context.config,id:e.id,type:"data"}),create:true,namespace:"type"}),a=Y({plugin:t,schema:n,state:t.config.readOnlyWriteOnlyBehavior==="off"?{path:[e.method,e.path,"data"]}:{accessScope:"write",path:[e.method,e.path,"data"]}});if(a){let p=i.typeAliasDeclaration({exportType:true,name:o.name||"",type:a});r.add(p);}},Al=({operation:e,plugin:t})=>{Il({operation:e,plugin:t});let r=t.context.file({id:k}),{error:n,errors:s,response:o,responses:a}=Le(e);if(s){let p=r.identifier({$ref:pe({config:t.context.config,id:e.id,type:"errors"}),create:true,namespace:"type"});if(p.name){let c=Y({plugin:t,schema:s,state:t.config.readOnlyWriteOnlyBehavior==="off"?{path:[e.method,e.path,"errors"]}:{accessScope:"read",path:[e.method,e.path,"errors"]}});if(c){let f=i.typeAliasDeclaration({exportType:true,name:p.name,type:c});r.add(f);}if(n){let f=r.identifier({$ref:pe({config:t.context.config,id:e.id,type:"error"}),create:true,namespace:"type"});if(f.name){let m=i.typeReferenceNode({typeName:p.name}),l=x.factory.createTypeOperatorNode(x.SyntaxKind.KeyOfKeyword,m),u=i.typeAliasDeclaration({exportType:true,name:f.name,type:i.indexedAccessTypeNode({indexType:l,objectType:m})});r.add(u);}}}}if(a){let p=r.identifier({$ref:pe({config:t.context.config,id:e.id,type:"responses"}),create:true,namespace:"type"});if(p.name){let c=Y({plugin:t,schema:a,state:t.config.readOnlyWriteOnlyBehavior==="off"?{path:[e.method,e.path,"responses"]}:{accessScope:"read",path:[e.method,e.path,"responses"]}});if(c){let f=i.typeAliasDeclaration({exportType:true,name:p.name,type:c});r.add(f);}if(o){let f=r.identifier({$ref:pe({config:t.context.config,id:e.id,type:"response"}),create:true,namespace:"type"});if(f.name){let m=i.typeReferenceNode({typeName:p.name}),l=x.factory.createTypeOperatorNode(x.SyntaxKind.KeyOfKeyword,m),u=i.typeAliasDeclaration({exportType:true,name:f.name,type:i.indexedAccessTypeNode({indexType:l,objectType:m})});r.add(u);}}}}},fp=({schema:e})=>{let t=e.accessScopes;return t!==void 0&&t.length>1},ei=({accessScope:e,schema:t})=>{let r=t.accessScopes;return !r||r!==void 0&&(r.includes(e)||r.includes("both"))},Y=({$ref:e,namespace:t=[],plugin:r,schema:n,state:s})=>{let o=r.context.file({id:k}),a;if(n.$ref){let p=r.context.resolveIrRef(n.$ref);if(!s?.accessScope||ei({accessScope:s.accessScope,schema:p})){let c=Zs({$ref:n.$ref,accessScope:fp({schema:p})?s?.accessScope:void 0,plugin:r}),f=o.identifier({$ref:c,create:true,namespace:p.type==="enum"&&(r.config.enums==="typescript"||r.config.enums==="typescript+namespace")&&mp({plugin:r,schema:p})?"enum":"type"});a=i.typeReferenceNode({typeName:f.name||""});}}else if(n.type)a=cp({$ref:e,namespace:t,plugin:r,schema:n,state:s});else if(n.items)if(n=ue({detectFormat:false,schema:n}),n.items){let p=[];for(let c of n.items){let f=Y({namespace:t,plugin:r,schema:c,state:s});f&&p.push(f);}a=n.logicalOperator==="and"?i.typeIntersectionNode({types:p}):i.typeUnionNode({types:p});}else a=Y({namespace:t,plugin:r,schema:n,state:s});else a=cp({namespace:t,plugin:r,schema:{type:"unknown"},state:s});if(e&&en(e)){if(t.length){let p=o.identifier({$ref:e,create:true,namespace:"value"}),c=i.namespaceDeclaration({name:p.name||"",statements:t});o.add(c);}if(n.type!=="enum"&&a){let p=o.identifier({$ref:e,create:true,namespace:"type"}),c=i.typeAliasDeclaration({comment:ke({schema:n}),exportType:true,name:p.name||"",type:a});o.add(c);}}return a},lp=({plugin:e})=>{let r=e.createFile({id:k,identifierCase:e.config.identifierCase,path:e.output}).identifier({$ref:"ClientOptions",create:true,namespace:"type"}),n=[];e.forEach("operation","parameter","requestBody","schema","server",s=>{if(s.type==="operation")Al({operation:s.operation,plugin:e});else if(s.type==="parameter")Y({$ref:s.$ref,plugin:e,schema:s.parameter.schema,state:{path:[]}});else if(s.type==="requestBody")Y({$ref:s.$ref,plugin:e,schema:s.requestBody.schema,state:e.config.readOnlyWriteOnlyBehavior==="off"?{path:[]}:{accessScope:"write",path:[]}});else if(s.type==="schema"){if(e.config.readOnlyWriteOnlyBehavior==="off"||!fp({schema:s.schema})){Y({$ref:s.$ref,plugin:e,schema:s.schema,state:{path:[]}});return}ei({accessScope:"read",schema:s.schema})&&Y({$ref:Zs({$ref:s.$ref,accessScope:"read",plugin:e}),plugin:e,schema:s.schema,state:{accessScope:"read",path:[]}}),ei({accessScope:"write",schema:s.schema})&&Y({$ref:Zs({$ref:s.$ref,accessScope:"write",plugin:e}),plugin:e,schema:s.schema,state:{accessScope:"write",path:[]}});}else s.type==="server"&&n.push(s.server);}),ap({identifier:r,plugin:e,servers:n});};var Jn={config:{enums:false,enumsCase:"SCREAMING_SNAKE_CASE",enumsConstantsIgnoreNull:false,exportFromIndex:true,exportInlineEnums:false,identifierCase:"PascalCase",readOnlyWriteOnlyBehavior:"split",readableNameBuilder:"{{name}}Readable",style:"preserve",tree:false,writableNameBuilder:"{{name}}Writable"},handler:lp,handlerLegacy:ep,name:"@hey-api/typescript",output:"types"};var Et=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name});return Nr({context:t.context,file:r,operation:e})},Zn=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name}),s={asType:true,name:Ee({context:t.context,file:r,operation:e,type:"error"}).name||""};if(s.name||(s=r.import({asType:true,module:t.name,name:"DefaultError"})),E(t.context.config).name==="@hey-api/client-axios"){let a=r.import({asType:true,module:"axios",name:"AxiosError"});s={...a,name:`${a.name}<${s.name}>`};}return s},Yn=({operation:e,plugin:t})=>{let r=t.context.file({id:t.name});return Ee({context:t.context,file:r,operation:e,type:"response"}).name||"unknown"};var dp="createQueryKey",ts="QueryKey",vr="TOptions",up=i.identifier({text:"infinite"}),es=i.identifier({text:"options"}),rs=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-query-key/${dp}`,case:e.config.case,create:true,namespace:"value"});if(r.name){let n=i.indexedAccessTypeNode({indexType:i.literalTypeNode({literal:i.ots.number(0)}),objectType:i.typeReferenceNode({typeArguments:[i.typeReferenceNode({typeName:vr})],typeName:ts})}),s=i.constVariable({expression:i.arrowFunction({multiLine:true,parameters:[{name:"id",type:i.typeReferenceNode({typeName:"string"})},{isRequired:false,name:"options",type:i.typeReferenceNode({typeName:vr})},{isRequired:false,name:"infinite",type:i.typeReferenceNode({typeName:"boolean"})}],returnType:i.typeTupleNode({types:[n]}),statements:[i.constVariable({assertion:n,expression:i.objectExpression({multiLine:false,obj:[{key:"_id",value:i.identifier({text:"id"})},{key:fe(e.context.config),value:i.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${fe(e.context.config)}`})}]}),name:"params",typeName:n}),i.ifStatement({expression:up,thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"_infinite"}),right:up})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:es,isOptional:true,name:i.identifier({text:"body"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"body"}),right:i.propertyAccessExpression({expression:"options",name:"body"})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:es,isOptional:true,name:i.identifier({text:"headers"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"headers"}),right:i.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:es,isOptional:true,name:i.identifier({text:"path"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"path"}),right:i.propertyAccessExpression({expression:"options",name:"path"})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:es,isOptional:true,name:i.identifier({text:"query"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"query"}),right:i.propertyAccessExpression({expression:"options",name:"query"})})})]})}),i.returnStatement({expression:i.arrayLiteralExpression({elements:[i.identifier({text:"params"})]})})],types:[{extends:i.typeReferenceNode({typeName:i.identifier({text:H.Options.name})}),name:vr}]}),name:r.name});t.add(s);}},jl=({id:e,isInfinite:t,plugin:r})=>{let s=r.context.file({id:r.name}).identifier({$ref:`#/tanstack-query-create-query-key/${dp}`,case:r.config.case,namespace:"value"});return i.callExpression({functionName:s.name||"",parameters:[i.ots.string(e),"options",t?i.ots.boolean(true):void 0]})},ns=({plugin:e})=>{let t=e.context.file({id:e.name}),r=[{name:"_id",type:i.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:i.keywordTypeNode({keyword:"boolean"})}],n=i.typeAliasDeclaration({exportType:true,name:ts,type:i.typeTupleNode({types:[i.typeIntersectionNode({types:[i.typeReferenceNode({typeName:`Pick<${vr}, '${fe(e.context.config)}' | 'body' | 'headers' | 'path' | 'query'>`}),i.typeInterfaceNode({properties:r,useLegacyResolution:true})]})]}),typeParameters:[{extends:i.typeReferenceNode({typeName:i.identifier({text:H.Options.name})}),name:vr}]});t.add(n);},ss=({isInfinite:e,operation:t,plugin:r,typeQueryKey:n})=>{let s=r.context.file({id:r.name}),o=Et({operation:t,plugin:r}),a=e?s.identifier({$ref:`#/tanstack-query-infinite-query-key/${t.id}`,case:r.config.infiniteQueryKeys.case,create:true,nameTransformer:r.config.infiniteQueryKeys.name,namespace:"value"}):s.identifier({$ref:`#/tanstack-query-query-key/${t.id}`,case:r.config.queryKeys.case,create:true,nameTransformer:r.config.queryKeys.name,namespace:"value"});return i.constVariable({exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:nn(t),name:"options",type:o}],returnType:e?n:void 0,statements:jl({id:t.id,isInfinite:e,plugin:r})}),name:a.name||""})};var hp="createInfiniteParams",yp="infiniteQueryOptions",El=({plugin:e})=>{let t=e.context.file({id:e.name}),r=t.identifier({$ref:`#/tanstack-query-create-infinite-params/${hp}`,case:e.config.case,create:true,namespace:"value"}),n=i.constVariable({expression:i.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:i.typeReferenceNode({typeName:`QueryKey<${H.Options.name}>`})},{name:"page",type:i.typeReferenceNode({typeName:"K"})}],statements:[i.constVariable({expression:i.objectExpression({obj:[{spread:i.propertyAccessExpression({expression:"queryKey",name:0})}]}),name:"params"}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"body"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"body"}),right:i.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"headers"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"headers"}),right:i.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"path"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"path"}),right:i.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].path"},{assertion:"any",spread:"page.path"}]})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"query"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"query"}),right:i.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].query"},{assertion:"any",spread:"page.query"}]})})})]})}),i.returnVariable({expression:i.asExpression({expression:i.asExpression({expression:i.identifier({text:"params"}),type:i.keywordTypeNode({keyword:"unknown"})}),type:x.factory.createTypeQueryNode(i.identifier({text:"page"}))})})],types:[{extends:i.typeReferenceNode({typeName:i.identifier({text:`Pick<QueryKey<${H.Options.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:r.name||""});t.add(n);},gp=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.infiniteQueryOptions||!["get","post"].includes(e.method))return n;let s=uo({context:t.context,operation:e});if(!s)return n;let o=t.context.file({id:t.name}),a=Bt({context:t.context,operation:e});n.hasInfiniteQueries||(n.hasInfiniteQueries=true,n.hasCreateQueryKeyParamsFunction||(ns({plugin:t}),rs({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),n.hasCreateInfiniteParamsFunction||(El({plugin:t}),n.hasCreateInfiniteParamsFunction=true),o.import({module:t.name,name:yp}),n.typeInfiniteData=o.import({asType:true,module:t.name,name:"InfiniteData"})),n.hasUsedQueryFn=true;let p=Et({operation:e,plugin:t}),c=Zn({operation:e,plugin:t}),f=Yn({operation:e,plugin:t}),m=`${ts}<${p}>`,l=`Pick<${m}[0], 'body' | 'headers' | 'path' | 'query'>`,u=t.getPlugin("@hey-api/typescript"),d=Y({plugin:u,schema:s.schema,state:void 0}),y=d?`${qe({node:d,unescape:true})} | ${l}`:`${l}`,h=ss({isInfinite:true,operation:e,plugin:t,typeQueryKey:m});o.add(h);let I=o.identifier({$ref:`#/tanstack-query-infinite-query-key/${e.id}`,case:t.config.infiniteQueryKeys.case,nameTransformer:t.config.infiniteQueryKeys.name,namespace:"value"}),b=i.awaitExpression({expression:i.callExpression({functionName:r,parameters:[i.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:i.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),w=o.identifier({$ref:`#/tanstack-query-create-infinite-params/${hp}`,case:t.config.case,namespace:"value"}),C=[i.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:i.conditionalExpression({condition:i.binaryExpression({left:i.typeOfExpression({text:"pageParam"}),operator:"===",right:i.ots.string("object")}),whenFalse:i.objectExpression({multiLine:true,obj:[{key:s.in,value:i.objectExpression({multiLine:true,obj:[{key:s.name,value:i.identifier({text:"pageParam"})}]})}]}),whenTrue:i.identifier({text:"pageParam"})}),name:"page",typeName:l}),i.constVariable({expression:i.callExpression({functionName:w.name||"",parameters:["queryKey","page"]}),name:"params"})];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?C.push(i.returnVariable({expression:b})):C.push(i.constVariable({destructure:true,expression:b,name:"data"}),i.returnVariable({expression:"data"}));let L=o.identifier({$ref:`#/tanstack-query-infinite-query-options/${e.id}`,case:t.config.infiniteQueryOptions.case,create:true,nameTransformer:t.config.infiniteQueryOptions.name,namespace:"value"}),M=i.constVariable({comment:t.config.comments?lt({operation:e}):void 0,exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:a,name:"options",type:p}],statements:[i.returnFunctionCall({args:[i.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:i.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:C})},{key:"queryKey",value:i.callExpression({functionName:I.name||"",parameters:["options"]})}]})],name:yp,types:[f,c.name,`${typeof n.typeInfiniteData=="string"?n.typeInfiniteData:n.typeInfiniteData.name}<${f}>`,m,y]})]}),name:L.name||""});o.add(M);};var xp="mutationOptions",bp=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.mutationOptions.enabled||!["delete","patch","post","put"].includes(e.method))return n;let s=t.name==="@tanstack/angular-query-experimental"||t.name==="@tanstack/svelte-query"||t.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",o=t.context.file({id:t.name});n.hasMutations||(n.hasMutations=true,o.import({asType:true,module:t.name,name:s})),n.hasUsedQueryFn=true;let a=Et({operation:e,plugin:t}),p=Zn({operation:e,plugin:t}),c=Yn({operation:e,plugin:t}),f=`${s}<${c}, ${p.name}, ${a}>`,m=i.awaitExpression({expression:i.callExpression({functionName:r,parameters:[i.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),l=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?l.push(i.returnVariable({expression:m})):l.push(i.constVariable({destructure:true,expression:m,name:"data"}),i.returnVariable({expression:"data"}));let u=o.identifier({$ref:`#/tanstack-query-mutation-options/${e.id}`,case:t.config.mutationOptions.case,create:true,nameTransformer:t.config.mutationOptions.name,namespace:"value"}),d=i.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${a}>`}],returnType:f,statements:[i.constVariable({expression:i.objectExpression({obj:[{key:"mutationFn",value:i.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:l})}]}),name:xp,typeName:f}),i.returnVariable({expression:xp})]}),y=i.constVariable({comment:t.config.comments?lt({operation:e}):void 0,exportConst:true,expression:d,name:u.name||""});return o.add(y),n};var Op="queryOptions",Sp=({operation:e,plugin:t,queryFn:r,state:n})=>{if(!t.config.queryOptions||!["get","post"].includes(e.method))return n;let s=t.context.file({id:t.name}),o=Bt({context:t.context,operation:e});n.hasQueries||(n.hasQueries=true,n.hasCreateQueryKeyParamsFunction||(ns({plugin:t}),rs({plugin:t}),n.hasCreateQueryKeyParamsFunction=true),s.import({module:t.name,name:Op})),n.hasUsedQueryFn=true;let a=ss({isInfinite:false,operation:e,plugin:t});s.add(a);let p=Et({operation:e,plugin:t}),c=s.identifier({$ref:`#/tanstack-query-query-key/${e.id}`,case:t.config.queryKeys.case,nameTransformer:t.config.queryKeys.name,namespace:"value"}),f=i.awaitExpression({expression:i.callExpression({functionName:r,parameters:[i.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:i.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),m=[];t.getPlugin("@hey-api/sdk")?.config.responseStyle==="data"?m.push(i.returnVariable({expression:f})):m.push(i.constVariable({destructure:true,expression:f,name:"data"}),i.returnVariable({expression:"data"}));let l=s.identifier({$ref:`#/tanstack-query-query-options/${e.id}`,case:t.config.queryOptions.case,create:true,nameTransformer:t.config.queryOptions.name,namespace:"value"}),u=i.constVariable({comment:t.config.comments?lt({operation:e}):void 0,exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:o,name:"options",type:p}],statements:[i.returnFunctionCall({args:[i.objectExpression({obj:[{key:"queryFn",value:i.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:m})},{key:"queryKey",value:i.callExpression({functionName:c.name||"",parameters:["options"]})}]})],name:Op})]}),name:l.name||""});return s.add(u),n};var Ge=({plugin:e})=>{let t=e.createFile({id:e.name,identifierCase:e.config.case,path:e.output}),r={hasCreateInfiniteParamsFunction:false,hasCreateQueryKeyParamsFunction:false,hasInfiniteQueries:false,hasMutations:false,hasQueries:false,hasUsedQueryFn:false,typeInfiniteData:void 0};t.import({...H.Options,module:t.relativePathToFile({context:e.context,id:ce})}),e.forEach("operation",({operation:n})=>{r.hasUsedQueryFn=false;let s=e.getPlugin("@hey-api/sdk"),o=s?.config.asClass?Hn({context:e.context,operation:n,plugin:s}):void 0,a=o?o.values().next().value:void 0,p=(a?[a.path[0],...a.path.slice(1).map(c=>j({case:"camelCase",value:c})),a.methodName].filter(Boolean):[Ie({config:e.context.config,handleIllegal:true,id:n.id,operation:n})]).join(".");Sp({operation:n,plugin:e,queryFn:p,state:r}),gp({operation:n,plugin:e,queryFn:p,state:r}),bp({operation:n,plugin:e,queryFn:p,state:r}),r.hasUsedQueryFn&&t.import({module:t.relativePathToFile({context:e.context,id:ce}),name:p.split(".")[0]});}),(r.hasQueries||r.hasInfiniteQueries)&&t.import({alias:"_heyApiClient",module:t.relativePathToFile({context:e.context,id:ve}),name:"client"});};var kl=e=>`${Ie({config:S(),id:e.name,operation:e})}InfiniteOptions`,Nl=e=>`${Ie({config:S(),id:e.name,operation:e})}Mutation`,vl=({config:e,id:t,operation:r})=>`${Ie({config:e,id:t,operation:r})}Options`,is=({config:e,id:t,isInfinite:r,operation:n})=>`${Ie({config:e,id:t,operation:n})}${r?"Infinite":""}QueryKey`,ql=e=>{switch(e.in){case "formData":return "body";case "header":return "headers";default:return e.in}},$l="createInfiniteParams",kp="createQueryKey",Tp="infiniteQueryOptions",Rp="mutationOptions",ni="QueryKey",Ip="queryOptions",$r="TOptions",wl=({file:e})=>{let t=i.constVariable({expression:i.arrowFunction({multiLine:true,parameters:[{name:"queryKey",type:i.typeNode(`QueryKey<${H.OptionsLegacyParser.name}>`)},{name:"page",type:i.typeNode("K")}],statements:[i.constVariable({expression:i.identifier({text:"queryKey[0]"}),name:"params"}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"body"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"body"}),right:i.objectExpression({multiLine:true,obj:[{assertion:"any",spread:"queryKey[0].body"},{assertion:"any",spread:"page.body"}]})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"headers"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"headers"}),right:i.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].headers"},{spread:"page.headers"}]})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"path"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"path"}),right:i.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].path"},{spread:"page.path"}]})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"page"}),name:i.identifier({text:"query"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"query"}),right:i.objectExpression({multiLine:true,obj:[{spread:"queryKey[0].query"},{spread:"page.query"}]})})})]})}),i.returnVariable({expression:x.factory.createAsExpression(x.factory.createAsExpression(i.identifier({text:"params"}),x.factory.createKeywordTypeNode(x.SyntaxKind.UnknownKeyword)),x.factory.createTypeQueryNode(i.identifier({text:"page"})))})],types:[{extends:i.typeReferenceNode({typeName:i.identifier({text:`Pick<QueryKey<${H.OptionsLegacyParser.name}>[0], 'body' | 'headers' | 'path' | 'query'>`})}),name:"K"}]}),name:$l});e.add(t);},Ap=({file:e})=>{let t=i.indexedAccessTypeNode({indexType:i.typeNode(0),objectType:i.typeNode(ni,[i.typeNode($r)])}),r=i.identifier({text:"infinite"}),n=i.constVariable({expression:i.arrowFunction({multiLine:true,parameters:[{name:"id",type:i.typeNode("string")},{isRequired:false,name:"options",type:i.typeNode($r)},{isRequired:false,name:"infinite",type:i.typeNode("boolean")}],returnType:t,statements:[i.constVariable({assertion:t,expression:i.objectExpression({multiLine:false,obj:[{key:"_id",value:i.identifier({text:"id"})},{key:fe(S()),value:i.identifier({text:`(options?.client ?? _heyApiClient).getConfig().${fe(S())}`})}]}),name:"params",typeName:t}),i.ifStatement({expression:r,thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"_infinite"}),right:r})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"options"}),isOptional:true,name:i.identifier({text:"body"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"body"}),right:i.propertyAccessExpression({expression:"options",name:"body"})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"options"}),isOptional:true,name:i.identifier({text:"headers"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"headers"}),right:i.propertyAccessExpression({expression:"options",name:"headers"})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"options"}),isOptional:true,name:i.identifier({text:"path"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"path"}),right:i.propertyAccessExpression({expression:"options",name:"path"})})})]})}),i.ifStatement({expression:i.propertyAccessExpression({expression:i.identifier({text:"options"}),isOptional:true,name:i.identifier({text:"query"})}),thenStatement:i.block({statements:[i.expressionToStatement({expression:i.binaryExpression({left:i.propertyAccessExpression({expression:"params",name:"query"}),right:i.propertyAccessExpression({expression:"options",name:"query"})})})]})}),i.returnVariable({expression:"params"})],types:[{extends:i.typeReferenceNode({typeName:i.identifier({text:H.OptionsLegacyParser.name})}),name:$r}]}),name:kp});e.add(n);},Pp=({file:e})=>{let t=[{name:"_id",type:i.keywordTypeNode({keyword:"string"})},{isRequired:false,name:"_infinite",type:i.keywordTypeNode({keyword:"boolean"})}],r=i.typeAliasDeclaration({name:ni,type:i.typeTupleNode({types:[i.typeIntersectionNode({types:[i.typeReferenceNode({typeName:`Pick<${$r}, '${fe(S())}' | 'body' | 'headers' | 'path' | 'query'>`}),i.typeInterfaceNode({properties:t,useLegacyResolution:true})]})]}),typeParameters:[{extends:i.typeReferenceNode({typeName:i.identifier({text:H.OptionsLegacyParser.name})}),name:$r}]});e.add(r);},ri=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=Kt({client:e,meta:r.parameters.length?{$ref:r.name,name:r.name}:void 0,nameTransformer:Wt,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeData:Gs({importedType:s})}},jp=({client:e,file:t,operation:r,pluginName:n,typesModulePath:s})=>{let o=S(),{name:a}=Kt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:hr,onImport:f=>{t.import({asType:true,module:s,name:f});}}),p={asType:true,name:a};if(p.name||(p=t.import({asType:true,module:n,name:"DefaultError"})),E(o).name==="@hey-api/client-axios"){let f=t.import({asType:true,module:"axios",name:"AxiosError"});p={...f,name:`${f.name}<${p.name}>`};}return {typeError:p}},Cp=({client:e,file:t,operation:r,typesModulePath:n})=>{let{name:s}=Kt({client:e,meta:{$ref:r.name,name:r.name},nameTransformer:Xe,onImport:a=>{t.import({asType:true,module:n,name:a});}});return {typeResponse:s||"void"}},Ep=({id:e,isInfinite:t})=>i.arrayLiteralExpression({elements:[i.callExpression({functionName:kp,parameters:[i.ots.string(e),"options",t?i.ots.boolean(true):void 0]})],multiLine:false}),Je=({client:e,files:t,plugin:r})=>{let n=S();if(K(n))throw new Error("TanStack Query plugin does not support legacy clients");let s=t[r.name];s.import({...H.OptionsLegacyParser,module:Z({config:n,sourceOutput:r.output})});let o=Ht({moduleOutput:t.types.nameWithoutExtension(),sourceOutput:r.output}),a=r.name==="@tanstack/angular-query-experimental"||r.name==="@tanstack/svelte-query"||r.name==="@tanstack/solid-query"?"MutationOptions":"UseMutationOptions",p,c=false,f=false,m=false,l=false,u=false,d=new Map;for(let y of e.services)for(let h of y.operations){let I=v(h);if(d.has(I))continue;d.set(I,true);let b=[n.plugins["@hey-api/sdk"]?.config.asClass&&mr({config:n,name:y.name}),Ie({config:n,handleIllegal:!n.plugins["@hey-api/sdk"]?.config.asClass,id:h.name,operation:h})].filter(Boolean).join("."),w=false;if(r.config.queryOptions&&["GET","POST"].includes(h.method)){u||(u=true,f||(Pp({file:s}),Ap({file:s}),f=true),s.import({module:r.name,name:Ip})),w=true;let{typeData:C}=ri({client:e,file:s,operation:h,typesModulePath:o}),L=ze(h.parameters),M=i.constVariable({exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:L,name:"options",type:C}],statements:Ep({id:h.name})}),name:is({config:n,id:h.name,operation:h})});s.add(M);let Ae=i.constVariable({comment:[],exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:L,name:"options",type:C}],statements:[i.returnFunctionCall({args:[i.objectExpression({obj:[{key:"queryFn",value:i.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"queryKey"},{name:"signal"}]}],statements:[i.constVariable({destructure:true,expression:i.awaitExpression({expression:i.callExpression({functionName:b,parameters:[i.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"queryKey[0]"},{key:"signal",shorthand:true,value:i.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),i.returnVariable({expression:"data"})]})},{key:"queryKey",value:i.callExpression({functionName:is({config:n,id:h.name,operation:h}),parameters:["options"]})}]})],name:Ip})]}),name:vl({config:n,id:h.name,operation:h})});s.add(Ae);}if(r.config.infiniteQueryOptions&&["GET","POST"].includes(h.method)){let C,L=h.parameters.find(M=>{if(me(n.input.pagination).test(M.name))return C=M,true;if(M.in==="body"){if(M.export==="reference"){let tt=M.$refs[0];return e.models.find(dt=>dt.meta?.$ref===tt)?.properties.find(dt=>{if(me(n.input.pagination).test(dt.name))return C=dt,true})}return M.properties.find(tt=>{if(me(n.input.pagination).test(tt.name))return C=tt,true})}});if(L&&C){m||(m=true,f||(Pp({file:s}),Ap({file:s}),f=true),c||(wl({file:s}),c=true),s.import({module:r.name,name:Tp}),p=s.import({asType:true,module:r.name,name:"InfiniteData"})),w=true;let{typeData:M}=ri({client:e,file:s,operation:h,typesModulePath:o}),{typeError:Ae}=jp({client:e,file:s,operation:h,pluginName:r.name,typesModulePath:o}),{typeResponse:tt}=Cp({client:e,file:s,operation:h,typesModulePath:o}),Dr=ze(h.parameters),dt=`${ni}<${M}>`,hs=`Pick<${dt}[0], 'body' | 'headers' | 'path' | 'query'>`,Xp=`${C.base} | ${hs}`,Gp=i.constVariable({exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:Dr,name:"options",type:M}],returnType:dt,statements:Ep({id:h.name,isInfinite:true})}),name:is({config:n,id:h.name,isInfinite:true,operation:h})});s.add(Gp);let Jp=i.constVariable({comment:[],exportConst:true,expression:i.arrowFunction({parameters:[{isRequired:Dr,name:"options",type:M}],statements:[i.returnFunctionCall({args:[i.objectExpression({comments:[{jsdoc:false,lines:["@ts-ignore"]}],obj:[{key:"queryFn",value:i.arrowFunction({async:true,multiLine:true,parameters:[{destructure:[{name:"pageParam"},{name:"queryKey"},{name:"signal"}]}],statements:[i.constVariable({comment:[{jsdoc:false,lines:["@ts-ignore"]}],expression:i.conditionalExpression({condition:i.binaryExpression({left:i.typeOfExpression({text:"pageParam"}),operator:"===",right:i.ots.string("object")}),whenFalse:i.objectExpression({multiLine:true,obj:[{key:ql(L),value:i.objectExpression({multiLine:true,obj:[{key:C.name,value:i.identifier({text:"pageParam"})}]})}]}),whenTrue:i.identifier({text:"pageParam"})}),name:"page",typeName:hs}),i.constVariable({expression:i.callExpression({functionName:"createInfiniteParams",parameters:["queryKey","page"]}),name:"params"}),i.constVariable({destructure:true,expression:i.awaitExpression({expression:i.callExpression({functionName:b,parameters:[i.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"params"},{key:"signal",shorthand:true,value:i.identifier({text:"signal"})},{key:"throwOnError",value:true}]})]})}),name:"data"}),i.returnVariable({expression:"data"})]})},{key:"queryKey",value:i.callExpression({functionName:is({config:n,id:h.name,isInfinite:true,operation:h}),parameters:["options"]})}]})],name:Tp,types:[tt,Ae.name,`${typeof p=="string"?p:p.name}<${tt}>`,dt,Xp]})]}),name:kl(h)});s.add(Jp);}}if(r.config.mutationOptions&&["DELETE","PATCH","POST","PUT"].includes(h.method)){l||(l=true,s.import({asType:true,module:r.name,name:a})),w=true;let{typeData:C}=ri({client:e,file:s,operation:h,typesModulePath:o}),{typeError:L}=jp({client:e,file:s,operation:h,pluginName:r.name,typesModulePath:o}),{typeResponse:M}=Cp({client:e,file:s,operation:h,typesModulePath:o}),Ae=i.arrowFunction({parameters:[{isRequired:false,name:"options",type:`Partial<${C}>`}],statements:[i.constVariable({expression:i.objectExpression({obj:[{key:"mutationFn",value:i.arrowFunction({async:true,multiLine:true,parameters:[{name:"localOptions"}],statements:[i.constVariable({destructure:true,expression:i.awaitExpression({expression:i.callExpression({functionName:b,parameters:[i.objectExpression({multiLine:true,obj:[{spread:"options"},{spread:"localOptions"},{key:"throwOnError",value:true}]})]})}),name:"data"}),i.returnVariable({expression:"data"})]})}]}),name:Rp,typeName:`${a}<${M}, ${L.name}, ${C}>`}),i.returnVariable({expression:Rp})]}),tt=i.constVariable({comment:[],exportConst:true,expression:Ae,name:Nl(h)});s.add(tt);}(u||m)&&s.import({alias:"_heyApiClient",module:Ht({moduleOutput:t.client.nameWithoutExtension(),sourceOutput:r.output}),name:"client"}),w&&s.import({module:Ht({moduleOutput:t.sdk.nameWithoutExtension(),sourceOutput:r.output}),name:b.split(".")[0]});}};var os={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Ge,handlerLegacy:Je,name:"@tanstack/angular-query-experimental",output:"@tanstack/angular-query-experimental",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var as={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Ge,handlerLegacy:Je,name:"@tanstack/react-query",output:"@tanstack/react-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var ps={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Ge,handlerLegacy:Je,name:"@tanstack/solid-query",output:"@tanstack/solid-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var cs={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Ge,handlerLegacy:Je,name:"@tanstack/svelte-query",output:"@tanstack/svelte-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var ms={config:{case:"camelCase",comments:true,exportFromIndex:false},dependencies:["@hey-api/sdk","@hey-api/typescript"],handler:Ge,handlerLegacy:Je,name:"@tanstack/vue-query",output:"@tanstack/vue-query",resolveConfig:(e,t)=>{e.config.infiniteQueryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteQueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryKeys}),e.config.infiniteQueryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}InfiniteOptions"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.infiniteQueryOptions}),e.config.mutationOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Mutation"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.mutationOptions}),e.config.queryKeys=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}QueryKey"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryKeys}),e.config.queryOptions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"{{name}}Options"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.queryOptions});}};var Np="fastify",_l=({context:e,operation:t})=>{let r=e.file({id:Np}),n=e.file({id:k}),s=[],o=n.identifier({$ref:pe({config:e.config,id:t.id,type:"data"}),namespace:"type"});o.name&&(t.body&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:o.name}),s.push({isRequired:t.body.required,name:"Body",type:`${o.name}['body']`})),t.parameters&&(t.parameters.header&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:o.name}),s.push({isRequired:gt(t.parameters.header),name:"Headers",type:`${o.name}['headers']`})),t.parameters.path&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:o.name}),s.push({isRequired:gt(t.parameters.path),name:"Params",type:`${o.name}['path']`})),t.parameters.query&&(r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:o.name}),s.push({isRequired:gt(t.parameters.query),name:"Querystring",type:`${o.name}['query']`}))));let{errors:a,responses:p}=Le(t),c,f=n.identifier({$ref:pe({config:e.config,id:t.id,type:"errors"}),namespace:"type"});if(f.name&&a&&a.properties){let y=Object.keys(a.properties);if(y.length){if(!y.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:f.name}),c=i.typeReferenceNode({typeName:f.name});else if(y.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:f.name});let I=i.typeReferenceNode({typeName:f.name}),b=i.literalTypeNode({literal:i.stringLiteral({text:"default"})});c=i.typeReferenceNode({typeArguments:[I,b],typeName:"Omit"});}}}let m,l=n.identifier({$ref:pe({config:e.config,id:t.id,type:"responses"}),namespace:"type"});if(l.name&&p&&p.properties){let y=Object.keys(p.properties);if(y.length){if(!y.includes("default"))r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:l.name}),m=i.typeReferenceNode({typeName:l.name});else if(y.length>1){r.import({asType:true,module:r.relativePathToFile({context:e,id:k}),name:l.name});let I=i.typeReferenceNode({typeName:l.name}),b=i.literalTypeNode({literal:i.stringLiteral({text:"default"})});m=i.typeReferenceNode({typeArguments:[I,b],typeName:"Omit"});}}}let u=[c,m].filter(Boolean);return u.length&&s.push({name:"Reply",type:i.typeIntersectionNode({types:u})}),s.length?{name:t.id,type:i.typeNode("RouteHandler",[i.typeInterfaceNode({properties:s,useLegacyResolution:false})])}:void 0},vp=({plugin:e})=>{let t=e.createFile({id:Np,path:e.output}),r=[];e.forEach("operation",({operation:s})=>{let o=_l({context:e.context,operation:s});o&&r.push(o);});let n=t.identifier({$ref:"RouteHandlers",create:true,namespace:"type"});n.name&&(r.length&&t.import({asType:true,module:"fastify",name:"RouteHandler"}),t.add(i.typeAliasDeclaration({exportType:true,name:n.name,type:i.typeInterfaceNode({properties:r,useLegacyResolution:false})})));};var fs={config:{exportFromIndex:false},dependencies:["@hey-api/typescript"],handler:vp,name:"fastify",output:"fastify"};var g={actions:{args:i.identifier({text:"args"}),base64:i.identifier({text:"base64"}),bic:i.identifier({text:"bic"}),brand:i.identifier({text:"brand"}),bytes:i.identifier({text:"bytes"}),check:i.identifier({text:"check"}),checkItems:i.identifier({text:"checkItems"}),creditCard:i.identifier({text:"creditCard"}),cuid2:i.identifier({text:"cuid2"}),decimal:i.identifier({text:"decimal"}),description:i.identifier({text:"description"}),digits:i.identifier({text:"digits"}),email:i.identifier({text:"email"}),emoji:i.identifier({text:"emoji"}),empty:i.identifier({text:"empty"}),endsWith:i.identifier({text:"endsWith"}),entries:i.identifier({text:"entries"}),everyItem:i.identifier({text:"everyItem"}),excludes:i.identifier({text:"excludes"}),filterItems:i.identifier({text:"filterItems"}),findItem:i.identifier({text:"findItem"}),finite:i.identifier({text:"finite"}),flavor:i.identifier({text:"flavor"}),graphemes:i.identifier({text:"graphemes"}),gtValue:i.identifier({text:"gtValue"}),hash:i.identifier({text:"hash"}),hexColor:i.identifier({text:"hexColor"}),hexadecimal:i.identifier({text:"hexadecimal"}),imei:i.identifier({text:"imei"}),includes:i.identifier({text:"includes"}),integer:i.identifier({text:"integer"}),ip:i.identifier({text:"ip"}),ipv4:i.identifier({text:"ipv4"}),ipv6:i.identifier({text:"ipv6"}),isoDate:i.identifier({text:"isoDate"}),isoDateTime:i.identifier({text:"isoDateTime"}),isoTime:i.identifier({text:"isoTime"}),isoTimeSecond:i.identifier({text:"isoTimeSecond"}),isoTimestamp:i.identifier({text:"isoTimestamp"}),isoWeek:i.identifier({text:"isoWeek"}),length:i.identifier({text:"length"}),ltValue:i.identifier({text:"ltValue"}),mac:i.identifier({text:"mac"}),mac48:i.identifier({text:"mac48"}),mac64:i.identifier({text:"mac64"}),mapItems:i.identifier({text:"mapItems"}),maxBytes:i.identifier({text:"maxBytes"}),maxEntries:i.identifier({text:"maxEntries"}),maxGraphemes:i.identifier({text:"maxGraphemes"}),maxLength:i.identifier({text:"maxLength"}),maxSize:i.identifier({text:"maxSize"}),maxValue:i.identifier({text:"maxValue"}),maxWords:i.identifier({text:"maxWords"}),metadata:i.identifier({text:"metadata"}),mimeType:i.identifier({text:"mimeType"}),minBytes:i.identifier({text:"minBytes"}),minEntries:i.identifier({text:"minEntries"}),minGraphemes:i.identifier({text:"minGraphemes"}),minLength:i.identifier({text:"minLength"}),minSize:i.identifier({text:"minSize"}),minValue:i.identifier({text:"minValue"}),minWords:i.identifier({text:"minWords"}),multipleOf:i.identifier({text:"multipleOf"}),nanoid:i.identifier({text:"nanoid"}),nonEmpty:i.identifier({text:"nonEmpty"}),normalize:i.identifier({text:"normalize"}),notBytes:i.identifier({text:"notBytes"}),notEntries:i.identifier({text:"notEntries"}),notGraphemes:i.identifier({text:"notGraphemes"}),notLength:i.identifier({text:"notLength"}),notSize:i.identifier({text:"notSize"}),notValue:i.identifier({text:"notValue"}),notValues:i.identifier({text:"notValues"}),notWords:i.identifier({text:"notWords"}),octal:i.identifier({text:"octal"}),parseJson:i.identifier({text:"parseJson"}),partialCheck:i.identifier({text:"partialCheck"}),rawCheck:i.identifier({text:"rawCheck"}),rawTransform:i.identifier({text:"rawTransform"}),readonly:i.identifier({text:"readonly"}),reduceItems:i.identifier({text:"reduceItems"}),regex:i.identifier({text:"regex"}),returns:i.identifier({text:"returns"}),rfcEmail:i.identifier({text:"rfcEmail"}),safeInteger:i.identifier({text:"safeInteger"}),size:i.identifier({text:"size"}),slug:i.identifier({text:"slug"}),someItem:i.identifier({text:"someItem"}),sortItems:i.identifier({text:"sortItems"}),startsWith:i.identifier({text:"startsWith"}),stringifyJson:i.identifier({text:"stringifyJson"}),title:i.identifier({text:"title"}),toLowerCase:i.identifier({text:"toLowerCase"}),toMaxValue:i.identifier({text:"toMaxValue"}),toMinValue:i.identifier({text:"toMinValue"}),toUpperCase:i.identifier({text:"toUpperCase"}),transform:i.identifier({text:"transform"}),trim:i.identifier({text:"trim"}),trimEnd:i.identifier({text:"trimEnd"}),trimStart:i.identifier({text:"trimStart"}),ulid:i.identifier({text:"ulid"}),url:i.identifier({text:"url"}),uuid:i.identifier({text:"uuid"}),value:i.identifier({text:"value"}),values:i.identifier({text:"values"}),words:i.identifier({text:"words"})},async:{argsAsync:i.identifier({text:"argsAsync"}),arrayAsync:i.identifier({text:"arrayAsync"}),awaitAsync:i.identifier({text:"awaitAsync"}),checkAsync:i.identifier({text:"checkAsync"}),checkItemsAsync:i.identifier({text:"checkItemsAsync"}),customAsync:i.identifier({text:"customAsync"}),exactOptionalAsync:i.identifier({text:"exactOptionalAsync"}),fallbackAsync:i.identifier({text:"fallbackAsync"}),forwardAsync:i.identifier({text:"forwardAsync"}),getDefaultsAsync:i.identifier({text:"getDefaultsAsync"}),getFallbacksAsync:i.identifier({text:"getFallbacksAsync"}),intersectAsync:i.identifier({text:"intersectAsync"}),lazyAsync:i.identifier({text:"lazyAsync"}),looseObjectAsync:i.identifier({text:"looseObjectAsync"}),looseTupleAsync:i.identifier({text:"looseTupleAsync"}),mapAsync:i.identifier({text:"mapAsync"}),nonNullableAsync:i.identifier({text:"nonNullableAsync"}),nonNullishAsync:i.identifier({text:"nonNullishAsync"}),nonOptionalAsync:i.identifier({text:"nonOptionalAsync"}),nullableAsync:i.identifier({text:"nullableAsync"}),nullishAsync:i.identifier({text:"nullishAsync"}),objectAsync:i.identifier({text:"objectAsync"}),objectWithRestAsync:i.identifier({text:"objectWithRestAsync"}),optionalAsync:i.identifier({text:"optionalAsync"}),parseAsync:i.identifier({text:"parseAsync"}),parserAsync:i.identifier({text:"parserAsync"}),partialAsync:i.identifier({text:"partialAsync"}),partialCheckAsync:i.identifier({text:"partialCheckAsync"}),pipeAsync:i.identifier({text:"pipeAsync"}),rawCheckAsync:i.identifier({text:"rawCheckAsync"}),rawTransformAsync:i.identifier({text:"rawTransformAsync"}),recordAsync:i.identifier({text:"recordAsync"}),requiredAsync:i.identifier({text:"requiredAsync"}),returnsAsync:i.identifier({text:"returnsAsync"}),safeParseAsync:i.identifier({text:"safeParseAsync"}),safeParserAsync:i.identifier({text:"safeParserAsync"}),setAsync:i.identifier({text:"setAsync"}),strictObjectAsync:i.identifier({text:"strictObjectAsync"}),strictTupleAsync:i.identifier({text:"strictTupleAsync"}),transformAsync:i.identifier({text:"transformAsync"}),tupleAsync:i.identifier({text:"tupleAsync"}),tupleWithRestAsync:i.identifier({text:"tupleWithRestAsync"}),undefinedableAsync:i.identifier({text:"undefinedableAsync"}),unionAsync:i.identifier({text:"unionAsync"}),variantAsync:i.identifier({text:"variantAsync"})},methods:{assert:i.identifier({text:"assert"}),config:i.identifier({text:"config"}),fallback:i.identifier({text:"fallback"}),flatten:i.identifier({text:"flatten"}),forward:i.identifier({text:"forward"}),getDefault:i.identifier({text:"getDefault"}),getDefaults:i.identifier({text:"getDefaults"}),getDescription:i.identifier({text:"getDescription"}),getFallback:i.identifier({text:"getFallback"}),getFallbacks:i.identifier({text:"getFallbacks"}),getMetadata:i.identifier({text:"getMetadata"}),getTitle:i.identifier({text:"getTitle"}),is:i.identifier({text:"is"}),keyof:i.identifier({text:"keyof"}),message:i.identifier({text:"message"}),omit:i.identifier({text:"omit"}),parse:i.identifier({text:"parse"}),parser:i.identifier({text:"parser"}),partial:i.identifier({text:"partial"}),pick:i.identifier({text:"pick"}),pipe:i.identifier({text:"pipe"}),required:i.identifier({text:"required"}),safeParse:i.identifier({text:"safeParse"}),safeParser:i.identifier({text:"safeParser"}),summarize:i.identifier({text:"summarize"}),unwrap:i.identifier({text:"unwrap"})},schemas:{any:i.identifier({text:"any"}),array:i.identifier({text:"array"}),bigInt:i.identifier({text:"bigint"}),blob:i.identifier({text:"blob"}),boolean:i.identifier({text:"boolean"}),custom:i.identifier({text:"custom"}),date:i.identifier({text:"date"}),enum:i.identifier({text:"enum"}),exactOptional:i.identifier({text:"exactOptional"}),file:i.identifier({text:"file"}),function:i.identifier({text:"function"}),instance:i.identifier({text:"instance"}),intersect:i.identifier({text:"intersect"}),lazy:i.identifier({text:"lazy"}),literal:i.identifier({text:"literal"}),looseObject:i.identifier({text:"looseObject"}),looseTuple:i.identifier({text:"looseTuple"}),map:i.identifier({text:"map"}),nan:i.identifier({text:"nan"}),never:i.identifier({text:"never"}),nonNullable:i.identifier({text:"nonNullable"}),nonNullish:i.identifier({text:"nonNullish"}),nonOptional:i.identifier({text:"nonOptional"}),null:i.identifier({text:"null"}),nullable:i.identifier({text:"nullable"}),nullish:i.identifier({text:"nullish"}),number:i.identifier({text:"number"}),object:i.identifier({text:"object"}),objectWithRest:i.identifier({text:"objectWithRest"}),optional:i.identifier({text:"optional"}),picklist:i.identifier({text:"picklist"}),promise:i.identifier({text:"promise"}),record:i.identifier({text:"record"}),set:i.identifier({text:"set"}),strictObject:i.identifier({text:"strictObject"}),strictTuple:i.identifier({text:"strictTuple"}),string:i.identifier({text:"string"}),symbol:i.identifier({text:"symbol"}),tuple:i.identifier({text:"tuple"}),tupleWithRest:i.identifier({text:"tupleWithRest"}),undefined:i.identifier({text:"undefined"}),undefinedable:i.identifier({text:"undefinedable"}),union:i.identifier({text:"union"}),unknown:i.identifier({text:"unknown"}),variant:i.identifier({text:"variant"}),void:i.identifier({text:"void"})},types:{GenericSchema:i.identifier({text:"GenericSchema"})},v:i.identifier({text:"v"})},Ze="valibot";var Kl=({file:e,operation:t,plugin:r})=>{let{requests:n}=r.config,s=r.context.file({id:Ze}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!s.name)return;e.import({module:e.relativePathToFile({context:r.context,id:Ze}),name:s.name}),e.import({alias:g.v.text,module:"valibot",name:"*"});let o="data";return i.arrowFunction({async:true,parameters:[{name:o}],statements:[i.returnStatement({expression:i.awaitExpression({expression:i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.async.parseAsync}),parameters:[i.identifier({text:s.name}),i.identifier({text:o})]})})})]})},Wl=({file:e,operation:t,plugin:r})=>{let{responses:n}=r.config,s=r.context.file({id:Ze}).identifier({$ref:`#/valibot-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!s.name)return;e.import({module:e.relativePathToFile({context:r.context,id:Ze}),name:s.name}),e.import({alias:g.v.text,module:"valibot",name:"*"});let o="data";return i.arrowFunction({async:true,parameters:[{name:o}],statements:[i.returnStatement({expression:i.awaitExpression({expression:i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.async.parseAsync}),parameters:[i.identifier({text:s.name}),i.identifier({text:o})]})})})]})},qp={createRequestValidator:Kl,createResponseValidator:Wl};var $p=({operation:e,plugin:t,state:r})=>{let n=t.context.file({id:Ze});if(t.config.requests.enabled){let s=new Set,o={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let f in e.parameters.header){let m=e.parameters.header[f];p[m.name]=m.schema,m.required&&(c.push(m.name),s.add("headers"));}Object.keys(p).length&&(o.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let f in e.parameters.path){let m=e.parameters.path[f];p[m.name]=m.schema,m.required&&(c.push(m.name),s.add("path"));}Object.keys(p).length&&(o.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let f in e.parameters.query){let m=e.parameters.query[f];p[m.name]=m.schema,m.required&&(c.push(m.name),s.add("query"));}Object.keys(p).length&&(o.properties.query={properties:p,required:c,type:"object"});}}e.body&&(o.properties.body=e.body.schema,e.body.required&&s.add("body")),o.required=[...s];let a=n.identifier({$ref:`#/valibot-data/${e.id}`,case:t.config.requests.case,create:true,nameTransformer:t.config.requests.name,namespace:"value"});de({$ref:`#/valibot-data/${e.id}`,identifier:a,plugin:t,schema:o,state:r});}if(t.config.responses.enabled&&e.responses){let{response:s}=Le(e);if(s){let o=n.identifier({$ref:`#/valibot-response/${e.id}`,case:t.config.responses.case,create:true,nameTransformer:t.config.responses.name,namespace:"value"});de({$ref:`#/valibot-response/${e.id}`,identifier:o,plugin:t,schema:s,state:r});}}};var Ye=e=>e.length===1?e[0]:i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.methods.pipe}),parameters:e}),Hl=({plugin:e,schema:t,state:r})=>{let n=i.propertyAccessExpression({expression:g.v,name:g.schemas.array}),s;if(!t.items)s=i.callExpression({functionName:n,parameters:[Mr()]});else {t=ue({schema:t});let o=t.items.map(a=>{let p=de({plugin:e,schema:a,state:r});return Ye(p)});o.length===1?s=i.callExpression({functionName:n,parameters:o}):(t.logicalOperator,s=i.callExpression({functionName:n,parameters:[Mr()]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?s=i.callExpression({functionName:i.propertyAccessExpression({expression:s,name:g.actions.length}),parameters:[i.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(s=i.callExpression({functionName:i.propertyAccessExpression({expression:s,name:i.identifier({text:"min"})}),parameters:[i.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(s=i.callExpression({functionName:i.propertyAccessExpression({expression:s,name:i.identifier({text:"max"})}),parameters:[i.valueToExpression({value:t.maxItems})]}))),s},Ql=({schema:e})=>typeof e.const=="boolean"?i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.literal}),parameters:[i.ots.boolean(e.const)]}):i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.boolean})}),zl=({schema:e})=>{let t=[],r=false;for(let s of e.items??[])s.type==="string"&&typeof s.const=="string"?t.push(i.stringLiteral({text:s.const})):(s.type==="null"||s.const===null)&&(r=true);if(!t.length)return Mr();let n=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.picklist}),parameters:[i.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(n=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.nullable}),parameters:[n]})),n},Ul=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.never})}),Xl=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.null})}),wr=({isBigInt:e,value:t})=>{let r=i.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?i.callExpression({functionName:"BigInt",parameters:[r]}):r},Gl=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.literal}),parameters:[i.ots.number(e.const)]});let r=[],n=i.callExpression({functionName:t?i.propertyAccessExpression({expression:g.v,name:g.schemas.bigInt}):i.propertyAccessExpression({expression:g.v,name:g.schemas.number})});if(r.push(n),!t&&e.type==="integer"){let s=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.integer})});r.push(s);}if(e.exclusiveMinimum!==void 0){let s=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.gtValue}),parameters:[wr({isBigInt:t,value:e.exclusiveMinimum})]});r.push(s);}else if(e.minimum!==void 0){let s=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.minValue}),parameters:[wr({isBigInt:t,value:e.minimum})]});r.push(s);}if(e.exclusiveMaximum!==void 0){let s=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.ltValue}),parameters:[wr({isBigInt:t,value:e.exclusiveMaximum})]});r.push(s);}else if(e.maximum!==void 0){let s=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.maxValue}),parameters:[wr({isBigInt:t,value:e.maximum})]});r.push(s);}return Ye(r)},Jl=({plugin:e,schema:t,state:r})=>{let n=[],s=t.required??[];for(let a in t.properties){let p=t.properties[a],c=s.includes(a),f=de({optional:!c,plugin:e,schema:p,state:r});he.lastIndex=0;let m;he.test(a)?m=a.startsWith("-")?x.factory.createStringLiteral(a):x.factory.createNumericLiteral(a):m=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(m=`'${a}'`),n.push(i.propertyAssignment({initializer:Ye(f),name:m}));}if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(n).length){let a=de({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.record}),parameters:[i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.string}),parameters:[]}),Ye(a)]})}}let o=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.object}),parameters:[x.factory.createObjectLiteralExpression(n,true)]});return {anyType:g.types.GenericSchema.text,expression:o}},Zl=({schema:e})=>{if(typeof e.const=="string")return i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.literal}),parameters:[i.ots.string(e.const)]});let t=[],r=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.string})});if(t.push(r),e.format)switch(e.format){case "date":t.push(i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.isoDate})}));break;case "date-time":t.push(i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.isoTimestamp})}));break;case "ipv4":case "ipv6":t.push(i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.ip})}));break;case "uri":t.push(i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.url})}));break;case "email":case "time":case "uuid":t.push(i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:i.identifier({text:e.format})})}));break}if(e.minLength===e.maxLength&&e.minLength!==void 0){let n=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.length}),parameters:[i.valueToExpression({value:e.minLength})]});t.push(n);}else {if(e.minLength!==void 0){let n=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.minLength}),parameters:[i.valueToExpression({value:e.minLength})]});t.push(n);}if(e.maxLength!==void 0){let n=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.maxLength}),parameters:[i.valueToExpression({value:e.maxLength})]});t.push(n);}}if(e.pattern){let n=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.regex}),parameters:[i.regularExpressionLiteral({text:e.pattern})]});t.push(n);}return Ye(t)},Yl=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let n=t.const.map(o=>i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.literal}),parameters:[i.valueToExpression({value:o})]}));return i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.tuple}),parameters:[i.arrayLiteralExpression({elements:n})]})}if(t.items){let n=t.items.map(o=>{let a=de({plugin:e,schema:o,state:r});return Ye(a)});return i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.tuple}),parameters:[i.arrayLiteralExpression({elements:n})]})}return Mr()},eu=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.undefined})}),Mr=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.unknown})}),tu=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.void})}),wp=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:Hl({plugin:e,schema:t,state:r})};case "boolean":return {expression:Ql({schema:t})};case "enum":return {expression:zl({schema:t})};case "integer":case "number":return {expression:Gl({schema:t})};case "never":return {expression:Ul()};case "null":return {expression:Xl()};case "object":return Jl({plugin:e,schema:t,state:r});case "string":return {expression:Zl({schema:t})};case "tuple":return {expression:Yl({plugin:e,schema:t,state:r})};case "undefined":return {expression:eu()};case "unknown":return {expression:Mr()};case "void":return {expression:tu()}}},de=({$ref:e,identifier:t,optional:r,plugin:n,schema:s,state:o})=>{let a=n.context.file({id:Ze}),p,c=t,f=[];if(e&&(o.circularReferenceTracker.add(e),c||(c=a.identifier({$ref:e,case:o.nameCase,create:true,nameTransformer:o.nameTransformer,namespace:"value"}))),s.$ref){let m=o.circularReferenceTracker.has(s.$ref),l=a.identifier({$ref:s.$ref,case:o.nameCase,nameTransformer:o.nameTransformer,namespace:"value"});if(!l.name){let u=n.context.resolveIrRef(s.$ref),d=de({$ref:s.$ref,plugin:n,schema:u,state:o});f.push(...d),l=a.identifier({$ref:s.$ref,case:o.nameCase,nameTransformer:o.nameTransformer,namespace:"value"});}if(l.name){let u=i.identifier({text:l.name});if(m){let d=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.lazy}),parameters:[i.arrowFunction({statements:[i.returnStatement({expression:u})]})]});f.push(d),o.hasCircularReference=true;}else f.push(u);}}else if(s.type){let m=wp({plugin:n,schema:s,state:o});if(p=m.anyType,f.push(m.expression),n.config.metadata&&s.description){let l=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.metadata}),parameters:[i.objectExpression({obj:[{key:"description",value:i.stringLiteral({text:s.description})}]})]});f.push(l);}}else if(s.items)if(s=ue({schema:s}),s.items){let m=s.items.map(l=>{let u=de({plugin:n,schema:l,state:o});return Ye(u)});if(s.logicalOperator==="and"){let l=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.intersect}),parameters:[i.arrayLiteralExpression({elements:m})]});f.push(l);}else {let l=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.union}),parameters:[i.arrayLiteralExpression({elements:m})]});f.push(l);}}else {let m=de({plugin:n,schema:s,state:o});f.push(...m);}else {let m=wp({plugin:n,schema:{type:"unknown"},state:o});p=m.anyType,f.push(m.expression);}if(e&&o.circularReferenceTracker.delete(e),f.length&&s.accessScope==="read"){let m=i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.actions.readonly})});f.push(m);}if(f.length){let m;if(s.default!==void 0){let l=s.type==="integer"&&s.format==="int64";m=wr({isBigInt:l,value:s.default}),m&&(f=[i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.optional}),parameters:[Ye(f),m]})]);}r&&!m&&(f=[i.callExpression({functionName:i.propertyAccessExpression({expression:g.v,name:g.schemas.optional}),parameters:[Ye(f)]})]);}if(c&&c.name&&c.created){let m=i.constVariable({comment:n.config.comments?ke({schema:s}):void 0,exportConst:true,expression:Ye(f),name:c.name,typeName:o.hasCircularReference?i.propertyAccessExpression({expression:g.v,name:p||g.types.GenericSchema.text}):void 0});return a.add(m),[]}return f},Mp=({plugin:e})=>{e.createFile({id:Ze,identifierCase:e.config.case,path:e.output}).import({alias:g.v.text,module:"valibot",name:"*"}),e.forEach("operation","parameter","requestBody","schema",r=>{let n={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};r.type==="operation"?$p({operation:r.operation,plugin:e,state:n}):r.type==="parameter"?de({$ref:r.$ref,plugin:e,schema:r.parameter.schema,state:n}):r.type==="requestBody"?de({$ref:r.$ref,plugin:e,schema:r.requestBody.schema,state:n}):r.type==="schema"&&de({$ref:r.$ref,plugin:e,schema:r.schema,state:n});});};var ls={api:qp,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:Mp,name:"valibot",output:"valibot",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Data"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"v{{name}}Response"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.responses});},tags:["validator"]};var ii={parseAsync:i.identifier({text:"parseAsync"})},et="zod";var nu=({file:e,operation:t,plugin:r})=>{let{requests:n}=r.config,s=r.context.file({id:et}).identifier({$ref:`#/zod-data/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!s.name)return;e.import({module:e.relativePathToFile({context:r.context,id:et}),name:s.name});let o="data";return i.arrowFunction({async:true,parameters:[{name:o}],statements:[i.returnStatement({expression:i.awaitExpression({expression:i.callExpression({functionName:i.propertyAccessExpression({expression:i.identifier({text:s.name}),name:ii.parseAsync}),parameters:[i.identifier({text:o})]})})})]})},su=({file:e,operation:t,plugin:r})=>{let{responses:n}=r.config,s=r.context.file({id:et}).identifier({$ref:`#/zod-response/${t.id}`,nameTransformer:typeof n=="object"?n.name:void 0,namespace:"value"});if(!s.name)return;e.import({module:e.relativePathToFile({context:r.context,id:et}),name:s.name});let o="data";return i.arrowFunction({async:true,parameters:[{name:o}],statements:[i.returnStatement({expression:i.awaitExpression({expression:i.callExpression({functionName:i.propertyAccessExpression({expression:i.identifier({text:s.name}),name:ii.parseAsync}),parameters:[i.identifier({text:o})]})})})]})},Fp={createRequestValidator:nu,createResponseValidator:su};var Lp=({operation:e,plugin:t,state:r})=>{let n=t.context.file({id:et});if(t.config.requests.enabled){let s=new Set,o={properties:{body:{type:"never"},path:{type:"never"},query:{type:"never"}},type:"object"};if(e.parameters){if(e.parameters.header){let p={},c=[];for(let f in e.parameters.header){let m=e.parameters.header[f];p[m.name]=m.schema,m.required&&(c.push(m.name),s.add("headers"));}Object.keys(p).length&&(o.properties.headers={properties:p,required:c,type:"object"});}if(e.parameters.path){let p={},c=[];for(let f in e.parameters.path){let m=e.parameters.path[f];p[m.name]=m.schema,m.required&&(c.push(m.name),s.add("path"));}Object.keys(p).length&&(o.properties.path={properties:p,required:c,type:"object"});}if(e.parameters.query){let p={},c=[];for(let f in e.parameters.query){let m=e.parameters.query[f];p[m.name]=m.schema,m.required&&(c.push(m.name),s.add("query"));}Object.keys(p).length&&(o.properties.query={properties:p,required:c,type:"object"});}}e.body&&(o.properties.body=e.body.schema,e.body.required&&s.add("body")),o.required=[...s];let a=n.identifier({$ref:`#/zod-data/${e.id}`,case:t.config.requests.case,create:true,nameTransformer:t.config.requests.name,namespace:"value"});ye({$ref:`#/zod-data/${e.id}`,identifier:a,plugin:t,schema:o,state:r});}if(t.config.responses.enabled&&e.responses){let{response:s}=Le(e);if(s){let o=n.identifier({$ref:`#/zod-response/${e.id}`,case:t.config.responses.case,create:true,nameTransformer:t.config.responses.name,namespace:"value"});ye({$ref:`#/zod-response/${e.id}`,identifier:o,plugin:t,schema:s,state:r});}}};var iu=i.identifier({text:"and"}),Dp=i.identifier({text:"array"}),ou=i.identifier({text:"coerce"}),au=i.identifier({text:"default"}),pu=i.identifier({text:"describe"}),cu=i.identifier({text:"intersection"}),mu=i.identifier({text:"lazy"}),_p=i.identifier({text:"length"}),us=i.identifier({text:"literal"}),Bp=i.identifier({text:"max"}),Kp=i.identifier({text:"min"}),fu=i.identifier({text:"object"}),lu=i.identifier({text:"optional"}),uu=i.identifier({text:"readonly"}),du=i.identifier({text:"record"}),yu=i.identifier({text:"regex"}),Wp=i.identifier({text:"union"}),$=i.identifier({text:"z"}),hu=({plugin:e,schema:t,state:r})=>{let n=i.propertyAccessExpression({expression:$,name:Dp}),s;if(!t.items)s=i.callExpression({functionName:n,parameters:[ai()]});else {t=ue({schema:t});let o=t.items.map(a=>ye({plugin:e,schema:a,state:r}));o.length===1?s=i.callExpression({functionName:n,parameters:o}):(t.logicalOperator,s=i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:Dp}),parameters:[i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:Wp}),parameters:[i.arrayLiteralExpression({elements:o})]})]}));}return t.minItems===t.maxItems&&t.minItems!==void 0?s=i.callExpression({functionName:i.propertyAccessExpression({expression:s,name:_p}),parameters:[i.valueToExpression({value:t.minItems})]}):(t.minItems!==void 0&&(s=i.callExpression({functionName:i.propertyAccessExpression({expression:s,name:Kp}),parameters:[i.valueToExpression({value:t.minItems})]})),t.maxItems!==void 0&&(s=i.callExpression({functionName:i.propertyAccessExpression({expression:s,name:Bp}),parameters:[i.valueToExpression({value:t.maxItems})]}))),s},gu=({schema:e})=>typeof e.const=="boolean"?i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:us}),parameters:[i.ots.boolean(e.const)]}):i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"boolean"})})}),xu=({schema:e})=>{let t=[],r=false;for(let s of e.items??[])s.type==="string"&&typeof s.const=="string"?t.push(i.stringLiteral({text:s.const})):(s.type==="null"||s.const===null)&&(r=true);if(!t.length)return ai();let n=i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"enum"})}),parameters:[i.arrayLiteralExpression({elements:t,multiLine:false})]});return r&&(n=i.callExpression({functionName:i.propertyAccessExpression({expression:n,name:i.identifier({text:"nullable"})})})),n},bu=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"never"})})}),Ou=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"null"})})}),Fr=({isBigInt:e,value:t})=>{let r=i.valueToExpression({value:t});return e&&(typeof t=="bigint"||typeof t=="number"||typeof t=="string"||typeof t=="boolean")?i.callExpression({functionName:"BigInt",parameters:[r]}):r},Su=({schema:e})=>{let t=e.type==="integer"&&e.format==="int64";if(typeof e.const=="number")return i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:us}),parameters:[i.ots.number(e.const)]});let r=i.callExpression({functionName:t?i.propertyAccessExpression({expression:i.propertyAccessExpression({expression:$,name:ou}),name:i.identifier({text:"bigint"})}):i.propertyAccessExpression({expression:$,name:i.identifier({text:"number"})})});return !t&&e.type==="integer"&&(r=i.callExpression({functionName:i.propertyAccessExpression({expression:r,name:i.identifier({text:"int"})})})),e.exclusiveMinimum!==void 0?r=i.callExpression({functionName:i.propertyAccessExpression({expression:r,name:i.identifier({text:"gt"})}),parameters:[Fr({isBigInt:t,value:e.exclusiveMinimum})]}):e.minimum!==void 0&&(r=i.callExpression({functionName:i.propertyAccessExpression({expression:r,name:i.identifier({text:"gte"})}),parameters:[Fr({isBigInt:t,value:e.minimum})]})),e.exclusiveMaximum!==void 0?r=i.callExpression({functionName:i.propertyAccessExpression({expression:r,name:i.identifier({text:"lt"})}),parameters:[Fr({isBigInt:t,value:e.exclusiveMaximum})]}):e.maximum!==void 0&&(r=i.callExpression({functionName:i.propertyAccessExpression({expression:r,name:i.identifier({text:"lte"})}),parameters:[Fr({isBigInt:t,value:e.maximum})]})),r},Tu=({plugin:e,schema:t,state:r})=>{let n=[],s=t.required??[];for(let a in t.properties){let p=t.properties[a],c=s.includes(a),f=ye({optional:!c,plugin:e,schema:p,state:r});he.lastIndex=0;let m;he.test(a)?m=a.startsWith("-")?x.factory.createStringLiteral(a):x.factory.createNumericLiteral(a):m=a,(a.match(/^[0-9]/)&&a.match(/\D+/g)||a.match(/\W/g))&&!a.startsWith("'")&&!a.endsWith("'")&&(m=`'${a}'`),n.push(i.propertyAssignment({initializer:f,name:m}));}if(t.additionalProperties&&t.additionalProperties.type==="object"&&!Object.keys(n).length){let a=ye({plugin:e,schema:t.additionalProperties,state:r});return {anyType:"AnyZodObject",expression:i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:du}),parameters:[a]})}}return {anyType:"AnyZodObject",expression:i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:fu}),parameters:[x.factory.createObjectLiteralExpression(n,true)]})}},Ru=({schema:e})=>{if(typeof e.const=="string")return i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:us}),parameters:[i.ots.string(e.const)]});let t=i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"string"})})});if(e.format)switch(e.format){case "date-time":t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:i.identifier({text:"datetime"})})});break;case "ipv4":case "ipv6":t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:i.identifier({text:"ip"})})});break;case "uri":t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:i.identifier({text:"url"})})});break;case "date":case "email":case "time":case "uuid":t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:i.identifier({text:e.format})})});break}return e.minLength===e.maxLength&&e.minLength!==void 0?t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:_p}),parameters:[i.valueToExpression({value:e.minLength})]}):(e.minLength!==void 0&&(t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:Kp}),parameters:[i.valueToExpression({value:e.minLength})]})),e.maxLength!==void 0&&(t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:Bp}),parameters:[i.valueToExpression({value:e.maxLength})]}))),e.pattern&&(t=i.callExpression({functionName:i.propertyAccessExpression({expression:t,name:yu}),parameters:[i.regularExpressionLiteral({text:e.pattern})]})),t},Iu=({plugin:e,schema:t,state:r})=>{if(t.const&&Array.isArray(t.const)){let o=t.const.map(p=>i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:us}),parameters:[i.valueToExpression({value:p})]}));return i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"tuple"})}),parameters:[i.arrayLiteralExpression({elements:o})]})}let n=[];for(let o of t.items??[])n.push(ye({plugin:e,schema:o,state:r}));return i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"tuple"})}),parameters:[i.arrayLiteralExpression({elements:n})]})},Au=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"undefined"})})}),ai=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"unknown"})})}),Pu=e=>i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:i.identifier({text:"void"})})}),Vp=({plugin:e,schema:t,state:r})=>{switch(t.type){case "array":return {expression:hu({plugin:e,schema:t,state:r})};case "boolean":return {expression:gu({schema:t})};case "enum":return {expression:xu({schema:t})};case "integer":case "number":return {expression:Su({schema:t})};case "never":return {expression:bu()};case "null":return {expression:Ou()};case "object":return Tu({plugin:e,schema:t,state:r});case "string":return {expression:Ru({schema:t})};case "tuple":return {expression:Iu({plugin:e,schema:t,state:r})};case "undefined":return {expression:Au()};case "unknown":return {expression:ai()};case "void":return {expression:Pu()}}},ye=({$ref:e,identifier:t,optional:r,plugin:n,schema:s,state:o})=>{let a=n.context.file({id:et}),p,c,f=t;if(e&&(o.circularReferenceTracker.add(e),f||(f=a.identifier({$ref:e,case:o.nameCase,create:true,nameTransformer:o.nameTransformer,namespace:"value"}))),s.$ref){let m=o.circularReferenceTracker.has(s.$ref),l=a.identifier({$ref:s.$ref,case:o.nameCase,nameTransformer:o.nameTransformer,namespace:"value"});if(!l.name){let u=n.context.resolveIrRef(s.$ref);c=ye({$ref:s.$ref,plugin:n,schema:u,state:o}),l=a.identifier({$ref:s.$ref,case:o.nameCase,nameTransformer:o.nameTransformer,namespace:"value"});}if(l.name){let u=i.identifier({text:l.name});m?(c=i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:mu}),parameters:[i.arrowFunction({statements:[i.returnStatement({expression:u})]})]}),o.hasCircularReference=true):c=u;}}else if(s.type){let m=Vp({plugin:n,schema:s,state:o});p=m.anyType,c=m.expression,n.config.metadata&&s.description&&(c=i.callExpression({functionName:i.propertyAccessExpression({expression:c,name:pu}),parameters:[i.stringLiteral({text:s.description})]}));}else if(s.items)if(s=ue({schema:s}),s.items){let m=s.items.map(l=>ye({plugin:n,schema:l,state:o}));if(s.logicalOperator==="and"){let l=s.items[0];l.logicalOperator==="or"||l.type&&l.type!=="object"?c=i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:cu}),parameters:m}):(c=m[0],m.slice(1).forEach(u=>{c=i.callExpression({functionName:i.propertyAccessExpression({expression:c,name:iu}),parameters:[u]});}));}else c=i.callExpression({functionName:i.propertyAccessExpression({expression:$,name:Wp}),parameters:[i.arrayLiteralExpression({elements:m})]});}else c=ye({plugin:n,schema:s,state:o});else {let m=Vp({plugin:n,schema:{type:"unknown"},state:o});p=m.anyType,c=m.expression;}if(e&&o.circularReferenceTracker.delete(e),c&&(s.accessScope==="read"&&(c=i.callExpression({functionName:i.propertyAccessExpression({expression:c,name:uu})})),r&&(c=i.callExpression({functionName:i.propertyAccessExpression({expression:c,name:lu})})),s.default!==void 0)){let m=s.type==="integer"&&s.format==="int64",l=Fr({isBigInt:m,value:s.default});l&&(c=i.callExpression({functionName:i.propertyAccessExpression({expression:c,name:au}),parameters:[l]}));}if(f&&f.name&&f.created){let m=i.constVariable({comment:n.config.comments?ke({schema:s}):void 0,exportConst:true,expression:c,name:f.name,typeName:o.hasCircularReference?i.propertyAccessExpression({expression:$,name:p||"ZodTypeAny"}):void 0});a.add(m);}return c},Hp=({plugin:e})=>{e.createFile({id:et,identifierCase:e.config.case,path:e.output}).import({module:"zod",name:"z"}),e.forEach("operation","parameter","requestBody","schema",r=>{let n={circularReferenceTracker:new Set,hasCircularReference:false,nameCase:e.config.definitions.case,nameTransformer:e.config.definitions.name};r.type==="operation"?Lp({operation:r.operation,plugin:e,state:n}):r.type==="parameter"?ye({$ref:r.$ref,plugin:e,schema:r.parameter.schema,state:n}):r.type==="requestBody"?ye({$ref:r.$ref,plugin:e,schema:r.requestBody.schema,state:n}):r.type==="schema"&&ye({$ref:r.$ref,plugin:e,schema:r.schema,state:n});});};var ds={api:Fp,config:{case:"camelCase",comments:true,exportFromIndex:false,metadata:false},handler:Hp,name:"zod",output:"zod",resolveConfig:(e,t)=>{e.config.definitions=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.definitions}),e.config.requests=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Data"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.requests}),e.config.responses=t.valueToObject({defaultValue:{case:e.config.case??"camelCase",enabled:true,name:"z{{name}}Response"},mappers:{boolean:r=>({enabled:r}),string:r=>({enabled:true,name:r})},value:e.config.responses});},tags:["validator"]};var ys={"@hey-api/client-axios":vn,"@hey-api/client-fetch":qn,"@hey-api/client-next":$n,"@hey-api/client-nuxt":wn,"@hey-api/schemas":Bn,"@hey-api/sdk":Qn,"@hey-api/transformers":Un,"@hey-api/typescript":Jn,"@tanstack/angular-query-experimental":os,"@tanstack/react-query":as,"@tanstack/solid-query":ps,"@tanstack/svelte-query":cs,"@tanstack/vue-query":ms,fastify:fs,"legacy/angular":Mn,"legacy/axios":Fn,"legacy/fetch":Ln,"legacy/node":Dn,"legacy/xhr":Vn,valibot:ls,zod:ds};var Qp=["@hey-api/typescript","@hey-api/sdk"],Lr={enabled:false,interval:1e3,timeout:6e4},ku=e=>{let t={path:"",validate_EXPERIMENTAL:false,watch:Lr};return typeof e.input=="string"?t.path=e.input:e.input&&(e.input.path!==void 0||e.input.organization!==void 0)?(t={...t,path:"https://get.heyapi.dev",...e.input},t.watch!==void 0&&(t.watch=zp(t))):t={...t,path:e.input},t.validate_EXPERIMENTAL===true&&(t.validate_EXPERIMENTAL="warn"),e.watch!==void 0&&t.watch.enabled===Lr.enabled&&t.watch.interval===Lr.interval&&t.watch.timeout===Lr.timeout&&(t.watch=zp({path:t.path,watch:e.watch})),t},Nu=({userPlugins:e,userPluginsConfig:t})=>{let r=new Set,n=new Set,s={},o=a=>{if(r.has(a))throw new Error(`Circular reference detected at '${a}'`);if(n.has(a))return;r.add(a);let p=ys[a],c=t[a];if(!p&&!c)throw new Error(`unknown plugin dependency "${a}" - do you need to register a custom plugin with this name?`);let f={...p,...c,config:{...p?.config,...c?.config},dependencies:new Set([...p?.dependencies||[],...c?.dependencies||[]])};if(f.resolveConfig){let m={pluginByTag:(l,u={})=>{let{defaultPlugin:d,errorMessage:y}=u;for(let h of e){let I=ys[h]||t[h];if(I&&I.tags?.includes(l)&&h!==a)return h}if(d){let h=ys[d]||t[d];if(h&&h.tags?.includes(l)&&d!==a)return d}throw new Error(y||`missing plugin - no plugin with tag "${l}" found`)},valueToObject:({defaultValue:l,mappers:u,value:d})=>{let y={...l};switch(typeof d){case "boolean":if("boolean"in u){let h=u.boolean;y={...y,...h(d)};}break;case "number":if("number"in u){let h=u.number;y={...y,...h(d)};}break;case "string":if("string"in u){let h=u.string;y={...y,...h(d)};}break;case "object":d!==null&&(y={...y,...d});break}return y}};f.resolveConfig(f,m);}for(let m of f.dependencies)o(m);r.delete(a),n.add(a),s[a]=f;};for(let a of e)o(a);return {pluginOrder:Array.from(n),plugins:s}},vu=e=>{let t={clean:true,format:false,indexFile:true,lint:false,path:"",tsConfigPath:""};return typeof e.output=="string"?t.path=e.output:t={...t,...e.output},t},qu=e=>typeof e=="string"?e.startsWith("@hey-api/client")||e.startsWith("legacy/"):e.name.startsWith("@hey-api/client")||e.name.startsWith("legacy/")||e.tags&&e.tags.includes("client"),$u=e=>{let t={},r=Qp;e.plugins&&(e.plugins=e.plugins.filter(s=>typeof s=="string"&&s||typeof s!="string"&&s.name),e.plugins.length===1&&qu(e.plugins[0])?r=[...Qp,...e.plugins]:r=e.plugins);let n=r.map(s=>{if(typeof s=="string")return s;let o=s.name;return o&&(s.handler?t[o]=s:(t[o]={config:{...s}},delete t[o].config.name)),o}).filter(Boolean);return Nu({userPlugins:n,userPluginsConfig:t})},zp=e=>{let t={...Lr};return typeof e.path!="string"||(typeof e.watch=="boolean"?t.enabled=e.watch:typeof e.watch=="number"?(t.enabled=true,t.interval=e.watch):e.watch&&(t={...t,...e.watch})),t},wu=(e,t)=>({...e||{},...t||{}}),Up=(e,t)=>{let r=e||{},n=t||{},s={...r,...n};return typeof s.logs=="object"&&(s.logs=wu(r.logs,n.logs)),s},PE=async e=>{let t;if(e?.configFile){let o=e.configFile.split(".");t=o.slice(0,o.length-1).join(".");}let{config:r}=await loadConfig({configFile:t,name:"openapi-ts"}),n=Array.isArray(e)?e:Array.isArray(r)?r.map(o=>Up(o,e)):[Up(r,e)],s=[];for(let o of n){let{base:a,configFile:p="",dryRun:c=false,experimentalParser:f=true,exportCore:m=true,name:l,request:u,useOptions:d=true}=o,y=[],h=ja(o);h.level==="debug"&&console.warn("userConfig:",o);let I=ku(o),b=vu(o);I.path||y.push(new Error("missing input - which OpenAPI specification should we use to generate your output?")),b.path||y.push(new Error("missing output - where should we generate your output?")),d||console.warn("\u2757\uFE0F Deprecation warning: useOptions set to false. This setting will be removed in future versions. Please migrate useOptions to true https://heyapi.dev/openapi-ts/migrating.html#v0-27-38"),b.path=Q.resolve(process.cwd(),b.path);let w;try{w=$u(o);}catch(L){y.push(L),w={pluginOrder:[],plugins:{}};}let C=Oi({...w,base:a,configFile:p,dryRun:c,experimentalParser:f,exportCore:false,input:I,logs:h,name:l,output:b,request:u,useOptions:d});C.exportCore=K(C)?m:false,h.level==="debug"&&console.warn("config:",C),s.push({config:C,errors:y});}return s};
export{RT as A,IT as B,ja as C,A as D,Rt as E,It as F,Pt as G,Qp as H,PE as I,ci as a,Mu as b,Fu as c,E as d,S as e,K as f,kt as g,Vs as h,ta as i,rt as j,Id as k,LT as l,i as m,j as n,Fe as o,Od as p,Sd as q,dd as r,Nd as s,vd as t,qd as u,$d as v,nt as w,di as x,mr as y,He as z};//# sourceMappingURL=chunk-EH476QS3.js.map
//# sourceMappingURL=chunk-EH476QS3.js.map