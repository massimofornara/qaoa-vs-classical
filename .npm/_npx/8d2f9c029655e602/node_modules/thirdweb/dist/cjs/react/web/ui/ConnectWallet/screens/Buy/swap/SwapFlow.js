"use strict";
Object.defineProperty(exports, "__esModule", { value: true });
exports.SwapFlow = SwapFlow;
const jsx_runtime_1 = require("react/jsx-runtime");
const react_1 = require("react");
const utils_js_1 = require("../../../../../../../chains/utils.js");
const addresses_js_1 = require("../../../../../../../constants/addresses.js");
const nativeToken_js_1 = require("../../nativeToken.js");
const ConfirmationScreen_js_1 = require("./ConfirmationScreen.js");
const SwapStatusScreen_js_1 = require("./SwapStatusScreen.js");
function SwapFlow(props) {
    const [swapTxHash, setSwapTxHash] = (0, react_1.useState)();
    const quote = props.buyWithCryptoQuote;
    const fromChain = (0, react_1.useMemo)(() => (0, utils_js_1.getCachedChain)(quote.swapDetails.fromToken.chainId), [quote]);
    const toChain = (0, react_1.useMemo)(() => (0, utils_js_1.getCachedChain)(quote.swapDetails.toToken.chainId), [quote]);
    const fromTokenSymbol = quote.swapDetails.fromToken.symbol || "";
    const toTokenSymbol = quote.swapDetails.toToken.symbol || "";
    const fromAmount = quote.swapDetails.fromAmount;
    const toAmount = quote.swapDetails.toAmount;
    const _toToken = quote.swapDetails.toToken;
    const _fromToken = quote.swapDetails.fromToken;
    const toToken = (0, react_1.useMemo)(() => {
        if (_toToken.tokenAddress === addresses_js_1.NATIVE_TOKEN_ADDRESS) {
            return nativeToken_js_1.NATIVE_TOKEN;
        }
        const tokenInfo = {
            address: _toToken.tokenAddress,
            name: _toToken.name || "",
            symbol: _toToken.symbol || "",
        };
        return tokenInfo;
    }, [_toToken]);
    const fromToken = (0, react_1.useMemo)(() => {
        if (_fromToken.tokenAddress === addresses_js_1.NATIVE_TOKEN_ADDRESS) {
            return nativeToken_js_1.NATIVE_TOKEN;
        }
        const tokenInfo = {
            address: _fromToken.tokenAddress,
            name: _fromToken.name || "",
            symbol: _fromToken.symbol || "",
        };
        return tokenInfo;
    }, [_fromToken]);
    if (swapTxHash) {
        return ((0, jsx_runtime_1.jsx)(SwapStatusScreen_js_1.SwapStatusScreen, { client: props.client, fromChain: fromChain, isEmbed: props.isEmbed, onBack: props.onBack, onDone: props.onDone, onSuccess: props.onSuccess, onTryAgain: props.onTryAgain, quote: quote, swapTxHash: swapTxHash, title: props.title, transactionMode: props.transactionMode }));
    }
    return ((0, jsx_runtime_1.jsx)(ConfirmationScreen_js_1.SwapConfirmationScreen, { client: props.client, fromAmount: fromAmount, fromChain: fromChain, fromToken: fromToken, fromTokenSymbol: fromTokenSymbol, isFiatFlow: props.isFiatFlow, onBack: props.onBack, onTryAgain: props.onTryAgain, payer: props.payer, preApprovedAmount: props.approvalAmount, quote: quote, setSwapTxHash: setSwapTxHash, title: props.title, toAmount: toAmount, toChain: toChain, toToken: toToken, toTokenSymbol: toTokenSymbol }));
}
//# sourceMappingURL=SwapFlow.js.map