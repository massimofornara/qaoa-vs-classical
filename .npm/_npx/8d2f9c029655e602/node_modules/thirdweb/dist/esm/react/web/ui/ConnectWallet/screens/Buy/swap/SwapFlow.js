import { jsx as _jsx } from "react/jsx-runtime";
import { useMemo, useState } from "react";
import { getCachedChain } from "../../../../../../../chains/utils.js";
import { NATIVE_TOKEN_ADDRESS } from "../../../../../../../constants/addresses.js";
import { NATIVE_TOKEN } from "../../nativeToken.js";
import { SwapConfirmationScreen } from "./ConfirmationScreen.js";
import { SwapStatusScreen } from "./SwapStatusScreen.js";
export function SwapFlow(props) {
    const [swapTxHash, setSwapTxHash] = useState();
    const quote = props.buyWithCryptoQuote;
    const fromChain = useMemo(() => getCachedChain(quote.swapDetails.fromToken.chainId), [quote]);
    const toChain = useMemo(() => getCachedChain(quote.swapDetails.toToken.chainId), [quote]);
    const fromTokenSymbol = quote.swapDetails.fromToken.symbol || "";
    const toTokenSymbol = quote.swapDetails.toToken.symbol || "";
    const fromAmount = quote.swapDetails.fromAmount;
    const toAmount = quote.swapDetails.toAmount;
    const _toToken = quote.swapDetails.toToken;
    const _fromToken = quote.swapDetails.fromToken;
    const toToken = useMemo(() => {
        if (_toToken.tokenAddress === NATIVE_TOKEN_ADDRESS) {
            return NATIVE_TOKEN;
        }
        const tokenInfo = {
            address: _toToken.tokenAddress,
            name: _toToken.name || "",
            symbol: _toToken.symbol || "",
        };
        return tokenInfo;
    }, [_toToken]);
    const fromToken = useMemo(() => {
        if (_fromToken.tokenAddress === NATIVE_TOKEN_ADDRESS) {
            return NATIVE_TOKEN;
        }
        const tokenInfo = {
            address: _fromToken.tokenAddress,
            name: _fromToken.name || "",
            symbol: _fromToken.symbol || "",
        };
        return tokenInfo;
    }, [_fromToken]);
    if (swapTxHash) {
        return (_jsx(SwapStatusScreen, { client: props.client, fromChain: fromChain, isEmbed: props.isEmbed, onBack: props.onBack, onDone: props.onDone, onSuccess: props.onSuccess, onTryAgain: props.onTryAgain, quote: quote, swapTxHash: swapTxHash, title: props.title, transactionMode: props.transactionMode }));
    }
    return (_jsx(SwapConfirmationScreen, { client: props.client, fromAmount: fromAmount, fromChain: fromChain, fromToken: fromToken, fromTokenSymbol: fromTokenSymbol, isFiatFlow: props.isFiatFlow, onBack: props.onBack, onTryAgain: props.onTryAgain, payer: props.payer, preApprovedAmount: props.approvalAmount, quote: quote, setSwapTxHash: setSwapTxHash, title: props.title, toAmount: toAmount, toChain: toChain, toToken: toToken, toTokenSymbol: toTokenSymbol }));
}
//# sourceMappingURL=SwapFlow.js.map